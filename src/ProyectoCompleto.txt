--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.sln ---

Microsoft Visual Studio Solution File, Format Version 12.00
# Visual Studio Version 17
VisualStudioVersion = 17.14.36109.1
MinimumVisualStudioVersion = 10.0.40219.1
Project("{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}") = "PortalCOSIE.Domain", "PortalCOSIE.Domain\PortalCOSIE.Domain.csproj", "{39B276B8-FB18-0831-65E4-EBBBB01FA469}"
EndProject
Project("{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}") = "PortalCOSIE.Application", "PortalCOSIE.Application\PortalCOSIE.Application.csproj", "{691B7570-82B2-37FB-368D-5C9EFA714BB3}"
EndProject
Project("{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}") = "PortalCOSIE.Infrastructure", "PortalCOSIE.Infrastructure\PortalCOSIE.Infrastructure.csproj", "{0CA5A625-1E55-74C3-7CDD-D14A505938A3}"
EndProject
Project("{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}") = "PortalCOSIE.Web", "PortalCOSIE.Web\PortalCOSIE.Web.csproj", "{D67E74F9-30C9-62D3-0786-0E3053C72A0C}"
EndProject
Project("{2150E333-8FDC-42A3-9474-1A3956D46DE8}") = "Core", "Core", "{02EA681E-C7D8-13C7-8484-4AC65E1B71E8}"
EndProject
Global
	GlobalSection(SolutionConfigurationPlatforms) = preSolution
		Debug|Any CPU = Debug|Any CPU
		Release|Any CPU = Release|Any CPU
	EndGlobalSection
	GlobalSection(ProjectConfigurationPlatforms) = postSolution
		{39B276B8-FB18-0831-65E4-EBBBB01FA469}.Debug|Any CPU.ActiveCfg = Debug|Any CPU
		{39B276B8-FB18-0831-65E4-EBBBB01FA469}.Debug|Any CPU.Build.0 = Debug|Any CPU
		{39B276B8-FB18-0831-65E4-EBBBB01FA469}.Release|Any CPU.ActiveCfg = Release|Any CPU
		{39B276B8-FB18-0831-65E4-EBBBB01FA469}.Release|Any CPU.Build.0 = Release|Any CPU
		{691B7570-82B2-37FB-368D-5C9EFA714BB3}.Debug|Any CPU.ActiveCfg = Debug|Any CPU
		{691B7570-82B2-37FB-368D-5C9EFA714BB3}.Debug|Any CPU.Build.0 = Debug|Any CPU
		{691B7570-82B2-37FB-368D-5C9EFA714BB3}.Release|Any CPU.ActiveCfg = Release|Any CPU
		{691B7570-82B2-37FB-368D-5C9EFA714BB3}.Release|Any CPU.Build.0 = Release|Any CPU
		{0CA5A625-1E55-74C3-7CDD-D14A505938A3}.Debug|Any CPU.ActiveCfg = Debug|Any CPU
		{0CA5A625-1E55-74C3-7CDD-D14A505938A3}.Debug|Any CPU.Build.0 = Debug|Any CPU
		{0CA5A625-1E55-74C3-7CDD-D14A505938A3}.Release|Any CPU.ActiveCfg = Release|Any CPU
		{0CA5A625-1E55-74C3-7CDD-D14A505938A3}.Release|Any CPU.Build.0 = Release|Any CPU
		{D67E74F9-30C9-62D3-0786-0E3053C72A0C}.Debug|Any CPU.ActiveCfg = Debug|Any CPU
		{D67E74F9-30C9-62D3-0786-0E3053C72A0C}.Debug|Any CPU.Build.0 = Debug|Any CPU
		{D67E74F9-30C9-62D3-0786-0E3053C72A0C}.Release|Any CPU.ActiveCfg = Release|Any CPU
		{D67E74F9-30C9-62D3-0786-0E3053C72A0C}.Release|Any CPU.Build.0 = Release|Any CPU
	EndGlobalSection
	GlobalSection(SolutionProperties) = preSolution
		HideSolutionNode = FALSE
	EndGlobalSection
	GlobalSection(NestedProjects) = preSolution
		{39B276B8-FB18-0831-65E4-EBBBB01FA469} = {02EA681E-C7D8-13C7-8484-4AC65E1B71E8}
		{691B7570-82B2-37FB-368D-5C9EFA714BB3} = {02EA681E-C7D8-13C7-8484-4AC65E1B71E8}
	EndGlobalSection
	GlobalSection(ExtensibilityGlobals) = postSolution
		SolutionGuid = {33973991-FB8D-479F-8B34-923E5D411DB7}
	EndGlobalSection
EndGlobal



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\VS2txt.ps1 ---
# DefiniciÃ³n de la lista de directorios a excluir
$excludedDirs = @(
    "bin", "obj", ".git", ".vs", "node_modules", 
    "packages", "TestResults", "ProyectoCompleto.txt", 
    "wwwroot", "Views"
)

# DefiniciÃ³n de las extensiones de archivos de cÃ³digo que queremos incluir
# Excluimos .js, .css y otros archivos de frontend que estÃ¡n en otras carpetas
$includedExtensions = @(
    ".cs", ".json", ".xml", ".cshtml", ".csproj", ".sln", 
    ".config", ".bat", ".ps1" 
)

$outputFile = "ProyectoCompleto.txt"

# Elimina el archivo anterior si existe
Remove-Item $outputFile -ErrorAction SilentlyContinue

Write-Host "Iniciando la exportaciÃ³n..."

# 1. Obtener todos los archivos de forma recursiva, aplicando filtros de exclusiÃ³n.
$filesToExport = Get-ChildItem -Path . -Recurse -File | Where-Object { 
    # Excluir directorios (la ruta no debe contener ninguna de las carpetas excluidas)
    $isExcluded = $false
    foreach ($dir in $excludedDirs) {
        # Usamos -like para verificar si el directorio contiene el nombre de la carpeta excluida
        if ($_.DirectoryName -like "*\$dir*") {
            $isExcluded = $true
            break
        }
    }
    
    # Incluir solo archivos con las extensiones especificadas
    -not $isExcluded -and ($_.Extension -in $includedExtensions)
}

# 2. Procesar cada archivo y agregar su contenido al archivo de salida
foreach ($file in $filesToExport) {
    # Encabezado para identificar el archivo
    "--- Archivo: $($file.FullName) ---" | Out-File $outputFile -Append -Encoding UTF8

    # Contenido del archivo. Usamos -Encoding Default para manejar la mayorÃ­a de los archivos de cÃ³digo
    # El uso de Get-Content es robusto para diferentes codificaciones.
    Get-Content $file.FullName -Encoding Default | Out-File $outputFile -Append -Encoding UTF8
    
    "`n`n" | Out-File $outputFile -Append -Encoding UTF8
    Write-Host "Exportado: $($file.Name)"
}

Write-Host "--------------------------------------------------------"
Write-Host "âœ… ExportaciÃ³n Finalizada. Archivo generado: $outputFile"
Read-Host "Presiona Enter para cerrar"



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Application\PortalCOSIE.Application.csproj ---
<Project Sdk="Microsoft.NET.Sdk">

  <PropertyGroup>
    <TargetFramework>net8.0</TargetFramework>
    <ImplicitUsings>enable</ImplicitUsings>
    <Nullable>enable</Nullable>
  </PropertyGroup>

  <ItemGroup>
    <ProjectReference Include="..\PortalCOSIE.Domain\PortalCOSIE.Domain.csproj" />
  </ItemGroup>

  <ItemGroup>
    <Folder Include="DTO\Bitacora\" />
  </ItemGroup>

</Project>



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Application\Result.cs ---

namespace PortalCOSIE.Application
{
    public class Result<T>
    {
        public bool Succeeded { get; private set; }
        public T Value { get; private set; }
        public List<string> Errors { get; private set; } = new();

        private Result() { }

        public static Result<T> Success(T value)
        {
            return new Result<T> { Succeeded = true, Value = value };
        }

        public static Result<T> Failure(string error)
        {
            return new Result<T> { Succeeded = false, Errors = new List<string> { error } };
        }

        public static Result<T> Failure(IEnumerable<string> errors)
        {
            return new Result<T> { Succeeded = false, Errors = errors.ToList() };
        }
    }

}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Application\DTO\Cuenta\AlumnoDTO.cs ---
namespace PortalCOSIE.Application.DTO.Cuenta
{
    public class AlumnoDTO
    {
        public string IdentityUserId { get; set; }
        public string Nombre { get; set; }
        public string ApellidoPaterno { get; set; }
        public string ApellidoMaterno { get; set; }
        public string PeriodoIngreso { get; set; }
        public string NumeroBoleta { get; set; }
        public int CarreraId { get; set; }
    }
}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Application\DTO\Cuenta\CambiarContrasenaDTO.cs ---
namespace PortalCOSIE.Application.DTO.Cuenta
{
    public class CambiarContrasenaDTO
    {
        public string IdentityUserId { get; set; }
        public string Contrasena { get; set; }
        public string NuevaContrasena { get; set; }
        public string ConfirmarContrasena { get; set; }
    }
}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Application\DTO\Cuenta\CrearCuentaDTO.cs ---
namespace PortalCOSIE.Application.DTO.Cuenta
{
    public class CrearCuentaDTO
    {
        public string Correo { get; set; }
        public string Celular { get; set; }
        public string Contrasena { get; set; }
        public string ConfirmarContrasena { get; set; }
    }
}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Application\DTO\Cuenta\IngresarDTO.cs ---
namespace PortalCOSIE.Application.DTO.Cuenta
{
    public class IngresarDTO
    {
        public string Correo { get; set; }
        public string Contrasena { get; set; }
    }
}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Application\DTO\Cuenta\RegistrarDTO.cs ---
namespace PortalCOSIE.Application.DTO.Cuenta
{
    public class RegistrarDTO
    {
        public string Nombre { get; set; }
        public string ApellidoPaterno { get; set; }
        public string ApellidoMaterno { get; set; }
        public string NumeroBoleta { get; set; }
        public string PeriodoIngreso { get; set; }
        public int CarreraId { get; set; }
        //public int PlanEstudioId { get; set; }
    }
}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Application\DTO\Cuenta\RestablecerDTO.cs ---
namespace PortalCOSIE.Application.DTO.Cuenta
{
    public class RestablecerDTO
    {
        public string Token { get; set; }
        public string Correo { get; set; }
        public string NuevaContrasena { get; set; }
        public string ConfirmarContrasena { get; set; }
    }
}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Application\DTO\Tramites\SolicitudCtceDTO.cs ---
using PortalCOSIE.Domain.Entities.Documentos;

namespace PortalCOSIE.Application.DTO.Tramites
{
    public class SolicitudCtceDTO
    {
        public string Situacion { get; set; }
        public bool TieneDictamenesAnteriores { get; set; }
        public List<UnidadReprobadaDto> UnidadesReprobadas { get; set; } = new List<UnidadReprobadaDto>();
        public DocumentoDto CartaExposicionMotivos { get; set; }
        public DocumentoDto Identificacion { get; set; }
        public DocumentoDto BoletaGlobal { get; set; }
        public DocumentoDto Probatorios { get; set; }
    }

    public class UnidadReprobadaDto
    {
        public int UnidadId { get; set; }
        public string PeriodoCursado { get; set; }
        public string PeriodoRecursado { get; set; }
    }

    public class DocumentoDto
    {
        public string Nombre { get; set; }
        public Stream Contenido { get; set; }
    }
}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Application\DTO\Usuario\AlumnoCompletoDTO.cs ---
using PortalCOSIE.Domain.Entities.Carreras;

namespace PortalCOSIE.Application.DTO.Usuario
{
    public class AlumnoCompletoDTO
    {
        public string IdentityUserId { get; set; }
        public string Nombre { get; set; }
        public string ApellidoPaterno { get; set; }
        public string ApellidoMaterno { get; set; }
        public string PeriodoIngreso { get; set; }
        public string NumeroBoleta { get; set; }
        public Carrera Carrera { get; set; }
        public string Correo { get; set; }
        public bool CorreoConfirmado { get; set; }
        public string Celular { get; set; }
        public string Rol { get; set; }
    }
}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Application\DTO\Usuario\PersonalCompletoDTO.cs ---
namespace PortalCOSIE.Application.DTO.Usuario
{
    public class PersonalCompletoDTO
    {
        public string IdentityUserId { get; set; }
        public string Nombre { get; set; }
        public string ApellidoPaterno { get; set; }
        public string ApellidoMaterno { get; set; }
        public string Correo { get; set; }
        public string Rol { get; set; }
    }
}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Application\DTO\Usuario\PersonalDTO.cs ---
namespace PortalCOSIE.Application.DTO.Usuario
{
    public class PersonalDTO
    {
        public string IdentityUserId { get; set; }
        public string Nombre { get; set; }
        public string ApellidoPaterno { get; set; }
        public string ApellidoMaterno { get; set; }
    }
}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Application\DTO\Usuario\RegistrarAlumnoDTO.cs ---
namespace PortalCOSIE.Application.DTO.Usuario
{
    public class RegistrarAlumnoDTO
    {   
        public string Nombre { get; set; }
        public string ApellidoPaterno { get; set; }
        public string ApellidoMaterno { get; set; }
        public string NumeroBoleta { get; set; }
        public string PeriodoIngreso { get; set; }
        public int CarreraId { get; set; }
        public string Correo { get; set; }
    }
}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Application\Interfaces\IBitacoraService.cs ---
using PortalCOSIE.Domain.Entities.Bitacoras;

namespace PortalCOSIE.Application.Interfaces
{
    public interface IBitacoraService
    {
        Task<IEnumerable<EntradaBitacora>> ListarBitacoraAsync();
    }

}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Application\Interfaces\ICarreraService.cs ---
using PortalCOSIE.Domain.Entities.Carreras;
using PortalCOSIE.Domain.Enums;

namespace PortalCOSIE.Application.Interfaces
{
    public interface ICarreraService
    {
        Task<IEnumerable<Carrera>> ListarAsync();
        Task<IEnumerable<Carrera>> ListarActivasAsync();
        Task<Carrera?> ListarConUnidadesAsync(string carrera);
        Task CrearCarreraAsync(string nombre);
        Task EditarCarreraAsync(int id, string nombre);
        Task ToggleCarrrera(int id);

        Task<IEnumerable<UnidadAprendizaje>> ListarUnidadesAsync(string carrera);
        Task CrearUnidadAsync(string nombre, int carreraId, Semestre semestre);
        Task EditarUnidadAsync(string carreraNombre, int id, string nombre, Semestre semestre);
        Task ToggleUnidad(string carreraNombre, int unidadId);
    }
}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Application\Interfaces\ICatalogoService.cs ---
using PortalCOSIE.Domain.Entities;

namespace PortalCOSIE.Application.Interfaces
{
    public interface ICatalogoService<T> where T : BaseEntity
    {
        Task<IEnumerable<T>> ListarActivosAsync();
        Task<IEnumerable<T>> ListarAsync();
        Task ToggleAsync(int id);
    }
}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Application\Interfaces\IEmailSender.cs ---
namespace PortalCOSIE.Application.Interfaces
{
    public interface IEmailSender
    {
        Task<Result<string>> SendEmailAsync(string toEmail, string subject, string htmlMessage);
    }
}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Application\Interfaces\IPeriodosService.cs ---
using PortalCOSIE.Domain.Entities.Calendario;

namespace PortalCOSIE.Application.Interfaces
{
    public interface IPeriodosService
    {
        #region PERIODO_CONFIG
        Task<IEnumerable<string>> ListarPeriodos();
        Task<PeriodoConfig> BuscarPeriodoConfig();
        Task EditarPeriodoConfig(int anioInicio, int periodoInicio, int anioFin, int periodoFin);
        #endregion

        #region SESION_COSIE
        Task<IEnumerable<SesionCOSIE>> ListarSesiones();
        Task<IEnumerable<SesionCOSIE>> ListarSesionesActivas();
        Task CrearSesion(string numeroSesion, DateTime fechaSesion, List<DateTime> fechasRecepcion);
        Task EditarSesion(int id, string numeroSesion, DateTime fechaSesion, List<DateTime> fechasRecepcion);
        Task ToggleSesion(int id);
        #endregion
    }
}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Application\Interfaces\ISecurityService.cs ---
using PortalCOSIE.Application.DTO.Cuenta;
using PortalCOSIE.Application.DTO.Usuario;

namespace PortalCOSIE.Application.Interfaces
{
    public interface ISecurityService
    {
        Task<Result<string>> IngresarUsuarioAsync(IngresarDTO dto);
        Task CerrarSesionAsync();
        Task<Result<string>> CrearUsuarioAsync(CrearCuentaDTO dto);
        Task<Result<string>> ConfirmarCorreoAsync(string correo, string token);
        Task<Result<string>> RecuperarContrasenaAsync(string correo);
        Task<Result<string>> RestablecerContrasenaAsync(RestablecerDTO dto);
        Task<Result<string>> CambiarContrasena(CambiarContrasenaDTO dto);
        Task<Result<string>> ToggleRol(string userId, string rol);
        Task<Result<string>> VerificarCorreoAsync(string userId, string correo);
        Task<Result<string>> ActualizarCorreoAsync(string id, string correo, string token);
        Task<Result<string>> ActualizarCelularAsync(string userId, string celular);
        Task<AlumnoCompletoDTO?> BuscarAlumnoCompleto(string identityUserId);
        Task<IEnumerable<AlumnoCompletoDTO>> ListarAlumnos();
        Task<IEnumerable<PersonalCompletoDTO>> ListarPersonal();
    }
}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Application\Interfaces\ITramiteService.cs ---
using PortalCOSIE.Application.DTO.Tramites;
using PortalCOSIE.Domain.Entities.Tramites;

namespace PortalCOSIE.Application.Interfaces
{
    public interface ITramiteService
    {
        Task<IEnumerable<Tramite>> ListarTodos();
        Task SolicitarCTCE(SolicitudCtceDTO dto, string userId);
        Task<Tramite?> BuscarPorId(int id);
    }
}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Application\Interfaces\IUsuarioService.cs ---
using PortalCOSIE.Application.DTO.Cuenta;
using PortalCOSIE.Application.DTO.Usuario;
using PortalCOSIE.Domain.Entities.Usuarios;

namespace PortalCOSIE.Application.Interfaces
{
    public interface IUsuarioService
    {
        Task<Result<string>> RegistrarAlumno(RegistrarDTO dto, string userId);
        Task<Usuario> BuscarUsuarioPorIdentityId(string id);
        Task<PersonalDTO?> BuscarPersonal(string identityUserId);
        Task<Result<string>> EditarAlumno(AlumnoDTO dto);
        Task<Result<string>> EditarPersonal(PersonalDTO dto);
    }
}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Application\Services\BitacoraService.cs ---
using PortalCOSIE.Domain.Entities.Bitacoras;

namespace PortalCOSIE.Application.Interfaces
{
    public class BitacoraService : IBitacoraService
    {
        private readonly IBitacoraRepository _bitacoraRepo;
        public BitacoraService(
            IBitacoraRepository bitacoraRepo
            )
        {
            _bitacoraRepo = bitacoraRepo;
        }

        public async Task<IEnumerable<EntradaBitacora>> ListarBitacoraAsync()
        {
            return await _bitacoraRepo.ListarConCorreo();
        }
    }

}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Application\Services\CarreraService.cs ---
using PortalCOSIE.Application.Interfaces;
using PortalCOSIE.Domain.Entities.Carreras;
using PortalCOSIE.Domain.Enums;
using PortalCOSIE.Domain.Interfaces;
using static System.Runtime.InteropServices.JavaScript.JSType;

namespace PortalCOSIE.Application.Services
{
    public class CarreraService : ICarreraService
    {
        private readonly ICarreraRepository _carreraRepo;
        private readonly IUnitOfWork _unitOfWork;

        public CarreraService(
            ICarreraRepository carreraRepo,
            IUnitOfWork unitOfWork)
        {
            _carreraRepo = carreraRepo;
            _unitOfWork = unitOfWork;
        }
        #region CARRERA
        public async Task<IEnumerable<Carrera>> ListarActivasAsync()
        {
            return await _carreraRepo.GetAllAsync(true);
        }
        public async Task<IEnumerable<Carrera>> ListarAsync()
        {
            return await _carreraRepo.GetAllAsync(false);
        }
        public async Task<Carrera?> ListarConUnidadesAsync(string carrera)
        {
            return await _carreraRepo.ObtenerCarreraConUnidadesAsync(carrera);
        }
        public async Task CrearCarreraAsync(string nombre)
        {
            await _carreraRepo.AddAsync(new Carrera(nombre));
            await _unitOfWork.SaveChangesAsync();
        }
        public async Task EditarCarreraAsync(int id, string nombre)
        {
            var carrera = await _carreraRepo.GetByIdAsync(id);

            if (carrera == null)
                throw new ApplicationException("Carrera no encontrada");

            carrera.ActualizarNombre(nombre);
            await _unitOfWork.SaveChangesAsync();
        }
        public async Task ToggleCarrrera(int id)
        {
            var carrera = await _carreraRepo.GetByIdAsync(id);
            if (carrera.IsDeleted)
                carrera.Restore();
            else
                carrera.SoftDelete();
            await _unitOfWork.SaveChangesAsync();
        }
        #endregion

        #region UNIDADES
        public async Task<IEnumerable<UnidadAprendizaje>> ListarUnidadesAsync(string carrera)
        {
            return await _carreraRepo.ListarUnidadesPorCarreraAsync(carrera);
        }

        public async Task CrearUnidadAsync(string nombre, int carreraId, Semestre semestre)
        {
            var carrera = await _carreraRepo.GetByIdAsync(carreraId);
            carrera.AgregarUnidad(nombre, semestre);
            await _unitOfWork.SaveChangesAsync();
        }
        public async Task EditarUnidadAsync(string carreraNombre, int id, string nombre, Semestre semestre)
        {
            var carrera = await _carreraRepo.ObtenerCarreraConUnidadesAsync(carreraNombre);
            if (carrera == null)
                throw new ApplicationException("Carrera no encontrada");
            
            var unidad = carrera.UnidadesAprendizaje
                .FirstOrDefault(u => u.Id == id);
            
            if (unidad == null)
                throw new ApplicationException("Unidad de aprendizaje no encontrada");

            unidad.SetNombre(nombre);
            unidad.SetSemestre(semestre);

            await _unitOfWork.SaveChangesAsync();
        }
        public async Task ToggleUnidad(string carreraNombre, int id)
        {
            var carrera = await _carreraRepo.ObtenerCarreraConUnidadesAsync(carreraNombre);
            if (carrera == null)
                throw new ApplicationException("Carrera no encontrada");

            var unidad = carrera.UnidadesAprendizaje
                .FirstOrDefault(u => u.Id == id);

            if (unidad.IsDeleted)
                unidad.Restore();
            else
                unidad.SoftDelete();
            await _unitOfWork.SaveChangesAsync();
        }
        #endregion
    }
}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Application\Services\CatalogoService.cs ---
using PortalCOSIE.Application.Interfaces;
using PortalCOSIE.Domain.Entities;
using PortalCOSIE.Domain.Interfaces;

namespace PortalCOSIE.Application.Services
{
    public class CatalogoService<T> : ICatalogoService<T> where T : BaseEntity
    {
        private readonly IBaseRepository<T> _catalogoRepo;
        private readonly IUnitOfWork _unitOfWork;

        public CatalogoService(
            IBaseRepository<T> catalogoRepo,
            IUnitOfWork unitOfWork)
        {
            _catalogoRepo = catalogoRepo;
            _unitOfWork = unitOfWork;
        }

        public async Task<IEnumerable<T>> ListarActivosAsync()
        {
            return await _catalogoRepo.GetAllAsync(true);
        }

        public async Task<IEnumerable<T>> ListarAsync()
        {
            return await _catalogoRepo.GetAllAsync(false);
        }

        public async Task ToggleAsync(int id)
        {
            var entidad = await _catalogoRepo.GetByIdAsync(id);
            if (entidad.IsDeleted)
                entidad.Restore();
            else
                entidad.SoftDelete();
            await _unitOfWork.SaveChangesAsync();
        }
    }
}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Application\Services\PeriodosService.cs ---
using PortalCOSIE.Application.Interfaces;
using PortalCOSIE.Domain.Entities.Calendario;
using PortalCOSIE.Domain.Interfaces;

namespace PortalCOSIE.Application
{
    public class PeriodosService : IPeriodosService
    {
        private readonly IBaseRepository<PeriodoConfig> _periodoRepo;
        private readonly ISesionRepository _sesionRepo;
        private readonly IUnitOfWork _unitOfWork;

        public PeriodosService(
            ISesionRepository sesionRepo,
            IBaseRepository<PeriodoConfig> periodoRepo,
            IUnitOfWork unitOfWork)
        {
            _sesionRepo = sesionRepo;
            _periodoRepo = periodoRepo;
            _unitOfWork = unitOfWork;
        }

        #region PERIODO_CONFIG
        public async Task<PeriodoConfig> BuscarPeriodoConfig()
        {
            if (await _periodoRepo.GetByIdAsync(1) == null)
            {
                var nuevo = new PeriodoConfig(2010, 1, DateTime.Now.Year + 1, 1);
                await _periodoRepo.AddAsync(nuevo);
                await _unitOfWork.SaveChangesAsync();
                return nuevo;
            }
            return await _periodoRepo.GetByIdAsync(1);
        }
        public async Task<IEnumerable<string>> ListarPeriodos()
        {
            var periodoConfig = await _periodoRepo.GetByIdAsync(1);

            if (periodoConfig == null)
                throw new Exception("No existe configuración de periodos.");

            var periodos = new List<string>();

            int anioInicio = periodoConfig.AnioInicio;
            int anioFin = periodoConfig.AnioFin;

            for (int anio = anioInicio; anio <= anioFin; anio++)
            {
                int periodoInicio = (anio == anioInicio) ? periodoConfig.PeriodoInicio : 1;
                int periodoFin = (anio == anioFin) ? periodoConfig.PeriodoFin : 2;

                for (int p = periodoInicio; p <= periodoFin; p++)
                {
                    periodos.Add($"{anio}/{p}");
                }
            }
            return periodos;
        }
        public async Task EditarPeriodoConfig(int anioInicio, int periodoInicio, int anioFin, int periodoFin)
        {
            var periodo = await _periodoRepo.GetByIdAsync(1);
            if (periodo == null)
                throw new Exception("Configuracion de periodo no encontrada");
            periodo.SetAnioInicio(anioInicio);
            periodo.SetPeriodoInicio(periodoInicio);
            periodo.SetAnioFin(anioFin);
            periodo.SetPeriodoFin(periodoFin);
            await _unitOfWork.SaveChangesAsync();
        }
        #endregion

        #region SESION_COSIE
        public async Task<IEnumerable<SesionCOSIE>> ListarSesiones()
        {
            return await _sesionRepo.ListarSesiones(false);
        }
        public async Task<IEnumerable<SesionCOSIE>> ListarSesionesActivas()
        {
            return await _sesionRepo.ListarSesiones(true);
        }
        public async Task CrearSesion(string numeroSesion, DateTime fechaSesion, List<DateTime> fechasRecepcion)
        {
            var sesion = new SesionCOSIE(
                numeroSesion,
                fechaSesion
                );
            sesion.SetFechasRecepcion(fechasRecepcion);
            await _sesionRepo.AddAsync(sesion);
            await _unitOfWork.SaveChangesAsync();
        }
        public async Task EditarSesion(int id, string numeroSesion, DateTime fechaSesion, List<DateTime> fechasRecepcion)
        {
            var sesion = await _sesionRepo.ObtenerConFechasRecepcion(id);

            if (sesion == null)
                throw new Exception("No se encontro el registro");
            sesion.SetNumeroSesion(numeroSesion);
            sesion.SetFechaSesion(fechaSesion);
            sesion.SetFechasRecepcion(fechasRecepcion);
            await _unitOfWork.SaveChangesAsync();
        }
        public async Task ToggleSesion(int id)
        {
            var sesion = await _sesionRepo.GetByIdAsync(id);
            if (sesion.IsDeleted)
                sesion.Restore();
            else
                sesion.SoftDelete();
            await _unitOfWork.SaveChangesAsync();
        }
        #endregion
    }
}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Application\Services\TramiteService.cs ---
using PortalCOSIE.Application.DTO.Tramites;
using PortalCOSIE.Application.Interfaces;
using PortalCOSIE.Domain.Entities.Tramites;
using PortalCOSIE.Domain.Entities.Usuarios;
using PortalCOSIE.Domain.Interfaces;

namespace PortalCOSIE.Application
{
    public class TramiteService : ITramiteService
    {
        private readonly ITramiteRepository _tramiteRepo;
        private readonly IDocumentoRepository _docRepo;
        private readonly IUsuarioRepository _usuarioRepo;
        private readonly IUnitOfWork _unitOfWork;

        public TramiteService(
            ITramiteRepository tramiteRepo,
            IDocumentoRepository docRepo,
            IUsuarioRepository usuarioRepo,
            IUnitOfWork unitOfWork)
        {
            _tramiteRepo = tramiteRepo;
            _docRepo = docRepo;
            _usuarioRepo = usuarioRepo;
            _unitOfWork = unitOfWork;
        }

        public async Task<IEnumerable<Tramite>> ListarTodos()
        {
            return await _tramiteRepo.ListarConDatosCompletos();
        }
        public async Task SolicitarCTCE(SolicitudCtceDTO dto, string userId)
        {
            try
            {
                await _unitOfWork.BeginTransactionAsync();
                var alumno = await _usuarioRepo.BuscarPorIdentityId(userId);

                var unidadesReprobadasEntities = new List<UnidadReprobada>();

                foreach (var itemDto in dto.UnidadesReprobadas)
                {
                    // Validación opcional: verificar si pertenece a la carrera (Nota: esto hace N queries a la BD)
                    var nuevaUnidadEntity = new UnidadReprobada(
                        itemDto.UnidadId,
                        itemDto.PeriodoCursado,
                        itemDto.PeriodoRecursado
                    );

                    unidadesReprobadasEntities.Add(nuevaUnidadEntity);
                }

                // 2. Crear el Trámite
                var tramite = new DetalleCTCE(
                    alumno.Id,
                    TipoTramite.DictamenInterno.Id,
                    dto.Situacion,
                    dto.TieneDictamenesAnteriores,
                    unidadesReprobadasEntities
                );

                await _tramiteRepo.AddAsync(tramite);
                await _unitOfWork.SaveChangesAsync(); // Ahora tramite.Id tiene valor

                await _unitOfWork.CommitTransactionAsync();
            }
            catch (Exception)
            {
                await _unitOfWork.RollbackTransactionAsync();
                throw;
            }
        }
        public async Task<Tramite?> BuscarPorId(int id)
        {
            return await _tramiteRepo.GetByIdAsync(id);
        }
    }
}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Application\Services\UsuarioService.cs ---
using PortalCOSIE.Application.DTO.Cuenta;
using PortalCOSIE.Application.DTO.Usuario;
using PortalCOSIE.Application.Interfaces;
using PortalCOSIE.Domain.Entities.Usuarios;
using PortalCOSIE.Domain.Interfaces;

namespace PortalCOSIE.Application
{
    public class UsuarioService : IUsuarioService
    {
        private readonly IUnitOfWork _unitOfWork;
        private readonly IUsuarioRepository _usuarioRepo;
        private readonly IEmailSender _emailSender;

        public UsuarioService(
            IUnitOfWork unitOfWork,
            IUsuarioRepository usuarioRepo,
            IEmailSender emailSender
            )
        {
            _unitOfWork = unitOfWork;
            _usuarioRepo = usuarioRepo;
            _emailSender = emailSender;
        }

        public async Task<Result<string>> RegistrarAlumno(RegistrarDTO dto, string userId)
        {
            try
            {
                await _unitOfWork.BeginTransactionAsync();

                if (await _usuarioRepo.BuscarAlumnoPorBoleta(dto.NumeroBoleta) != null)
                    return Result<string>.Failure("El número de boleta ya existe");
                if (await _usuarioRepo.BuscarPorIdentityId(userId) != null)
                    throw new ApplicationException("Este id de usuario ya existe");

                var usuario = new Alumno(
                    userId,
                    dto.Nombre,
                    dto.ApellidoPaterno,
                    dto.ApellidoMaterno,
                    dto.NumeroBoleta,
                    dto.PeriodoIngreso,
                    dto.CarreraId
                    );

                await _usuarioRepo.AddAsync(usuario);
                await _unitOfWork.SaveChangesAsync();
                await _unitOfWork.CommitTransactionAsync();
                return Result<string>.Success("Registro exitoso.\nDebes acudir a gestión escolar con tu credencial para activar tu cuenta.");
            }
            catch (Exception)
            {
                await _unitOfWork.RollbackTransactionAsync();
                throw;
            }
        }
        public async Task<Usuario> BuscarUsuarioPorIdentityId(string id)
        {
            if (id == null)
                throw new ApplicationException("No se puede buscar un Id nulo");
            return await _usuarioRepo.BuscarPorIdentityId(id);
        }
        public async Task<Result<string>> EditarPersonal(PersonalDTO dto)
        {
            try
            {
                await _unitOfWork.BeginTransactionAsync();

                var usuario = await _usuarioRepo.BuscarPorIdentityId(dto.IdentityUserId);
                if (usuario == null)
                    throw new ApplicationException("Usuario no encontrado");

                usuario.SetNombre(dto.Nombre);
                usuario.SetApellidoPaterno(dto.ApellidoPaterno);
                usuario.SetApellidoMaterno(dto.ApellidoMaterno);

                var cambios = await _unitOfWork.SaveChangesAsync();
                await _unitOfWork.CommitTransactionAsync();

                return cambios > 0
                    ? Result<string>.Success("Usuario actualizado con éxito")
                    : Result<string>.Success("No se detectaron cambios para guardar");
            }
            catch (Exception)
            {
                await _unitOfWork.RollbackTransactionAsync();
                throw;
            }
        }
        public async Task<Result<string>> EditarAlumno(AlumnoDTO dto)
        {
            try
            {
                await _unitOfWork.BeginTransactionAsync();
                var alumno = await _usuarioRepo.BuscarAlumnoPorBoleta(dto.NumeroBoleta);
                if (alumno != null && (alumno.IdentityUserId != dto.IdentityUserId))
                    throw new ApplicationException("El número de boleta ya existe");

                alumno.SetNombre(dto.Nombre);
                alumno.SetApellidoPaterno(dto.ApellidoPaterno);
                alumno.SetApellidoMaterno(dto.ApellidoMaterno);
                alumno.SetNumeroBoleta(dto.NumeroBoleta);
                alumno.SetPeriodoIngreso(dto.PeriodoIngreso);
                alumno.SetCarrera(dto.CarreraId);

                var cambios = await _unitOfWork.SaveChangesAsync();
                await _unitOfWork.CommitTransactionAsync();
                if (cambios < 0)
                    Result<string>.Success("No se detectaron cambios para guardar");

                //var identityUser = await _userManager.FindByIdAsync(dto.IdentityUserId);
                //var envio = await _emailSender.SendEmailAsync(
                //    identityUser.Email,
                //    "Actualizamos tu información",
                //    HtmlTemplates.ActualizamosTuInformacion()
                //    );
                return Result<string>.Success("Usuario actualizado con éxito");
            }
            catch (Exception)
            {
                await _unitOfWork.RollbackTransactionAsync();
                throw;
            }
        }
        public async Task<PersonalDTO?> BuscarPersonal(string id)
        {
            var personal = await _usuarioRepo.BuscarPorIdentityId(id);

            if (personal == null)
                return null;

            return new PersonalDTO
            {
                IdentityUserId = id,
                Nombre = personal.Nombre,
                ApellidoPaterno = personal.ApellidoPaterno,
                ApellidoMaterno = personal.ApellidoMaterno
            };
        }
    }
}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Domain\DomainException.cs ---
namespace PortalCOSIE.Domain
{
    public class DomainException : Exception
    {
        public DomainException(string message) : base(message) { }
    }
}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Domain\PortalCOSIE.Domain.csproj ---
<Project Sdk="Microsoft.NET.Sdk">

  <PropertyGroup>
    <TargetFramework>net8.0</TargetFramework>
    <ImplicitUsings>enable</ImplicitUsings>
    <Nullable>enable</Nullable>
  </PropertyGroup>

</Project>



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Domain\Result.cs ---

namespace PortalCOSIE.Domain
{
    public class Result<T>
    {
        public bool Succeeded { get; private set; }
        public T? Value { get; private set; }
        public List<string> Errors { get; private set; } = new();

        private Result() { }

        public static Result<T> Success(T value)
        {
            return new Result<T> { Succeeded = true, Value = value };
        }

        public static Result<T> Failure(params string[] errors)
        {
            return new Result<T> { Succeeded = false, Errors = errors.ToList() };
        }

        public static Result<T> Failure(IEnumerable<string> errors)
        {
            return new Result<T> { Succeeded = false, Errors = errors.ToList() };
        }
    }

}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Domain\Entities\BaseEntity.cs ---
namespace PortalCOSIE.Domain.Entities
{
    /// <summary>
    /// Clase base abstracta para todas las entidades del dominio.
    /// Define un identificador genérico y soporte para eliminación lógica (soft delete).
    /// </summary>
    public abstract class BaseEntity
    {
        /// <summary>
        /// Identificador único de la entidad.
        /// </summary>
        public int Id { get; protected set; }

        /// <summary>
        /// Indica si la entidad está marcada como eliminada lógicamente.
        /// </summary>
        public bool IsDeleted { get; private set; }

        /// <summary>
        /// Marca la entidad como eliminada lógicamente.
        /// </summary>
        public void SoftDelete()
        {
            if (IsDeleted)
                throw new DomainException("La entidad ya ha sido desactivada.");
            IsDeleted = true;
        }

        /// <summary>
        /// Restaura una entidad eliminada lógicamente.
        /// </summary>
        public void Restore()
        {
            if (!IsDeleted)
                throw new DomainException("La entidad ya está activa.");
            IsDeleted = false;
        }
    }
}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Domain\Entities\Bitacoras\EntradaBitacora.cs ---
namespace PortalCOSIE.Domain.Entities.Bitacoras
{
    public class EntradaBitacora : BaseEntity
    {
        public string Accion { get; private set; }
        public string Entidad { get; private set; }
        public string EntidadId { get; private set; }
        public string? ValorNuevo { get; private set; }
        public string? IdentityUserId { get; private set; }        
        public string? IpAddress { get; private set; }
        public string? UserAgent { get; private set; }
        public DateTime FechaRegistro { get; private set; }

        private EntradaBitacora() { }

        //Para crear registros
        public EntradaBitacora(string accion, string entidad, string entidadId, string valorNuevo, string identityUserId, string ipAddress, string userAgent)
        {
            Accion = accion;
            Entidad = entidad;
            EntidadId = entidadId;
            ValorNuevo = valorNuevo;
            IdentityUserId = identityUserId;
            IpAddress = ipAddress;
            UserAgent = userAgent;
            FechaRegistro = DateTime.Now;
        }


        public EntradaBitacora(int id, string accion, string entidad, string entidadId, string valorNuevo,
            string identityUserId, string ipAddress, string userAgent, DateTime fechaRegistro)
        {
            Id = id;
            Accion = accion;
            Entidad = entidad;
            EntidadId = entidadId;
            ValorNuevo = valorNuevo;
            IdentityUserId = identityUserId;
            IpAddress = ipAddress;
            UserAgent = userAgent;
            FechaRegistro = fechaRegistro;
        }
    }
}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Domain\Entities\Bitacoras\IBitacoraRepository.cs ---
namespace PortalCOSIE.Domain.Entities.Bitacoras
{
    public interface IBitacoraRepository
    {
        Task<IEnumerable<EntradaBitacora>> ListarConCorreo();
    }
}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Domain\Entities\Calendario\FechaRecepcion.cs ---
namespace PortalCOSIE.Domain.Entities.Calendario
{
    public class FechaRecepcion : BaseEntity
    {
        public int SesionId { get; private set; }
        public DateTime Fecha { get; private set; }

        // Navegación EF CORE
        public SesionCOSIE Sesion { get; private set; }

        protected FechaRecepcion() { }

        public FechaRecepcion(DateTime fecha)
        {
            Fecha = fecha;
        }
    }
}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Domain\Entities\Calendario\ISesionRepository.cs ---
using PortalCOSIE.Domain.Interfaces;

namespace PortalCOSIE.Domain.Entities.Calendario
{
    public interface ISesionRepository : IBaseRepository<SesionCOSIE>
    {
        Task<SesionCOSIE?> ObtenerConFechasRecepcion(int id);
        Task<IEnumerable<SesionCOSIE>> ListarSesiones(bool filtrarActivos);
    }
}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Domain\Entities\Calendario\PeriodoConfig.cs ---
namespace PortalCOSIE.Domain.Entities.Calendario
{
    public class PeriodoConfig : BaseEntity
    {
        public int AnioInicio { get; private set; }
        public int PeriodoInicio { get; private set; }
        public int AnioFin { get; private set; }
        public int PeriodoFin { get; private set; }

        // Constructor protegido para EF
        protected PeriodoConfig() { }

        // Constructor principal
        public PeriodoConfig(int anioInicio, int periodoInicio, int anioFin, int periodoFin)
        {
            SetAnioInicio(anioInicio);
            SetPeriodoInicio(periodoInicio);
            SetAnioInicio(anioInicio);
            SetPeriodoFin(periodoFin);
        }

        public void SetAnioInicio(int anioInicio)
        {
            if (anioInicio < 1995 || anioInicio > 2100)
                throw new DomainException("El año de inicio debe estar entre 1995 y 2100.");
            AnioInicio = anioInicio;
        }
        
        public void SetPeriodoInicio(int inicio)
        {
            if (inicio < 0 || inicio > 2)
                throw new DomainException("Periodo de inicio debe estar entre 1 y 2.");
            PeriodoInicio = inicio;
        }

        public void SetAnioFin(int anioFin)
        {
            if (anioFin < 1995 || anioFin > 2100)
                throw new DomainException("El año de fin debe estar entre 1995 y 2100.");
            AnioFin = anioFin;
        }

        public void SetPeriodoFin(int fin)
        {
            if (fin < 0 || fin > 2)
                throw new DomainException("Periodo de inicio debe estar entre 1 y 2.");
            PeriodoFin = fin;
        }
    }
}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Domain\Entities\Calendario\SesionCOSIE.cs ---
namespace PortalCOSIE.Domain.Entities.Calendario
{
    public class SesionCOSIE : BaseEntity
    {
        public string NumeroSesion { get; private set; }
        private readonly List<FechaRecepcion> _fechasRecepcion = new();
        public DateTime? FechaSesion { get; private set; }

        // Navegación
        public IReadOnlyCollection<FechaRecepcion> FechasRecepcion => _fechasRecepcion.AsReadOnly();

        // Constructor requerido por EF Core
        protected SesionCOSIE() { }

        // Constructor principal para crear nuevas sesiones
        public SesionCOSIE(string orden, DateTime fechaSesion)
        {
            SetNumeroSesion(orden);
            SetFechaSesion(fechaSesion);
            //SetFechasRecepcion(fechasRecepcion);
        }

        // Métodos para modificar el estado (Domain-Driven Design)
        public void SetNumeroSesion(string orden)
        {
            if (string.IsNullOrWhiteSpace(orden))
                throw new DomainException("El numero de sesion no puede estar vacío");
            NumeroSesion = orden.Trim();
        }

        public void SetFechaSesion(DateTime fechaSesion)
        {
            if (fechaSesion == DateTime.MinValue || fechaSesion == DateTime.MaxValue)
                throw new DomainException("La fecha de sesión no es válida");
            FechaSesion = fechaSesion;
        }

        // Métodos para manejar la colección de FechaRecepcion
        public void SetFechasRecepcion(List<DateTime> fechasRecepcion)
        {
            // Validar que las fechas sean anteriores a la fecha de sesión
            if (FechaSesion.HasValue)
            {
                foreach (var fecha in fechasRecepcion)
                {
                    if (fecha >= FechaSesion.Value)
                        throw new DomainException($"La fecha de recepción {fecha:dd/MM/yyyy} debe ser anterior a la fecha de sesión");
                }
            }

            // Limpiar fechas existentes si las hay
            _fechasRecepcion.Clear();

            // Crear y agregar las nuevas fechas
            foreach (var fecha in fechasRecepcion.Distinct().OrderBy(f => f))
            {
                var fechaRecepcion = new FechaRecepcion(fecha);
                _fechasRecepcion.Add(fechaRecepcion);
            }
        }

        public void RemoverFechasRecepcion(FechaRecepcion fechaRecepcion)
        {
            if (fechaRecepcion == null)
                throw new DomainException("No se enviaron fechas a remover");
            _fechasRecepcion.Remove(fechaRecepcion);
        }
    }
}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Domain\Entities\Carreras\Carrera.cs ---
using PortalCOSIE.Domain.Enums;
using System.Text.RegularExpressions;

namespace PortalCOSIE.Domain.Entities.Carreras
{
    public class Carrera : BaseEntity
    {
        public string Nombre { get; private set; } = string.Empty;
        private readonly List<UnidadAprendizaje> _unidadesAprendizaje = new();

        private const int LongitudMaxima = 100;
        private static readonly Regex SoloLetras =
            new Regex(@"^[a-zA-ZáéíóúÁÉÍÓÚñÑ\s\-\(\)]+$", RegexOptions.Compiled);

        public IReadOnlyCollection<UnidadAprendizaje> UnidadesAprendizaje => _unidadesAprendizaje.AsReadOnly();
        private Carrera() { }

        public Carrera(string nombre)
        {
            ActualizarNombre(nombre);
        }

        public void ActualizarNombre(string nombre)
        {
            if (string.IsNullOrWhiteSpace(nombre))
                throw new DomainException("El nombre no puede estar vacío.");
            nombre = nombre.Trim();
            if (!SoloLetras.IsMatch(nombre))
                throw new DomainException("El nombre solo puede contener letras y espacios.");
            if (nombre.Length > LongitudMaxima)
                throw new DomainException($"El nombre no puede tener más de {LongitudMaxima} caracteres.");
            Nombre = nombre;
        }

        public void AgregarUnidad(string nombre, Semestre semestre)
        {
            if (_unidadesAprendizaje.Any(u => u.Nombre.Equals(nombre, StringComparison.OrdinalIgnoreCase)))
                throw new DomainException($"Ya existe una unidad con el nombre '{nombre}'.");

            var unidad = new UnidadAprendizaje(nombre, Id, semestre);
            _unidadesAprendizaje.Add(unidad);
        }

        //public void RemoverUnidad(int id)
        //{
        //    var unidad = _unidadesAprendizaje.FirstOrDefault(u => u.Id == id)
        //    ?? throw new DomainException("Unidad no encontrada.");
        //    _unidadesAprendizaje.Remove(unidad);
        //}
    }
}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Domain\Entities\Carreras\ICarreraRepository.cs ---
using PortalCOSIE.Domain.Interfaces;

namespace PortalCOSIE.Domain.Entities.Carreras
{
    public interface ICarreraRepository : IBaseRepository<Carrera>
    {
        Task<Carrera> ObtenerCarreraConUnidadesAsync(string carrera);
        Task<IEnumerable<UnidadAprendizaje>> ListarUnidadesPorCarreraAsync(string carrera);
    }
}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Domain\Entities\Carreras\UnidadAprendizaje.cs ---
using PortalCOSIE.Domain.Enums;

namespace PortalCOSIE.Domain.Entities.Carreras
{
    public class UnidadAprendizaje : BaseEntity
    {
        public string Nombre { get; private set; }
        public int CarreraId { get; private set; }
        public Semestre Semestre { get; private set; }

        // Navegación
        public Carrera Carrera { get; private set; } = null!;

        // Constructor EF
        protected UnidadAprendizaje() { }

        // Constructor de dominio
        public UnidadAprendizaje(string nombre, int carreraId, Semestre semestre)
        {
            SetNombre(nombre);
            SetCarreraId(carreraId);
            SetSemestre(semestre);
        }

        public void SetNombre(string nombre)
        {
            if (string.IsNullOrWhiteSpace(nombre))
                throw new ArgumentException("El nombre de la unidad de aprendizaje no puede estar vacío.", nameof(nombre));
            Nombre = nombre.Trim();
        }

        private void SetCarreraId(int carreraId)
        {
            if (carreraId <= 0)
                throw new ArgumentException("El ID de la carrera debe ser válido.", nameof(carreraId));
            CarreraId = carreraId;
        }

        public void SetSemestre(Semestre semestre)
        {
            if (!Enum.IsDefined(typeof(Semestre), semestre))
                throw new ArgumentException("El semestre especificado no es válido.", nameof(semestre));
            Semestre = semestre;
        }
    }
}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Domain\Entities\Documentos\Documento.cs ---
using PortalCOSIE.Domain.Entities.Tramites;

namespace PortalCOSIE.Domain.Entities.Documentos
{
    public class Documento : BaseEntity
    {
        public string Nombre { get; private set; }
        public string Observaciones { get; private set; } = string.Empty;
        public int TramiteId { get; private set; }
        public int EstadoDocumentoId { get; private set; }
        public byte[] Contenido { get; private set; }

        // Propiedades de navegación
        public EstadoDocumento EstadoDocumento { get; private set; }
        public Tramite Tramite { get; private set; }

        // Constructor privado para EF Core
        private Documento() { }

        public Documento(
            string nombre,
            int tramiteId,
            int estadoDocumentoId,
            byte[] contenido,
            string observaciones = "")
        {
            SetNombre(nombre);
            SetObservaciones(observaciones);
            TramiteId = tramiteId;
            EstadoDocumentoId = estadoDocumentoId;
            Contenido = contenido;
        }

        public void SetNombre(string nombre)
        {
            if (string.IsNullOrWhiteSpace(nombre))
                throw new DomainException("El nombre del documento no puede estar vacío.");
            nombre = nombre?.Trim() ?? string.Empty;
            if (nombre.Length > 100)
                throw new DomainException("El nombre del documento no puede exceder 100 caracteres.");
            Nombre = nombre;
        }

        public void SetObservaciones(string observaciones)
        {
            observaciones = observaciones?.Trim() ?? string.Empty;
            if (observaciones.Length > 1000)
                throw new DomainException("Las observaciones no pueden exceder 1000 caracteres.");
            Observaciones = observaciones;
        }

        public void SetEstado(EstadoDocumento nuevoEstado)
        {
            if (nuevoEstado == null)
                throw new DomainException("El estado del documento no puede ser nulo.");
            EstadoDocumentoId = nuevoEstado.Id;
        }

        public void SetContenido(byte[] contenido)
        {
            Contenido = contenido;
        }
    }
}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Domain\Entities\Documentos\EstadoDocumento.cs ---
using PortalCOSIE.Domain.Common;

namespace PortalCOSIE.Domain.Entities.Documentos
{
    public class EstadoDocumento : Enumeration
    {
        public static readonly EstadoDocumento EnRevision = new(1, "En Revisión");
        public static readonly EstadoDocumento Validado = new(2, "Validado");
        public static readonly EstadoDocumento ConErrores = new(3, "Con errores");
        public static readonly EstadoDocumento Incorrecto = new(4, "Documento incorrecto");

        private EstadoDocumento(int id, string nombre)
            : base(id, nombre) { }

        // Lógica adicional opcional
        public bool PermiteEdicion() =>
            this == ConErrores || this == Incorrecto;
    }
}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Domain\Entities\Tramites\DetalleCTCE.cs ---
namespace PortalCOSIE.Domain.Entities.Tramites
{
    public class DetalleCTCE : Tramite
    {
        public string Situacion { get; private set; }
        public bool TieneDictamenesAnteriores { get; private set; }

        // Privada mutable y una expuesta como solo lectura
        private readonly List<UnidadReprobada> _unidadesReprobadas = new();
        public IReadOnlyCollection<UnidadReprobada> UnidadesReprobadas => _unidadesReprobadas.AsReadOnly();

        private DetalleCTCE() { }

        public DetalleCTCE(int alumnoId, int tipoId, string situacion, bool tieneDictamenesAnteriores, List<UnidadReprobada> unidadesReprobadas)
            : base(alumnoId, tipoId)
        {
            SetSituacion(situacion);
            TieneDictamenesAnteriores = tieneDictamenesAnteriores;

            if (unidadesReprobadas != null)
                _unidadesReprobadas.AddRange(unidadesReprobadas);
        }

        public void SetSituacion(string situacion)
        {
            if (string.IsNullOrWhiteSpace(situacion))
                throw new DomainException("El motivo de solicitud no puede estar vacío.");
            if(situacion.Length > 1000)
                throw new DomainException("El motivo de solicitud no puede exceder los 1000 caracteres.");
            Situacion = situacion;
        }
        public void AgregarUnidadReprobada(UnidadReprobada unidad)
        {
            if (unidad == null)
                throw new ArgumentNullException(nameof(unidad));

            _unidadesReprobadas.Add(unidad);
        }
    }
}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Domain\Entities\Tramites\EstadoTramite.cs ---
using PortalCOSIE.Domain.Common;

namespace PortalCOSIE.Domain.Entities.Tramites
{
    public class EstadoTramite : Enumeration
    {
        public static readonly EstadoTramite Solicitado = new(1, "Solicitado");
        public static readonly EstadoTramite EnRevision = new(2, "En revision");
        public static readonly EstadoTramite DocumentosPendientes = new(3, "Documentos pendientes");
        public static readonly EstadoTramite Concluido = new(4, "Concluido");
        public static readonly EstadoTramite Cancelado = new(5, "Cancelado");

        private EstadoTramite(int id, string nombre) : base(id, nombre)
        {
        }

        // Ejemplo de lógica de dominio
        public bool PermiteEdicion() =>
            this == Solicitado || this == EnRevision;
    }
}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Domain\Entities\Tramites\IDocumentoRepository.cs ---
using PortalCOSIE.Domain.Entities.Documentos;

namespace PortalCOSIE.Domain.Entities.Tramites
{
    public interface IDocumentoRepository
    {
        Task SubirArchivoAsync(Documento documento, Stream contenido);
    }
}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Domain\Entities\Tramites\ITramiteRepository.cs ---
using PortalCOSIE.Domain.Interfaces;

namespace PortalCOSIE.Domain.Entities.Tramites
{
    public interface ITramiteRepository : IBaseRepository<Tramite>
    {
        Task<IEnumerable<Tramite>> ListarConDatosCompletos();
    }
}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Domain\Entities\Tramites\TipoTramite.cs ---
using PortalCOSIE.Domain.Common;

namespace PortalCOSIE.Domain.Entities.Tramites
{
    public class TipoTramite : Enumeration
    {
        public static readonly TipoTramite DictamenInterno = new(1, "Dictamen interno (CTCE)");
        public static readonly TipoTramite DictamenExterno = new(2, "Dictamen externo (CGC)");

        private TipoTramite(int id, string nombre) : base(id, nombre)
        {
        }
    }
}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Domain\Entities\Tramites\Tramite.cs ---
using PortalCOSIE.Domain.Entities.Documentos;
using PortalCOSIE.Domain.Entities.Usuarios;

namespace PortalCOSIE.Domain.Entities.Tramites
{
    public abstract class Tramite : BaseEntity
    {
        public int EstadoTramiteId { get; private set; }
        public int AlumnoId { get; private set; }
        public int? PersonalId { get; private set; }
        public int TipoTramiteId { get; private set; }
        
        public DateTime FechaSolicitud { get; private set; }
        public DateTime? FechaConclusion { get; private set; }

        // Propiedades de navegación
        public EstadoTramite EstadoTramite { get; private set; }
        public TipoTramite TipoTramite { get; private set; }
        public Alumno Alumno { get; private set; }
        public Personal Personal { get; private set; }

        private readonly List<Documento> _documentos = new();
        public IReadOnlyCollection<Documento> Documentos => _documentos.AsReadOnly();

        // Constructor privado (EF Core)
        protected Tramite() { }

        // Constructor de dominio
        protected Tramite(int alumnoId, int tipoId)
        {
            if (alumnoId <= 0) throw new DomainException("El AlumnoId debe ser válido.");
            if (tipoId <= 0)
                throw new DomainException("El TipoId debe ser válido.");
            
            AlumnoId = alumnoId;
            TipoTramiteId = tipoId;
            EstadoTramiteId = EstadoTramite.Solicitado.Id; // podria usar enum: EstadosTramite.Solicitado
            FechaSolicitud = DateTime.UtcNow;
        }

        public void AsignarPersonal(int personalId)
        {
            if (personalId <= 0) throw new DomainException("Personal inválido.");
            PersonalId = personalId;
            EstadoTramiteId = 2;
        }

        public void AgregarDocumento(Documento documento)
        {
            if (documento == null)
                throw new DomainException("El documento no puede ser nulo.");
            _documentos.Add(documento);
        }

        /// <summary>
        /// Cambia el estado del trámite (por ejemplo: En Proceso → Concluido)
        /// </summary>
        public void CambiarEstado(EstadoTramite nuevoEstado)
        {
            if (nuevoEstado == null)
                throw new DomainException("El nuevo estado no puede ser nulo.");

            EstadoTramite = nuevoEstado;
            EstadoTramiteId = nuevoEstado.Id;
        }

        /// <summary>
        /// Marca el trámite como concluido.
        /// </summary>
        public void Concluir()
        {
            if (FechaConclusion != null)
                throw new DomainException("El trámite ya fue concluido.");

            FechaConclusion = DateTime.UtcNow;
        }
    }
}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Domain\Entities\Tramites\UnidadReprobada.cs ---
using PortalCOSIE.Domain.Entities.Carreras;

namespace PortalCOSIE.Domain.Entities.Tramites
{
    public class UnidadReprobada : BaseEntity
    {
        public int DetalleCTCEId { get; set; }
        public int UnidadAprendizajeId { get; set; }
        public string PeriodoCurso { get; set; }
        public string PeriodoRecurse { get; set; }

        // Navegación (EF Core)
        public DetalleCTCE DetalleCTCE { get; private set; }
        public UnidadAprendizaje UnidadAprendizaje { get; private set; }

        // Constructor para EF Core
        private UnidadReprobada() { }

        // Constructor público para tu lógica de negocio
        public UnidadReprobada(int unidadId, string periodoCurso, string periodoRecurse)
        {
            if (unidadId <= 0) throw new ArgumentException("ID de unidad inválido");
            if (string.IsNullOrEmpty(periodoCurso)) throw new ArgumentException("El periodo de cursado es requerido");

            UnidadAprendizajeId = unidadId;
            PeriodoCurso = periodoCurso;
            PeriodoRecurse = periodoRecurse ?? string.Empty; // Puede ser opcional dependiendo de tu regla
        }
    }
}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Domain\Entities\Usuarios\Alumno.cs ---
using PortalCOSIE.Domain.Entities.Carreras;
using System.Text.RegularExpressions;

namespace PortalCOSIE.Domain.Entities.Usuarios
{
    public class Alumno : Usuario
    {
        // Propiedades
        public string NumeroBoleta { get; private set; }
        public string PeriodoIngreso { get; private set; }
        public int CarreraId { get; private set; }

        // Navegaciones
        public Carrera Carrera { get; private set; }
        //public Usuario Usuario { get; private set; }

        // Constantes de validación
        private static readonly Regex SoloNumeros10 = new(@"^\d{10}$", RegexOptions.Compiled);
        private const string FormatoPeriodo = @"^\d{4}/[1-3]$"; // YYYY-P (ej: 2024/1)

        // Constructor privado para EF
        private Alumno() { }

        // Constructor de dominio
        public Alumno(
            string userId,
            string nombre,
            string apellidoPaterno,
            string apellidoMaterno,
            string numeroBoleta,
            string periodoIngreso,
            int carreraId)
            : base(userId, nombre, apellidoPaterno, apellidoMaterno)

        {
            SetNumeroBoleta(numeroBoleta);
            SetPeriodoIngreso(periodoIngreso);
            SetCarrera(carreraId);
        }

        public void SetNumeroBoleta(string numeroBoleta)
        {
            if (string.IsNullOrWhiteSpace(numeroBoleta))
                throw new DomainException("El número de boleta no puede estar vacío.");
            if (!SoloNumeros10.IsMatch(numeroBoleta))
                throw new DomainException("La boleta debe tener exactamente 10 dígitos numéricos.");
            var año = int.Parse(numeroBoleta[..4]);
            if (año < 1995 || año > 2100)
                throw new DomainException("El año en la boleta debe estar entre 1995 y 2100.");
            NumeroBoleta = numeroBoleta;
        }

        public void SetPeriodoIngreso(string periodoIngreso)
        {
            periodoIngreso = periodoIngreso.Trim();
            if (string.IsNullOrWhiteSpace(periodoIngreso))
                throw new DomainException("El periodo de ingreso es requerido");
            if (!Regex.IsMatch(periodoIngreso, FormatoPeriodo))
                throw new DomainException("El formato del periodo de ingreso no es válido. Use: YYYY/P (ej: 2020/1)");
            PeriodoIngreso = periodoIngreso;
        }

        public void SetCarrera(int carreraId)
        {
            if (carreraId <= 0)
                throw new DomainException("El ID de carrera no es válido");
            CarreraId = carreraId;
        }
    }
}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Domain\Entities\Usuarios\IUsuarioRepository.cs ---
using PortalCOSIE.Domain.Interfaces;

namespace PortalCOSIE.Domain.Entities.Usuarios
{
    public interface IUsuarioRepository : IBaseRepository<Usuario>
    {
        Task<Usuario> BuscarPorIdentityId(string identityUserId);
        Task<Alumno> BuscarAlumnoConCarrera(string identityUserId);
        Task<Alumno> BuscarAlumnoPorBoleta(string boleta);
        Task<IEnumerable<Alumno>> ListarAlumnoConCarrera();
        Task<IEnumerable<Personal>> ListarConPersonal();
    }
}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Domain\Entities\Usuarios\Personal.cs ---
namespace PortalCOSIE.Domain.Entities.Usuarios
{
    public class Personal : Usuario
    {
        public string IdPersonal { get; private set; } = string.Empty;
        public string Area { get; private set; } = string.Empty;

        // Navegación
        public Usuario Usuario { get; private set; } = null!;

        // Constructor protegido para EF
        private Personal() { }

        // Constructor de dominio
        public Personal(
            string userId,
            string idPersonal,
            string nombre,
            string apellidoPaterno,
            string apellidoMaterno,
            string area)
            : base(userId, nombre, apellidoPaterno, apellidoMaterno)
        {
            SetIdPersonal(idPersonal);
            SetArea(area);
        }

        public void SetIdPersonal(string idPersonal)
        {
            idPersonal = idPersonal?.Trim() ?? string.Empty;
            if (string.IsNullOrWhiteSpace(idPersonal))
                throw new DomainException("El identificador del personal no puede estar vacío.");
            if (idPersonal.Length > 50)
                throw new DomainException("El identificador del personal no puede tener más de 50 caracteres.");
            IdPersonal = idPersonal;
        }

        public void SetArea(string area)
        {
            area = area?.Trim() ?? string.Empty;
            if (string.IsNullOrWhiteSpace(area))
                throw new DomainException("El area del personal no puede estar vacía.");
            if (area.Length > 100)
                throw new DomainException("El area del personal no puede tener más de 100 caracteres.");
            IdPersonal = area;
        }
    }
}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Domain\Entities\Usuarios\Usuario.cs ---
using System.Text.RegularExpressions;

namespace PortalCOSIE.Domain.Entities.Usuarios
{
    public abstract class Usuario : BaseEntity
    {
        public string IdentityUserId { get; private set; }
        public string Nombre { get; private set; }
        public string ApellidoPaterno { get; private set; }
        public string ApellidoMaterno { get; private set; }

        // Constantes de validación
        private const int LongitudMaxima = 100;
        private static readonly Regex SoloLetras =
            new Regex(@"^[a-zA-ZáéíóúÁÉÍÓÚñÑ\s\-\(\)]+$", RegexOptions.Compiled);

        // Constructor privado para EF
        protected Usuario() { }

        protected Usuario(string identityUserId, string nombre, string apellidoPaterno, string apellidoMaterno)
        {
            SetIdentityUserId(identityUserId);
            SetNombre(nombre);
            SetApellidoPaterno(apellidoPaterno);
            SetApellidoMaterno(apellidoMaterno);
        }

        public void SetIdentityUserId(string identityUserId)
        {
            if (string.IsNullOrWhiteSpace(identityUserId))
                throw new DomainException("El identificador de usuario no puede estar vacío.");
            IdentityUserId = identityUserId.Trim();
        }

        public void SetNombre(string nombre)
        {
            ValidarTexto(nombre, nameof(Nombre));
            Nombre = nombre;
        }

        public void SetApellidoPaterno(string apellido)
        {
            ValidarTexto(apellido, nameof(ApellidoPaterno));
            ApellidoPaterno = apellido;
        }

        public void SetApellidoMaterno(string apellido)
        {
            ValidarTexto(apellido, nameof(ApellidoMaterno));
            ApellidoMaterno = apellido;
        }

        // Método privado reutilizable
        private static void ValidarTexto(string valor, string campo)
        {
            if (string.IsNullOrWhiteSpace(valor))
                throw new DomainException($"El campo '{campo}' no puede estar vacío.");
            valor = valor?.Trim() ?? string.Empty;
            if (!SoloLetras.IsMatch(valor))
                throw new DomainException($"El campo '{campo}' solo puede contener letras, espacios o guiones.");
            if (valor.Length > LongitudMaxima)
                throw new DomainException($"El campo '{campo}' no puede exceder los {LongitudMaxima} caracteres.");
        }

        public string NombreCompleto()
        {
            return $"{Nombre} {ApellidoPaterno} {ApellidoMaterno}".Trim();
        }
    }
}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Domain\Enums\Enumeration.cs ---
using PortalCOSIE.Domain.Entities;
using System.Reflection;

namespace PortalCOSIE.Domain.Common
{
    public abstract class Enumeration : BaseEntity, IComparable
    {
        public string Nombre { get; protected set; }

        protected Enumeration(int id, string nombre)
        {
            Id = id;
            Nombre = nombre;
        }

        public override string ToString() => Nombre;

        public override bool Equals(object obj)
        {
            if (obj is not Enumeration other)
                return false;

            return Id == other.Id && GetType() == other.GetType();
        }

        public override int GetHashCode() => Id.GetHashCode();

        public int CompareTo(object other) => Id.CompareTo(((Enumeration)other).Id);

        public static IEnumerable<T> GetAll<T>() where T : Enumeration
        {
            return typeof(T)
                .GetFields(BindingFlags.Public | BindingFlags.Static | BindingFlags.DeclaredOnly)
                .Where(f => f.FieldType == typeof(T))
                .Select(f => f.GetValue(null))
                .Cast<T>();
        }

        public static T FromValue<T>(int id) where T : Enumeration
        {
            return GetAll<T>().First(x => x.Id == id);
        }
    }
}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Domain\Enums\Semestre.cs ---
namespace PortalCOSIE.Domain.Enums
{
    public enum Semestre
    {
        PRIMERO = 1,
        SEGUNDO = 2,
        TERCERO = 3,
        CUARTO = 4,
        QUINTO = 5
        //SEXTO = 6,
        //SEPTIMO = 7,
        //OCTAVO = 8,
        //NOVENO = 9,
        //DECIMO = 10
    }
}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Domain\Interfaces\IBaseRepository.cs ---
using PortalCOSIE.Domain.Entities;

namespace PortalCOSIE.Domain.Interfaces
{
    /// <summary>
    /// Define un repositorio generico para manejar entidades del tipo <typeparamref name="TEntity"/>.
    /// </summary>
    /// <remarks>Esta interfaz proporciona operaciones comunes para trabajar con entidades
    /// Está diseñada para abstraer el mecanismo subyacente de acceso a datos,
    /// permitiendo una implementación flexible.</remarks>
    /// <typeparam name="TEntity">El tipo de entidad gestionada por el repositorio. Debe ser un tipo de referencia.</typeparam>
    public interface IBaseRepository<TEntity> where TEntity : BaseEntity
    {
        Task<TEntity> GetByIdAsync(int id);
        Task<IEnumerable<TEntity>> GetAllAsync(bool filtrarActivos);
        Task<TEntity> AddAsync(TEntity entity);
        TEntity Delete(TEntity entity);
    }
}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Domain\Interfaces\IUnitOfWork.cs ---
namespace PortalCOSIE.Domain.Interfaces
{
    public interface IUnitOfWork : IDisposable
    {
        Task<int> SaveChangesAsync(CancellationToken cancellationToken = default);
        Task BeginTransactionAsync();
        Task CommitTransactionAsync();
        Task RollbackTransactionAsync();
    }
}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Infrastructure\PortalCOSIE.Infrastructure.csproj ---
<Project Sdk="Microsoft.NET.Sdk">

  <PropertyGroup>
    <TargetFramework>net8.0</TargetFramework>
    <ImplicitUsings>enable</ImplicitUsings>
    <Nullable>enable</Nullable>
  </PropertyGroup>

  <ItemGroup>
    <PackageReference Include="Microsoft.AspNetCore.Http" Version="2.3.0" />
    <PackageReference Include="Microsoft.AspNetCore.Identity" Version="2.3.1" />
    <PackageReference Include="Microsoft.AspNetCore.Identity.EntityFrameworkCore" Version="8.0.7" />
    <PackageReference Include="Microsoft.EntityFrameworkCore" Version="9.0.6" />
    <PackageReference Include="Microsoft.EntityFrameworkCore.SqlServer" Version="9.0.6" />
    <PackageReference Include="Microsoft.EntityFrameworkCore.Tools" Version="9.0.6">
      <PrivateAssets>all</PrivateAssets>
      <IncludeAssets>runtime; build; native; contentfiles; analyzers; buildtransitive</IncludeAssets>
    </PackageReference>
  </ItemGroup>

  <ItemGroup>
    <ProjectReference Include="..\PortalCOSIE.Application\PortalCOSIE.Application.csproj" />
    <ProjectReference Include="..\PortalCOSIE.Domain\PortalCOSIE.Domain.csproj" />
  </ItemGroup>

  <ItemGroup>
    <Folder Include="Migrations\" />
  </ItemGroup>

</Project>



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Infrastructure\Data\AppDbContext.cs ---
using Microsoft.AspNetCore.Identity;
using Microsoft.AspNetCore.Identity.EntityFrameworkCore;
using Microsoft.EntityFrameworkCore;

namespace PortalCOSIE.Infrastructure.Data
{
    public class AppDbContext : IdentityDbContext<IdentityUser, IdentityRole, string>
    {
        public AppDbContext(DbContextOptions<AppDbContext> options)
        : base(options)
        {
        }

        protected override void OnModelCreating(ModelBuilder modelBuilder)
        {
            base.OnModelCreating(modelBuilder);
            modelBuilder.ApplyConfigurationsFromAssembly(typeof(AppDbContext).Assembly);
        }
    }
}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Infrastructure\Data\AuditInterceptor.cs ---
using Microsoft.AspNetCore.Http;
using Microsoft.EntityFrameworkCore;
using Microsoft.EntityFrameworkCore.ChangeTracking;
using Microsoft.EntityFrameworkCore.Diagnostics;
using PortalCOSIE.Domain.Entities.Bitacoras;
using System.Security.Claims;
using System.Text.Json;

namespace PortalCOSIE.Infrastructure.Data
{
    public class AuditInterceptor : SaveChangesInterceptor
    {
        private readonly IHttpContextAccessor _httpContextAccessor;

        public AuditInterceptor(IHttpContextAccessor httpContextAccessor)
        {
            _httpContextAccessor = httpContextAccessor;
        }

        public override ValueTask<InterceptionResult<int>> SavingChangesAsync(
            DbContextEventData eventData,
            InterceptionResult<int> result,
            CancellationToken cancellationToken = default)
        {
            if (eventData.Context != null)
            {
                AuditarCambios(eventData.Context);
            }

            return base.SavingChangesAsync(eventData, result, cancellationToken);
        }

        private void AuditarCambios(DbContext context)
        {
            var httpContext = _httpContextAccessor.HttpContext;
            if (httpContext == null)
                return;
            var userId = httpContext?.User?.FindFirstValue(ClaimTypes.NameIdentifier);
            var ipAddress = httpContext?.Connection?.RemoteIpAddress?.ToString() ?? "N/A";
            var userAgent = httpContext?.Request?.Headers["User-Agent"].ToString() ?? "N/A";

            var entradas = context.ChangeTracker.Entries()
                    .Where(e => e.Entity is not EntradaBitacora && // No auditar la bitácora misma
                               e.State != EntityState.Unchanged &&
                               e.State != EntityState.Detached)
                    .ToList();

            foreach (var entrada in entradas)
            {
                var bitacora = CrearRegistroBitacora(entrada, userId, ipAddress, userAgent);
                if (bitacora != null)
                {
                    context.Set<EntradaBitacora>().Add(bitacora);
                }
            }
        }

        private EntradaBitacora? CrearRegistroBitacora(
            EntityEntry entrada,
            string userId,
            string ipAddress,
            string userAgent)
        {
            var entidadNombre = entrada.Entity.GetType().Name;
            var entidadId = ObtenerEntidadId(entrada);

            if (string.IsNullOrEmpty(entidadId))
                return null;

            string accion = entrada.State switch
            {
                EntityState.Added => "Crear",
                EntityState.Modified => "Editar",
                EntityState.Deleted => "Eliminar",
                _ => "Desconocido"
            };

            //string? valorAnterior = null;
            string? valorNuevo = null;

            if (entrada.State == EntityState.Modified)
            {
                var cambios = ObtenerCambios(entrada);
                if (cambios.Any())
                {
                    //valorAnterior = JsonSerializer.Serialize(
                    //    cambios.ToDictionary(c => c.Propiedad, c => c.ValorAnterior),
                    //    new JsonSerializerOptions { WriteIndented = false }
                    //);
                    valorNuevo = JsonSerializer.Serialize(
                        cambios.ToDictionary(c => c.Propiedad, c => c.ValorNuevo),
                        new JsonSerializerOptions { WriteIndented = false }
                    );
                }
            }
            else if (entrada.State == EntityState.Added)
            {
                var propiedades = entrada.CurrentValues.Properties
                    .Where(p => !p.IsShadowProperty()) // Excluir propiedades shadow
                    .ToDictionary(p => p.Name, p => entrada.CurrentValues[p]);

                valorNuevo = JsonSerializer.Serialize(propiedades,
                    new JsonSerializerOptions { WriteIndented = false });
            }
            else if (entrada.State == EntityState.Deleted)
            {
                var propiedades = entrada.OriginalValues.Properties
                    .Where(p => !p.IsShadowProperty())
                    .ToDictionary(p => p.Name, p => entrada.OriginalValues[p]);

                valorNuevo = JsonSerializer.Serialize(propiedades,
                    new JsonSerializerOptions { WriteIndented = false });
            }

            return new EntradaBitacora(
                accion,
                entidadNombre,
                entidadId,
                valorNuevo,
                userId,
                ipAddress,
                userAgent
            );
        }

        private string? ObtenerEntidadId(EntityEntry entrada)
        {
            var keyProperty = entrada.Metadata.FindPrimaryKey()?.Properties.FirstOrDefault();
            if (keyProperty == null)
                return string.Empty;

            var keyValue = entrada.Property(keyProperty.Name).CurrentValue;
            return keyValue?.ToString();
        }

        private List<(string Propiedad, /*object? ValorAnterior,*/ object? ValorNuevo)> ObtenerCambios(EntityEntry entrada)
        {
            var cambios = new List<(string, /*object?,*/ object?)>();

            foreach (var propiedad in entrada.OriginalValues.Properties)
            {
                // Ignorar propiedades de navegación y shadow properties
                if (propiedad.IsShadowProperty() || propiedad.IsForeignKey())
                    continue;

                var valorOriginal = entrada.OriginalValues[propiedad];
                var valorActual = entrada.CurrentValues[propiedad];

                if (!Equals(valorOriginal, valorActual))
                {
                    cambios.Add((propiedad.Name,/* valorOriginal,*/ valorActual));
                }
            }

            return cambios;
        }
    }
}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Infrastructure\Data\UnitOfWork.cs ---
using Microsoft.EntityFrameworkCore.Storage;
using PortalCOSIE.Domain.Interfaces;
using PortalCOSIE.Infrastructure.Data;

namespace Infrastructure.Data
{
    public class UnitOfWork : IUnitOfWork
    {
        private readonly AppDbContext _context;
        private IDbContextTransaction _transaction;

        public UnitOfWork(AppDbContext context)
        {
            _context = context;
        }

        public async Task<int> SaveChangesAsync(CancellationToken cancellationToken = default)
        {
            return await _context.SaveChangesAsync(cancellationToken);
        }

        public async Task BeginTransactionAsync()
        {
            _transaction = await _context.Database.BeginTransactionAsync();
        }

        public async Task CommitTransactionAsync()
        {
            try
            {
                await _context.SaveChangesAsync();
                await _transaction.CommitAsync();
            }
            catch
            {
                await RollbackTransactionAsync();
                throw;
            }
            finally
            {
                _transaction?.Dispose();
                _transaction = null;
            }
        }

        public async Task RollbackTransactionAsync()
        {
            await _transaction?.RollbackAsync();
            _transaction?.Dispose();
            _transaction = null;
        }

        public void Dispose()
        {
            _transaction?.Dispose();
            _context?.Dispose();
        }
    }
}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Infrastructure\Data\Configurations\CarreraConfiguration.cs ---
using Microsoft.EntityFrameworkCore;
using Microsoft.EntityFrameworkCore.Metadata.Builders;
using PortalCOSIE.Domain.Entities.Carreras;

namespace PortalCOSIE.Infrastructure.Data.Configurations
{
    public class CarreraConfiguration : IEntityTypeConfiguration<Carrera>
    {
        public void Configure(EntityTypeBuilder<Carrera> builder)
        {
            builder.ToTable("Carrera");

            builder.Property(c => c.Nombre)
                .IsRequired()
                .HasMaxLength(100);

            builder.HasIndex(d => d.Nombre)
                .IsUnique();

            builder.HasData(
                new { Id = 1, Nombre = "Mecatrónica", IsDeleted = false },
                new { Id = 2, Nombre = "Telemática", IsDeleted = false },
                new { Id = 3, Nombre = "Biónica", IsDeleted = false },
                new { Id = 4, Nombre = "Energía", IsDeleted = false },
                new { Id = 5, Nombre = "ISISA", IsDeleted = false }
            );
        }
    }
}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Infrastructure\Data\Configurations\EntradaBitacoraConfiguration.cs ---
using Microsoft.AspNetCore.Identity;
using Microsoft.EntityFrameworkCore;
using Microsoft.EntityFrameworkCore.Metadata.Builders;
using PortalCOSIE.Domain.Entities.Bitacoras;

namespace PortalCOSIE.Infrastructure.Data.Configurations
{
    public class EntradaBitacoraConfiguration : IEntityTypeConfiguration<EntradaBitacora>
    {
        public void Configure(EntityTypeBuilder<EntradaBitacora> builder)
        {
            builder.ToTable("Bitacora");

            //Conexion con IdentityUser desacoplada de la tabla Usuario
            builder.HasOne<IdentityUser>()
            .WithMany()
            .HasForeignKey(a => a.IdentityUserId);
        }
    }
}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Infrastructure\Data\Configurations\PeriodoConfigConfiguration.cs ---
using Microsoft.EntityFrameworkCore;
using Microsoft.EntityFrameworkCore.Metadata.Builders;
using PortalCOSIE.Domain.Entities.Calendario;

namespace PortalCOSIE.Infrastructure.Data.Configurations
{
    public class PeriodoConfigConfiguration : IEntityTypeConfiguration<PeriodoConfig>
    {
        public void Configure(EntityTypeBuilder<PeriodoConfig> builder)
        {
            builder.ToTable("PeriodoConfig");

            builder.Property(t => t.AnioInicio)
                .IsRequired()
                .HasMaxLength(4); 
            
            builder.Property(t => t.PeriodoInicio)
                .IsRequired()
                .HasMaxLength(1);

            builder.Property(t => t.AnioFin)
                .IsRequired()
                .HasMaxLength(4);

            builder.Property(t => t.PeriodoFin)
                .IsRequired()
                .HasMaxLength(1);

            builder.HasData(
                new { 
                    Id = 1,
                    AnioInicio = 1997,
                    PeriodoInicio = 1,
                    AnioFin = (DateTime.Now.Year + 1),
                    PeriodoFin = 2,
                    IsDeleted = false 
                });
        }
    }
}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Infrastructure\Data\Configurations\UnidadAprendizajeConfiguration.cs ---
using Microsoft.EntityFrameworkCore;
using Microsoft.EntityFrameworkCore.Metadata.Builders;
using PortalCOSIE.Domain.Entities.Carreras;
using PortalCOSIE.Domain.Enums;

namespace PortalCOSIE.Infrastructure.Data.Configurations
{
    public class UnidadAprendizajeConfiguration : IEntityTypeConfiguration<UnidadAprendizaje>
    {
        public void Configure(EntityTypeBuilder<UnidadAprendizaje> builder)
        {
            builder.ToTable("UnidadAprendizaje");

            builder.Property(c => c.Nombre)
                .IsRequired()
                .HasMaxLength(100);

            builder.Property(c => c.Semestre)
                .IsRequired();

            builder.HasData(
                // Carrera 1, Semestre 1
                new { Id = 1, Nombre = "ALGEBRA LINEAL Y NUMEROS COMPLEJOS", CarreraId = 1, Semestre = Semestre.PRIMERO, IsDeleted = false },
                new { Id = 2, Nombre = "ANALISIS Y DISEÑO DE PROGRAMAS", CarreraId = 1, Semestre = Semestre.PRIMERO, IsDeleted = false },
                new { Id = 3, Nombre = "CALCULO DIFERENCIAL E INTEGRAL", CarreraId = 1, Semestre = Semestre.PRIMERO, IsDeleted = false },
                new { Id = 4, Nombre = "CALCULO VECTORIAL", CarreraId = 1, Semestre = Semestre.PRIMERO, IsDeleted = false },
                new { Id = 5, Nombre = "CIRCUITOS ELECTRICOS", CarreraId = 1, Semestre = Semestre.PRIMERO, IsDeleted = false },
                new { Id = 6, Nombre = "CIRCUITOS ELECTRICOS AVANZADOS", CarreraId = 1, Semestre = Semestre.PRIMERO, IsDeleted = false },
                new { Id = 7, Nombre = "DIBUJO ASISTIDO POR COMPUTADORA", CarreraId = 1, Semestre = Semestre.PRIMERO, IsDeleted = false },
                new { Id = 8, Nombre = "ECUACIONES DIFERENCIALES", CarreraId = 1, Semestre = Semestre.PRIMERO, IsDeleted = false },
                new { Id = 9, Nombre = "ELECTRICIDAD Y MAGNETISMO", CarreraId = 1, Semestre = Semestre.PRIMERO, IsDeleted = false },
                new { Id = 10, Nombre = "ESTRUCTURA Y PROPIEDADES DE LOS MATERIALES", CarreraId = 1, Semestre = Semestre.PRIMERO, IsDeleted = false },
                new { Id = 11, Nombre = "COMUNICACION ORAL Y ESCRITA", CarreraId = 1, Semestre = Semestre.PRIMERO, IsDeleted = false },
                new { Id = 12, Nombre = "FUNDAMENTOS DE ELECTRONICA", CarreraId = 1, Semestre = Semestre.PRIMERO, IsDeleted = false },
                new { Id = 13, Nombre = "HERRAMIENTAS COMPUTACIONALES", CarreraId = 1, Semestre = Semestre.PRIMERO, IsDeleted = false },
                new { Id = 14, Nombre = "INGLES I", CarreraId = 1, Semestre = Semestre.PRIMERO, IsDeleted = false },
                new { Id = 15, Nombre = "INGLES II", CarreraId = 1, Semestre = Semestre.PRIMERO, IsDeleted = false },
                new { Id = 16, Nombre = "INTRODUCCION A LA MECATRONICA", CarreraId = 1, Semestre = Semestre.PRIMERO, IsDeleted = false },
                new { Id = 17, Nombre = "INTRODUCCION A LA PROGRAMACION", CarreraId = 1, Semestre = Semestre.PRIMERO, IsDeleted = false },
                new { Id = 18, Nombre = "MECANICA DE LA PARTICULA", CarreraId = 1, Semestre = Semestre.PRIMERO, IsDeleted = false },
                new { Id = 19, Nombre = "MECANICA DEL CUERPO RIGIDO", CarreraId = 1, Semestre = Semestre.PRIMERO, IsDeleted = false },
                new { Id = 20, Nombre = "PROCESO DE MANUFACTURA", CarreraId = 1, Semestre = Semestre.PRIMERO, IsDeleted = false },
                new { Id = 21, Nombre = "RESISTENCIA DE MATERIALES", CarreraId = 1, Semestre = Semestre.PRIMERO, IsDeleted = false },

                // Carrera 1, Semestre 2
                new { Id = 22, Nombre = "ADMINISTRACION ORGANIZACIONAL", CarreraId = 1, Semestre = Semestre.SEGUNDO, IsDeleted = false },
                new { Id = 23, Nombre = "ANALISIS DE SEÑALES Y SISTEMAS", CarreraId = 1, Semestre = Semestre.SEGUNDO, IsDeleted = false },
                new { Id = 24, Nombre = "ANALISIS Y SINTESIS DE MECANISMOS", CarreraId = 1, Semestre = Semestre.SEGUNDO, IsDeleted = false },
                new { Id = 25, Nombre = "CIRCUITOS LOGICOS", CarreraId = 1, Semestre = Semestre.SEGUNDO, IsDeleted = false },
                new { Id = 26, Nombre = "DISEÑO BASICO DE ELEMENTOS DE MAQUINAS", CarreraId = 1, Semestre = Semestre.SEGUNDO, IsDeleted = false },
                new { Id = 27, Nombre = "DISPOSITIVOS LOGICOS PROGRAMABLES", CarreraId = 1, Semestre = Semestre.SEGUNDO, IsDeleted = false },
                new { Id = 28, Nombre = "ELECTRONICA ANALOGICA", CarreraId = 1, Semestre = Semestre.SEGUNDO, IsDeleted = false },
                new { Id = 29, Nombre = "INGLES III", CarreraId = 1, Semestre = Semestre.SEGUNDO, IsDeleted = false },
                new { Id = 30, Nombre = "LIDERAZGO Y EMPRENDEDORES", CarreraId = 1, Semestre = Semestre.SEGUNDO, IsDeleted = false },
                new { Id = 31, Nombre = "MANTENIMIENTO Y SISTEMAS DE MANUFACTURA", CarreraId = 1, Semestre = Semestre.SEGUNDO, IsDeleted = false },
                new { Id = 32, Nombre = "MAQUINAS ELECTRICAS", CarreraId = 1, Semestre = Semestre.SEGUNDO, IsDeleted = false },
                new { Id = 33, Nombre = "MECANICA DE FLUIDOS", CarreraId = 1, Semestre = Semestre.SEGUNDO, IsDeleted = false },
                new { Id = 34, Nombre = "MICROPROCESADORES, MICROCONTROLADORES E INTERFAZ", CarreraId = 1, Semestre = Semestre.SEGUNDO, IsDeleted = false },
                new { Id = 35, Nombre = "NEUMATICA E HIDRAULICA", CarreraId = 1, Semestre = Semestre.SEGUNDO, IsDeleted = false },
                new { Id = 36, Nombre = "OSCILACIONES Y OPTICA", CarreraId = 1, Semestre = Semestre.SEGUNDO, IsDeleted = false },
                new { Id = 37, Nombre = "PROBABILIDAD Y ESTADISTICA PARA INGENIERIA", CarreraId = 1, Semestre = Semestre.SEGUNDO, IsDeleted = false },
                new { Id = 38, Nombre = "PROGRAMACION AVANZADA", CarreraId = 1, Semestre = Semestre.SEGUNDO, IsDeleted = false },
                new { Id = 39, Nombre = "SENSORES Y ACONDICIONADORES DE SEÑAL", CarreraId = 1, Semestre = Semestre.SEGUNDO, IsDeleted = false },
                new { Id = 40, Nombre = "SIMULACION ELECTRONICA Y DISEÑO DE CIRCUITOS IMPRESOS", CarreraId = 1, Semestre = Semestre.SEGUNDO, IsDeleted = false },
                new { Id = 41, Nombre = "SISTEMAS NEURODIFUSOS", CarreraId = 1, Semestre = Semestre.SEGUNDO, IsDeleted = false },
                new { Id = 42, Nombre = "TEORIA ELECTROMAGNETICA", CarreraId = 1, Semestre = Semestre.SEGUNDO, IsDeleted = false },
                new { Id = 43, Nombre = "TERMODINAMICA", CarreraId = 1, Semestre = Semestre.SEGUNDO, IsDeleted = false },

                // Carrera 1, Semestre 3
                new { Id = 44, Nombre = "CONTROL CLASICO", CarreraId = 1, Semestre = Semestre.TERCERO, IsDeleted = false },
                new { Id = 45, Nombre = "ETICA PARA EL EJERCICIO PROFESIONAL", CarreraId = 1, Semestre = Semestre.TERCERO, IsDeleted = false },
                new { Id = 46, Nombre = "INSTRUMENTACION VIRTUAL", CarreraId = 1, Semestre = Semestre.TERCERO, IsDeleted = false },
                new { Id = 47, Nombre = "MODELADO Y SIMULACION DE SISTEMAS MECATRONICOS", CarreraId = 1, Semestre = Semestre.TERCERO, IsDeleted = false },
                new { Id = 48, Nombre = "AUTOMATIZACION INDUSTRIAL", CarreraId = 1, Semestre = Semestre.TERCERO, IsDeleted = false },
                new { Id = 49, Nombre = "DISEÑO AVANZADO DE ELEMENTOS DE MAQUINAS", CarreraId = 1, Semestre = Semestre.TERCERO, IsDeleted = false },
                new { Id = 50, Nombre = "FINANZAS E INGENIERIA ECONOMICA", CarreraId = 1, Semestre = Semestre.TERCERO, IsDeleted = false },
                new { Id = 51, Nombre = "PROCESADOR DIGITAL DE SEÑALES", CarreraId = 1, Semestre = Semestre.TERCERO, IsDeleted = false },
                new { Id = 52, Nombre = "INGENIERIA AMBIENTAL", CarreraId = 1, Semestre = Semestre.TERCERO, IsDeleted = false },
                new { Id = 53, Nombre = "ECONOMIA Y LOGISTICA", CarreraId = 1, Semestre = Semestre.TERCERO, IsDeleted = false },
                new { Id = 54, Nombre = "CONTROL DISTRIBUIDO", CarreraId = 1, Semestre = Semestre.TERCERO, IsDeleted = false },
                new { Id = 55, Nombre = "TOPICOS AVANZADOS DE ELECTRONICA", CarreraId = 1, Semestre = Semestre.TERCERO, IsDeleted = false },
                new { Id = 56, Nombre = "DISEÑO AVANZADO Y MANUFACTURA ASISTIDA POR COMPUTADORA", CarreraId = 1, Semestre = Semestre.TERCERO, IsDeleted = false },
                new { Id = 57, Nombre = "PROYECTO INTEGRADOR", CarreraId = 1, Semestre = Semestre.TERCERO, IsDeleted = false },
                new { Id = 58, Nombre = "AUTOMATAS INDUSTRIALES", CarreraId = 1, Semestre = Semestre.TERCERO, IsDeleted = false },
                new { Id = 59, Nombre = "AUTOMATIZACION DE LINEA DE PRODUCCION", CarreraId = 1, Semestre = Semestre.TERCERO, IsDeleted = false },
                new { Id = 60, Nombre = "TOPICOS AVANZADOS DE SENSORES", CarreraId = 1, Semestre = Semestre.TERCERO, IsDeleted = false },
                new { Id = 61, Nombre = "DESARROLLO EMPRESARIAL", CarreraId = 1, Semestre = Semestre.TERCERO, IsDeleted = false },
                new { Id = 62, Nombre = "SEGURIDAD INDUSTRIAL", CarreraId = 1, Semestre = Semestre.TERCERO, IsDeleted = false },
                new { Id = 63, Nombre = "SISTEMAS OPERATIVOS EN TIEMPO REAL", CarreraId = 1, Semestre = Semestre.TERCERO, IsDeleted = false },
                new { Id = 64, Nombre = "GRAFICACION EN 3D", CarreraId = 1, Semestre = Semestre.TERCERO, IsDeleted = false },
                new { Id = 65, Nombre = "PROCESOS INDUSTRIALES", CarreraId = 1, Semestre = Semestre.TERCERO, IsDeleted = false },
                new { Id = 66, Nombre = "PRODUCCION MAS LIMPIA", CarreraId = 1, Semestre = Semestre.TERCERO, IsDeleted = false },
                new { Id = 67, Nombre = "USO Y MANTENIMIENTO DE HERRAMENTAL PARA PROC. DE MANUFACTURA", CarreraId = 1, Semestre = Semestre.TERCERO, IsDeleted = false },
                new { Id = 68, Nombre = "ELECTIVA I", CarreraId = 1, Semestre = Semestre.TERCERO, IsDeleted = false },
                new { Id = 69, Nombre = "SISTEMAS DE CALIDAD PARA LA MANUFACTURA", CarreraId = 1, Semestre = Semestre.TERCERO, IsDeleted = false },
                new { Id = 70, Nombre = "PROTOCOLOS AVANZADOS DE COMUNICACIONES", CarreraId = 1, Semestre = Semestre.TERCERO, IsDeleted = false },

                // Carrera 1, Semestre 4
                new { Id = 71, Nombre = "CONTROL DE SISTEMAS MECATRONICOS", CarreraId = 1, Semestre = Semestre.CUARTO, IsDeleted = false },
                new { Id = 72, Nombre = "ELECTRONICA DE POTENCIA", CarreraId = 1, Semestre = Semestre.CUARTO, IsDeleted = false },
                new { Id = 73, Nombre = "INGENIERIA ASISTIDA POR COMPUTADORA", CarreraId = 1, Semestre = Semestre.CUARTO, IsDeleted = false },
                new { Id = 74, Nombre = "METODOLOGIA DE LA INVESTIGACION", CarreraId = 1, Semestre = Semestre.CUARTO, IsDeleted = false },
                new { Id = 75, Nombre = "PROYECTOS DE INVERSION", CarreraId = 1, Semestre = Semestre.CUARTO, IsDeleted = false },
                new { Id = 76, Nombre = "SISTEMAS DE VISION ARTIFICIAL", CarreraId = 1, Semestre = Semestre.CUARTO, IsDeleted = false },
                new { Id = 77, Nombre = "MICROCONTROLADORES AVANZADOS", CarreraId = 1, Semestre = Semestre.CUARTO, IsDeleted = false },
                new { Id = 78, Nombre = "MERCADOTECNIA", CarreraId = 1, Semestre = Semestre.CUARTO, IsDeleted = false },
                new { Id = 79, Nombre = "INTEGRACION DE UN SISTEMA ROBOTICO", CarreraId = 1, Semestre = Semestre.CUARTO, IsDeleted = false },
                new { Id = 80, Nombre = "VISION ARTIFICIAL APLICADA", CarreraId = 1, Semestre = Semestre.CUARTO, IsDeleted = false },
                new { Id = 81, Nombre = "ELECTIVA II", CarreraId = 1, Semestre = Semestre.CUARTO, IsDeleted = false },
                new { Id = 82, Nombre = "PROCESOS AVANZADOS DE MANUFACTURA", CarreraId = 1, Semestre = Semestre.CUARTO, IsDeleted = false },
                new { Id = 83, Nombre = "CONTROL DE SISTEMAS ROBOTICOS", CarreraId = 1, Semestre = Semestre.CUARTO, IsDeleted = false },
                new { Id = 84, Nombre = "IMPLEMENTACION DE SISTEMAS DIGITALES", CarreraId = 1, Semestre = Semestre.CUARTO, IsDeleted = false },
                new { Id = 85, Nombre = "INSTRUMENTACION VIRTUAL APLICADA", CarreraId = 1, Semestre = Semestre.CUARTO, IsDeleted = false },
                new { Id = 86, Nombre = "MANUFACTURA INTEGRADA POR COMPUTADORA", CarreraId = 1, Semestre = Semestre.CUARTO, IsDeleted = false },
                new { Id = 87, Nombre = "TOPICOS AVANZADOS DE AUTOMATIZACION", CarreraId = 1, Semestre = Semestre.CUARTO, IsDeleted = false },
                new { Id = 88, Nombre = "SISTEMAS AVANZADOS DE MANUFACTURA", CarreraId = 1, Semestre = Semestre.CUARTO, IsDeleted = false },
                new { Id = 89, Nombre = "CONTROL DE PROCESOS INDUSTRIALES", CarreraId = 1, Semestre = Semestre.CUARTO, IsDeleted = false },
                new { Id = 90, Nombre = "CONTROL INTELIGENTE", CarreraId = 1, Semestre = Semestre.CUARTO, IsDeleted = false },
                new { Id = 91, Nombre = "DISEÑO DE EQUIPO PARA MANEJO DE MATERIALES", CarreraId = 1, Semestre = Semestre.CUARTO, IsDeleted = false },
                new { Id = 92, Nombre = "DISEÑO ERGONOMICO", CarreraId = 1, Semestre = Semestre.CUARTO, IsDeleted = false },
                new { Id = 93, Nombre = "PROTOCOLOS DE COMUNICACION INDUSTRIAL", CarreraId = 1, Semestre = Semestre.CUARTO, IsDeleted = false },
                new { Id = 94, Nombre = "PROYECTO DE SISTEMAS EMBEBIDOS", CarreraId = 1, Semestre = Semestre.CUARTO, IsDeleted = false },
                new { Id = 95, Nombre = "REALIDAD VIRTUAL", CarreraId = 1, Semestre = Semestre.CUARTO, IsDeleted = false },
                new { Id = 96, Nombre = "SISTEMAS DE PROCESAMIENTO DIGITAL DE SEÑALES", CarreraId = 1, Semestre = Semestre.CUARTO, IsDeleted = false },
                new { Id = 97, Nombre = "TOPICOS AVANZADOS DE SOLDADURA", CarreraId = 1, Semestre = Semestre.CUARTO, IsDeleted = false },

                // Carrera 1, Semestre 5
                new { Id = 98, Nombre = "CONTROL DE MAQUINAS ELECTRICAS", CarreraId = 1, Semestre = Semestre.QUINTO, IsDeleted = false },
                new { Id = 99, Nombre = "ELECTIVA III", CarreraId = 1, Semestre = Semestre.QUINTO, IsDeleted = false },
                new { Id = 100, Nombre = "TRABAJO TERMINAL I", CarreraId = 1, Semestre = Semestre.QUINTO, IsDeleted = false },
                new { Id = 101, Nombre = "TRABAJO TERMINAL II", CarreraId = 1, Semestre = Semestre.QUINTO, IsDeleted = false },
                new { Id = 102, Nombre = "SERVICIO SOCIAL", CarreraId = 1, Semestre = Semestre.QUINTO, IsDeleted = false },

                // Carrera 2, Semestre 1
                new { Id = 103, Nombre = "PROGRAMACION", CarreraId = 2, Semestre = Semestre.PRIMERO, IsDeleted = false },
                new { Id = 104, Nombre = "ANALISIS Y DISEÑO DE SISTEMAS", CarreraId = 2, Semestre = Semestre.PRIMERO, IsDeleted = false },
                new { Id = 105, Nombre = "ESTRUCTURA DE DATOS", CarreraId = 2, Semestre = Semestre.PRIMERO, IsDeleted = false },
                new { Id = 106, Nombre = "ADMINISTRACION DE SISTEMAS OPERATIVOS", CarreraId = 2, Semestre = Semestre.PRIMERO, IsDeleted = false },
                new { Id = 107, Nombre = "DISEÑO DIGITAL", CarreraId = 2, Semestre = Semestre.PRIMERO, IsDeleted = false },
                new { Id = 108, Nombre = "ARQUITECTURA DE COMPUTADORAS", CarreraId = 2, Semestre = Semestre.PRIMERO, IsDeleted = false },
                new { Id = 109, Nombre = "FUNDAMENTOS DE FISICA", CarreraId = 2, Semestre = Semestre.PRIMERO, IsDeleted = false },
                new { Id = 110, Nombre = "ECUACIONES DIFERENCIALES", CarreraId = 2, Semestre = Semestre.PRIMERO, IsDeleted = false },
                new { Id = 111, Nombre = "PROBABILIDAD", CarreraId = 2, Semestre = Semestre.PRIMERO, IsDeleted = false },
                new { Id = 112, Nombre = "CALCULO DIFERENCIAL E INTEGRAL", CarreraId = 2, Semestre = Semestre.PRIMERO, IsDeleted = false },
                new { Id = 113, Nombre = "VARIABLE COMPLEJA", CarreraId = 2, Semestre = Semestre.PRIMERO, IsDeleted = false },
                new { Id = 114, Nombre = "ALGEBRA LINEAL", CarreraId = 2, Semestre = Semestre.PRIMERO, IsDeleted = false },
                new { Id = 115, Nombre = "ELECTROMAGNETISMO", CarreraId = 2, Semestre = Semestre.PRIMERO, IsDeleted = false },
                new { Id = 116, Nombre = "CALCULO MULTIVARIABLE", CarreraId = 2, Semestre = Semestre.PRIMERO, IsDeleted = false },
                new { Id = 117, Nombre = "ADMINISTRACION ORGANIZACIONAL", CarreraId = 2, Semestre = Semestre.PRIMERO, IsDeleted = false },
                new { Id = 118, Nombre = "ETICA, PROFESION Y SOCIEDAD", CarreraId = 2, Semestre = Semestre.PRIMERO, IsDeleted = false },
                new { Id = 119, Nombre = "COMUNICACION ORAL Y ESCRITA", CarreraId = 2, Semestre = Semestre.PRIMERO, IsDeleted = false },
                new { Id = 120, Nombre = "INGLES I", CarreraId = 2, Semestre = Semestre.PRIMERO, IsDeleted = false },
                new { Id = 121, Nombre = "INGLES II", CarreraId = 2, Semestre = Semestre.PRIMERO, IsDeleted = false },
                new { Id = 122, Nombre = "PROGRAMACION ESTRUCTURADA", CarreraId = 2, Semestre = Semestre.PRIMERO, IsDeleted = false },
                new { Id = 123, Nombre = "SOCIEDAD, CIENCIA Y TECNOLOGIA", CarreraId = 2, Semestre = Semestre.PRIMERO, IsDeleted = false },

                // Carrera 2, Semestre 2
                new { Id = 124, Nombre = "SEÑALES Y SISTEMAS", CarreraId = 2, Semestre = Semestre.SEGUNDO, IsDeleted = false },
                new { Id = 125, Nombre = "PROPAGACION DE ONDAS ELECTROMAGNETICAS", CarreraId = 2, Semestre = Semestre.SEGUNDO, IsDeleted = false },
                new { Id = 126, Nombre = "ELECTRONICA", CarreraId = 2, Semestre = Semestre.SEGUNDO, IsDeleted = false },
                new { Id = 127, Nombre = "TEORIA DE LOS CIRCUITOS", CarreraId = 2, Semestre = Semestre.SEGUNDO, IsDeleted = false },
                new { Id = 128, Nombre = "TEORIA DE LA INFORMACION", CarreraId = 2, Semestre = Semestre.SEGUNDO, IsDeleted = false },
                new { Id = 129, Nombre = "TEORIA DE LAS COMUNICACIONES", CarreraId = 2, Semestre = Semestre.SEGUNDO, IsDeleted = false },
                new { Id = 130, Nombre = "COMUNICACIONES DIGITALES", CarreraId = 2, Semestre = Semestre.SEGUNDO, IsDeleted = false },
                new { Id = 131, Nombre = "PROCESAMIENTO DIGITAL DE SEÑALES", CarreraId = 2, Semestre = Semestre.SEGUNDO, IsDeleted = false },
                new { Id = 132, Nombre = "TELEFONIA", CarreraId = 2, Semestre = Semestre.SEGUNDO, IsDeleted = false },
                new { Id = 133, Nombre = "SISTEMAS CELULARES", CarreraId = 2, Semestre = Semestre.SEGUNDO, IsDeleted = false },
                new { Id = 134, Nombre = "PROTOCOLOS DE INTERNET", CarreraId = 2, Semestre = Semestre.SEGUNDO, IsDeleted = false },
                new { Id = 135, Nombre = "SISTEMAS DISTRIBUIDOS", CarreraId = 2, Semestre = Semestre.SEGUNDO, IsDeleted = false },
                new { Id = 136, Nombre = "INGENIERIA WEB", CarreraId = 2, Semestre = Semestre.SEGUNDO, IsDeleted = false },
                new { Id = 137, Nombre = "PROGRAMACION AVANZADA", CarreraId = 2, Semestre = Semestre.SEGUNDO, IsDeleted = false },
                new { Id = 138, Nombre = "BASES DE DATOS", CarreraId = 2, Semestre = Semestre.SEGUNDO, IsDeleted = false },
                new { Id = 139, Nombre = "TRANSMISION DE DATOS", CarreraId = 2, Semestre = Semestre.SEGUNDO, IsDeleted = false },
                new { Id = 140, Nombre = "INFORMACION FINANCIERA E INGENIERIA ECONOMICA", CarreraId = 2, Semestre = Semestre.SEGUNDO, IsDeleted = false },
                new { Id = 141, Nombre = "OPTATIVA I", CarreraId = 2, Semestre = Semestre.SEGUNDO, IsDeleted = false },
                new { Id = 142, Nombre = "INGLES III", CarreraId = 2, Semestre = Semestre.SEGUNDO, IsDeleted = false },
                new { Id = 143, Nombre = "METODOS NUMERICOS", CarreraId = 2, Semestre = Semestre.SEGUNDO, IsDeleted = false },
                new { Id = 144, Nombre = "ELECTRONICA PARA COMUNICACIONES", CarreraId = 2, Semestre = Semestre.SEGUNDO, IsDeleted = false },
                new { Id = 145, Nombre = "OPTICA", CarreraId = 2, Semestre = Semestre.SEGUNDO, IsDeleted = false },
                new { Id = 146, Nombre = "DESARROLLO SUSTENTABLE", CarreraId = 2, Semestre = Semestre.SEGUNDO, IsDeleted = false },
                new { Id = 147, Nombre = "ECONOMIA PARA INGENIEROS", CarreraId = 2, Semestre = Semestre.SEGUNDO, IsDeleted = false },
                new { Id = 148, Nombre = "INGLES IV", CarreraId = 2, Semestre = Semestre.SEGUNDO, IsDeleted = false },
                new { Id = 149, Nombre = "REDES INALAMBRICAS", CarreraId = 2, Semestre = Semestre.SEGUNDO, IsDeleted = false },
                new { Id = 150, Nombre = "REDES NEURONALES", CarreraId = 2, Semestre = Semestre.SEGUNDO, IsDeleted = false },
                new { Id = 151, Nombre = "LOGICA DIFUSA", CarreraId = 2, Semestre = Semestre.SEGUNDO, IsDeleted = false },
                new { Id = 152, Nombre = "SISTEMAS DE INFORMACION GEOGRAFICA", CarreraId = 2, Semestre = Semestre.SEGUNDO, IsDeleted = false },
                new { Id = 153, Nombre = "PROGRAMACION DE DISPOSITIVOS MOVILES", CarreraId = 2, Semestre = Semestre.SEGUNDO, IsDeleted = false },
                new { Id = 154, Nombre = "NORMATIVIDAD EN TELECOMUNICACIONES E INFORMATICA", CarreraId = 2, Semestre = Semestre.SEGUNDO, IsDeleted = false },

                // Carrera 2, Semestre 3
                new { Id = 155, Nombre = "REDES INTELIGENTES", CarreraId = 2, Semestre = Semestre.TERCERO, IsDeleted = false },
                new { Id = 156, Nombre = "LINEAS DE TRANSMISION Y ANTENAS", CarreraId = 2, Semestre = Semestre.TERCERO, IsDeleted = false },
                new { Id = 157, Nombre = "SEGURIDAD EN REDES", CarreraId = 2, Semestre = Semestre.TERCERO, IsDeleted = false },
                new { Id = 158, Nombre = "MULTIMEDIA", CarreraId = 2, Semestre = Semestre.TERCERO, IsDeleted = false },
                new { Id = 159, Nombre = "BASES DE DATOS DISTRIBUIDAS", CarreraId = 2, Semestre = Semestre.TERCERO, IsDeleted = false },
                new { Id = 160, Nombre = "METODOLOGIA DE LA INVESTIGACION", CarreraId = 2, Semestre = Semestre.TERCERO, IsDeleted = false },
                new { Id = 161, Nombre = "ADMINISTRACION DE PROYECTOS", CarreraId = 2, Semestre = Semestre.TERCERO, IsDeleted = false },
                new { Id = 162, Nombre = "LIDERAZGO Y EMPRENDEDORES", CarreraId = 2, Semestre = Semestre.TERCERO, IsDeleted = false },
                new { Id = 163, Nombre = "CRIPTOGRAFIA", CarreraId = 2, Semestre = Semestre.TERCERO, IsDeleted = false },
                new { Id = 164, Nombre = "MICROONDAS", CarreraId = 2, Semestre = Semestre.TERCERO, IsDeleted = false },
                new { Id = 165, Nombre = "PROCESAMIENTO DE IMAGENES", CarreraId = 2, Semestre = Semestre.TERCERO, IsDeleted = false },
                new { Id = 166, Nombre = "TELEVISION DIGITAL", CarreraId = 2, Semestre = Semestre.TERCERO, IsDeleted = false },
                new { Id = 167, Nombre = "SISTEMAS DE CALIDAD", CarreraId = 2, Semestre = Semestre.TERCERO, IsDeleted = false },
                new { Id = 168, Nombre = "PROCESAMIENTO DE VOZ", CarreraId = 2, Semestre = Semestre.TERCERO, IsDeleted = false },
                new { Id = 169, Nombre = "FILTRADO AVANZADO", CarreraId = 2, Semestre = Semestre.TERCERO, IsDeleted = false },

                // Carrera 2, Semestre 4
                new { Id = 170, Nombre = "PROYECTO TERMINAL I", CarreraId = 2, Semestre = Semestre.CUARTO, IsDeleted = false },
                new { Id = 171, Nombre = "PROYECTO TERMINAL II", CarreraId = 2, Semestre = Semestre.CUARTO, IsDeleted = false },
                new { Id = 172, Nombre = "REDES DE TELECOMUNICACIONES", CarreraId = 2, Semestre = Semestre.CUARTO, IsDeleted = false },
                new { Id = 173, Nombre = "APLICACIONES DISTRIBUIDAS", CarreraId = 2, Semestre = Semestre.CUARTO, IsDeleted = false },
                new { Id = 174, Nombre = "DISPOSITIVOS PROGRAMABLES", CarreraId = 2, Semestre = Semestre.CUARTO, IsDeleted = false },
                new { Id = 175, Nombre = "SERVICIO SOCIAL", CarreraId = 2, Semestre = Semestre.CUARTO, IsDeleted = false },
                new { Id = 176, Nombre = "ELECTIVA I", CarreraId = 2, Semestre = Semestre.CUARTO, IsDeleted = false },
                new { Id = 177, Nombre = "ELECTIVA II", CarreraId = 2, Semestre = Semestre.CUARTO, IsDeleted = false },
                new { Id = 178, Nombre = "ELECTIVA III", CarreraId = 2, Semestre = Semestre.CUARTO, IsDeleted = false },
                new { Id = 179, Nombre = "ELECTIVA IV", CarreraId = 2, Semestre = Semestre.CUARTO, IsDeleted = false }
            );
        }
    }
}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Infrastructure\Data\Configurations\Calendario\FechaRecepcionConfiguration.cs ---
using Microsoft.EntityFrameworkCore;
using Microsoft.EntityFrameworkCore.Metadata.Builders;
using PortalCOSIE.Domain.Entities.Calendario;

namespace PortalCOSIE.Infrastructure.Data.Configurations.Calendario
{
    public class FechaRecepcionConfiguration : IEntityTypeConfiguration<FechaRecepcion>
    {
        public void Configure(EntityTypeBuilder<FechaRecepcion> builder)
        {
            builder.ToTable("FechaRecepcion");

            builder.Property(s => s.SesionId)
                .IsRequired();

            builder.Property(s => s.Fecha)
                .IsRequired();

            builder.HasOne(f => f.Sesion)
            .WithMany(s => s.FechasRecepcion)
            .HasForeignKey(f => f.SesionId);
        }
    }
}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Infrastructure\Data\Configurations\Calendario\SesionCOSIEConfiguration.cs ---
using Microsoft.EntityFrameworkCore;
using Microsoft.EntityFrameworkCore.Metadata.Builders;
using PortalCOSIE.Domain.Entities.Calendario;

namespace PortalCOSIE.Infrastructure.Data.Configurations.Calendario
{
    public class SesionCOSIEConfiguration : IEntityTypeConfiguration<SesionCOSIE>
    {
        public void Configure(EntityTypeBuilder<SesionCOSIE> builder)
        {
            builder.ToTable("SesionCOSIE");

            builder.Property(s => s.NumeroSesion)
                .IsRequired()
                .HasMaxLength(50);

            builder.HasIndex(s => s.NumeroSesion)
                .IsUnique();

            builder.HasMany(s => s.FechasRecepcion)
                .WithOne(f => f.Sesion)
                .HasForeignKey(f => f.SesionId);

            builder.HasData(
                new
                {
                    Id = 1,
                    NumeroSesion = "PRIMERA",
                    FechaSesion = (DateTime?)new DateTime(2025, 12, 20),
                    IsDeleted = false
                },
                new
                {
                    Id = 2,
                    NumeroSesion = "SEGUNDA",
                    FechaSesion = (DateTime?)new DateTime(2025, 12, 10),
                    IsDeleted = false
                },
                new
                {
                    Id = 3,
                    NumeroSesion = "TERCERA",
                    FechaSesion = (DateTime?)new DateTime(2025, 12, 2),
                    IsDeleted = false
                }
                );
        }
    }
}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Infrastructure\Data\Configurations\Documentos\DocumentoConfiguration.cs ---
using Microsoft.EntityFrameworkCore;
using Microsoft.EntityFrameworkCore.Metadata.Builders;
using PortalCOSIE.Domain.Entities.Documentos;

namespace PortalCOSIE.Infrastructure.Data.Configurations.Documentos
{
    public class DocumentoConfiguration : IEntityTypeConfiguration<Documento>
    {
        public void Configure(EntityTypeBuilder<Documento> builder)
        {
            builder.ToTable("Documento");

            // 1. Configuración del RowGuid (Requisito obligatorio de FILESTREAM)
            //builder.Property(e => e.RowGuid)
            //      .HasColumnName("RowGuid")
            //      .HasDefaultValueSql("NEWID()") // SQL genera el ID automáticamente
            //      .IsRequired();

            builder.Property(d => d.Nombre)
                .IsRequired()
                .HasMaxLength(200);

            builder.Property(d => d.Observaciones)
                .HasMaxLength(1000);

            builder.HasOne(d => d.Tramite)
                .WithMany(t => t.Documentos)
                .HasForeignKey(d => d.TramiteId)
                .OnDelete(DeleteBehavior.Restrict);
        }
    }
}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Infrastructure\Data\Configurations\Documentos\EstadoDocumentoConfiguration.cs ---
using Microsoft.EntityFrameworkCore;
using Microsoft.EntityFrameworkCore.Metadata.Builders;
using PortalCOSIE.Domain.Entities.Documentos;

namespace PortalCOSIE.Infrastructure.Data.Configurations.Documentos
{
    public class EstadoDocumentoConfiguration : IEntityTypeConfiguration<EstadoDocumento>
    {
        public void Configure(EntityTypeBuilder<EstadoDocumento> builder)
        {
            builder.ToTable("EstadoDocumento");

            builder.Property(d => d.Nombre)
                .IsRequired()
                .HasMaxLength(100);

            builder.HasIndex(d => d.Nombre)
                .IsUnique();

            // Seed automático usando los valores de la Enumeration
            builder.HasData(
                new { EstadoDocumento.EnRevision.Id, EstadoDocumento.EnRevision.Nombre, IsDeleted = false },
                new { EstadoDocumento.Validado.Id, EstadoDocumento.Validado.Nombre, IsDeleted = false },
                new { EstadoDocumento.ConErrores.Id, EstadoDocumento.ConErrores.Nombre, IsDeleted = false },
                new { EstadoDocumento.Incorrecto.Id, EstadoDocumento.Incorrecto.Nombre, IsDeleted = false }
            );
        }
    }
}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Infrastructure\Data\Configurations\Identity\AspNetRolesConfiguration.cs ---
using Microsoft.AspNetCore.Identity;
using Microsoft.EntityFrameworkCore;
using Microsoft.EntityFrameworkCore.Metadata.Builders;

namespace PortalCOSIE.Infrastructure.Data.Configurations.Identity
{
    public class AspNetRolesConfiguration : IEntityTypeConfiguration<IdentityRole>
    {
        private const string adminId = "11111111-1111-1111-1111-111111111111";
        private const string personalId = "22222222-2222-2222-2222-222222222222";
        private const string alumnoId = "33333333-3333-3333-3333-333333333333";
        public void Configure(EntityTypeBuilder<IdentityRole> builder)
        {
            builder.HasData(
                new IdentityRole
                {
                    Id = adminId,
                    Name = "Administrador",
                    NormalizedName = "ADMINISTRADOR",
                },
                new IdentityRole
                {
                    Id = personalId,
                    Name = "Personal",
                    NormalizedName = "PERSONAL",
                },
                new IdentityRole
                {
                    Id = alumnoId,
                    Name = "Alumno",
                    NormalizedName = "ALUMNO",
                }
            );
        }
    }
}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Infrastructure\Data\Configurations\Tramites\DetalleCTCEConfiguration.cs ---
using Microsoft.EntityFrameworkCore;
using Microsoft.EntityFrameworkCore.Metadata.Builders;
using PortalCOSIE.Domain.Entities.Tramites;

namespace PortalCOSIE.Infrastructure.Data.Configurations.Tramites
{
    public class DetalleCTCEConfiguration : IEntityTypeConfiguration<DetalleCTCE>
    {
        public void Configure(EntityTypeBuilder<DetalleCTCE> builder)
        {
            builder.ToTable("DetalleCTCE");

            builder.Property(t => t.Situacion)
                .HasMaxLength(1000)
                .IsRequired();

            builder.Property(t => t.TieneDictamenesAnteriores)
                .IsRequired();
        }
    }
}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Infrastructure\Data\Configurations\Tramites\EstadoTramiteConfiguration.cs ---
using Microsoft.EntityFrameworkCore;
using Microsoft.EntityFrameworkCore.Metadata.Builders;
using PortalCOSIE.Domain.Entities.Tramites;

namespace PortalCOSIE.Infrastructure.Data.Configurations.Tramites
{
    public class EstadoTramiteConfiguration : IEntityTypeConfiguration<EstadoTramite>
    {
        public void Configure(EntityTypeBuilder<EstadoTramite> builder)
        {
            builder.ToTable("EstadoTramite");

            builder.Property(t => t.Nombre)
                .IsRequired()
                .HasMaxLength(100);

            builder.HasIndex(d => d.Nombre)
                .IsUnique();

            builder.HasData(
               new { EstadoTramite.Solicitado.Id, EstadoTramite.Solicitado.Nombre, IsDeleted = false },
               new { EstadoTramite.EnRevision.Id, EstadoTramite.EnRevision.Nombre, IsDeleted = false },
               new { EstadoTramite.DocumentosPendientes.Id, EstadoTramite.DocumentosPendientes.Nombre, IsDeleted = false },
               new { EstadoTramite.Concluido.Id, EstadoTramite.Concluido.Nombre, IsDeleted = false },
               new { EstadoTramite.Cancelado.Id, EstadoTramite.Cancelado.Nombre, IsDeleted = false }
           );
        }
    }
}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Infrastructure\Data\Configurations\Tramites\TipoTramiteConfiguration.cs ---
using Microsoft.EntityFrameworkCore;
using Microsoft.EntityFrameworkCore.Metadata.Builders;
using PortalCOSIE.Domain.Entities.Tramites;

namespace PortalCOSIE.Infrastructure.Data.Configurations.Tramites
{
    public class TipoTramiteConfiguration : IEntityTypeConfiguration<TipoTramite>
    {
        public void Configure(EntityTypeBuilder<TipoTramite> builder)
        {
            builder.ToTable("TipoTramite");

            builder.Property(t => t.Nombre)
                .IsRequired()
                .HasMaxLength(100);

            builder.HasIndex(d => d.Nombre)
                .IsUnique();

            builder.HasData(
               new { TipoTramite.DictamenInterno.Id, TipoTramite.DictamenInterno.Nombre, IsDeleted = false },
               new { TipoTramite.DictamenExterno.Id, TipoTramite.DictamenExterno.Nombre, IsDeleted = false }
            );
        }
    }
}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Infrastructure\Data\Configurations\Tramites\TramiteConfiguration.cs ---
using Microsoft.EntityFrameworkCore;
using Microsoft.EntityFrameworkCore.Metadata.Builders;
using PortalCOSIE.Domain.Entities.Tramites;

namespace PortalCOSIE.Infrastructure.Data.Configurations.Tramites
{
    public class TramiteConfiguration : IEntityTypeConfiguration<Tramite>
    {
        public void Configure(EntityTypeBuilder<Tramite> builder)
        {
            builder.ToTable("Tramite");
            builder.UseTptMappingStrategy();

            builder.Property(t => t.AlumnoId)
                .IsRequired();

            builder.Property(t => t.FechaSolicitud)
                .IsRequired();

            builder.HasOne(t => t.Alumno)
                .WithMany()
                .HasForeignKey(t => t.AlumnoId)
                .OnDelete(DeleteBehavior.Restrict);

            builder.HasOne(t => t.Personal)
                .WithMany()
                .HasForeignKey(t => t.PersonalId)
                .OnDelete(DeleteBehavior.Restrict);

            builder.HasMany(t => t.Documentos)
               .WithOne(d => d.Tramite)
               .HasForeignKey(d => d.TramiteId)
               .IsRequired();
        }
    }
}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Infrastructure\Data\Configurations\Tramites\UnidadReprobadaConfiguration.cs ---
using Microsoft.EntityFrameworkCore;
using Microsoft.EntityFrameworkCore.Metadata.Builders;
using PortalCOSIE.Domain.Entities.Tramites;

namespace PortalCOSIE.Infrastructure.Data.Configurations.Tramites
{
    public class UnidadReprobadaConfiguration : IEntityTypeConfiguration<UnidadReprobada>
    {
        public void Configure(EntityTypeBuilder<UnidadReprobada> builder)
        {
            builder.ToTable("UnidadReprobada");

            builder.Property(p => p.PeriodoCurso)
                .IsRequired();

            builder.Property(p => p.PeriodoRecurse)
                .IsRequired();

            builder.HasOne(m => m.UnidadAprendizaje)
                .WithMany().
                HasForeignKey(m => m.UnidadAprendizajeId);
            
            builder.HasOne(m => m.DetalleCTCE)
                .WithMany(t => t.UnidadesReprobadas)
                .HasForeignKey(m => m.DetalleCTCEId);
        }
    }
}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Infrastructure\Data\Configurations\Usuarios\AlumnoConfiguration.cs ---
using Microsoft.EntityFrameworkCore;
using Microsoft.EntityFrameworkCore.Metadata.Builders;
using PortalCOSIE.Domain.Entities.Usuarios;

namespace PortalCOSIE.Infrastructure.Data.Configurations.Usuarios
{
    public class AlumnoConfiguration : IEntityTypeConfiguration<Alumno>
    {
        public void Configure(EntityTypeBuilder<Alumno> builder)
        {
            builder.ToTable("Alumno");

            builder.Property(a => a.NumeroBoleta)
                .IsRequired()
                .HasMaxLength(10);

            builder.HasIndex(a => a.NumeroBoleta)
                .IsUnique();

            builder.Property(a => a.PeriodoIngreso)
                .IsRequired();

            builder.Property(a => a.CarreraId)
                .IsRequired();

            builder.HasOne(a => a.Carrera)
                .WithMany()
                .HasForeignKey(a => a.CarreraId)
                .OnDelete(DeleteBehavior.Restrict);

            builder.HasOne<Usuario>()      // Alumno tiene un Usuario
                .WithOne()              // Usuario tiene Alumno
                .HasForeignKey<Alumno>(a => a.Id)  // PK de Alumno = FK a Usuario
                .OnDelete(DeleteBehavior.Restrict); // Permite cascada
        }
    }
}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Infrastructure\Data\Configurations\Usuarios\PersonalConfiguration.cs ---
using Microsoft.EntityFrameworkCore;
using Microsoft.EntityFrameworkCore.Metadata.Builders;
using PortalCOSIE.Domain.Entities.Usuarios;

namespace PortalCOSIE.Infrastructure.Data.Configurations.Usuarios
{
    public class PersonalConfiguration : IEntityTypeConfiguration<Personal>
    {
        public void Configure(EntityTypeBuilder<Personal> builder)
        {
            builder.ToTable("Personal");

            builder.HasOne<Usuario>()      // Personal tiene un Usuario
                .WithOne()              // Usuario tiene Alumno
                .HasForeignKey<Personal>(a => a.Id)  // PK de Personal = FK a Usuario
                .OnDelete(DeleteBehavior.Restrict); // No Permite cascada
        }
    }
}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Infrastructure\Data\Configurations\Usuarios\UsuarioConfiguration.cs ---
using Microsoft.AspNetCore.Identity;
using Microsoft.EntityFrameworkCore;
using Microsoft.EntityFrameworkCore.Metadata.Builders;
using PortalCOSIE.Domain.Entities.Usuarios;

namespace PortalCOSIE.Infrastructure.Data.Configurations.Usuarios
{
    public class UsuarioConfiguration : IEntityTypeConfiguration<Usuario>
    {
        public void Configure(EntityTypeBuilder<Usuario> builder)
        {
            builder.ToTable("Usuario");
            builder.UseTptMappingStrategy();

            builder.Property(u => u.Nombre)
                .IsRequired()
                .HasMaxLength(100);

            builder.Property(u => u.ApellidoPaterno)
                .IsRequired()
                .HasMaxLength(100);

            builder.Property(u => u.ApellidoMaterno)
                .IsRequired()
                .HasMaxLength(100);

            //Conexion con IdentityUser desacoplada de la tabla Usuario
            builder.HasOne<IdentityUser>()
            .WithMany()
            .HasForeignKey(a => a.IdentityUserId);

            //builder.HasOne<Alumno>()
            //    .HasForeignKey<Alumno>(a => a.Id)
            //    .OnDelete(DeleteBehavior.Cascade);

            //builder.HasOne(u => u.Personal)
            //    .WithOne(p => p.Usuario)
            //    .HasForeignKey<Personal>(p => p.Id)
            //    .OnDelete(DeleteBehavior.Cascade);
            //;
        }
    }
}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Infrastructure\Data\Email\HtmlTemplates.cs ---
namespace PortalCOSIE.Infrastructure
{
    public static class HtmlTemplates
    {
        public static string ConfirmarCorreoHtml(string correo, string encodedToken)
        {
            return $@"
            <body style=""margin: 0; padding: 0; font-family: 'Segoe UI', sans-serif; background-color: #f6f9fc;"">
                <table role=""presentation"" border=""0"" cellpadding=""0"" cellspacing=""0"" width=""100%"">
                    <tr>
                    <td align=""center"" style=""padding: 40px 0;"">
                        <table width=""600"" cellpadding=""0"" cellspacing=""0"" style=""background-color: #ffffff; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); padding: 40px;"">
                        <tr>
                            <td align=""center"" style=""padding-bottom: 20px;"">
                            <h1 style=""margin: 0; font-size: 24px; color: #333333;"">Confirma tu correo</h1>
                            </td>
                        </tr>
                        <tr>
                            <td style=""color: #555555; font-size: 16px; line-height: 1.5;"">
                            <p style=""margin-bottom: 20px;"">
                                Para completar tu petición, por favor confirma tu correo electrónico haciendo clic en el siguiente botón:
                            </p>
                            <p style=""text-align: center; margin: 30px 0;"">
                                <a href=""https://localhost:7276/Cuenta/Confirmar?correo={correo}&token={encodedToken}"" style=""display: inline-block; background-color: #1d72b8; color: #ffffff; padding: 14px 28px; text-decoration: none; border-radius: 6px; font-weight: bold;"">
                                Confirmar cuenta
                                </a>
                            </p>
                            <p style=""margin-top: 30px; color: #888888; font-size: 14px;"">
                                Si no creaste una cuenta, puedes ignorar este correo.
                            </p>
                            </td>
                        </tr>
                        <tr>
                            <td style=""padding-top: 30px; text-align: center; font-size: 12px; color: #aaaaaa;"">
                            © {DateTime.Now.Year} - Portal COSIE.
                            </td>
                        </tr>
                        </table>
                    </td>
                    </tr>
                </table>
            </body>";
        }
        public static string RecuperarContrasenaHtml(string correo, string encodedToken)
        {
            return $@"
            <body style=""margin: 0; padding: 0; font-family: 'Segoe UI', sans-serif; background-color: #f6f9fc;"">
                <table role=""presentation"" border=""0"" cellpadding=""0"" cellspacing=""0"" width=""100%"">
                <tr>
                    <td align=""center"" style=""padding: 40px 0;"">
                    <table width=""600"" cellpadding=""0"" cellspacing=""0"" style=""background-color: #ffffff; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); padding: 40px;"">
                        <tr>
                        <td align=""center"" style=""padding-bottom: 20px;"">
                            <h1 style=""margin: 0; font-size: 24px; color: #333333;"">Restablece tu contraseña</h1>
                        </td>
                        </tr>
                        <tr>
                        <td style=""color: #555555; font-size: 16px; line-height: 1.5;"">
                            <p style=""margin-bottom: 20px;"">
                            Hemos recibido una solicitud para restablecer tu contraseña. Si realizaste esta solicitud, haz clic en el botón de abajo para continuar:
                            </p>
                            <p style=""text-align: center; margin: 30px 0;"">
                            <a href=""https://localhost:7276/Cuenta/Restablecer?correo={correo}&token={encodedToken}"" style=""display: inline-block; background-color: #1d72b8; color: #ffffff; padding: 14px 28px; text-decoration: none; border-radius: 6px; font-weight: bold;"">
                                Restablecer contraseña
                            </a>
                            </p>
                            <p style=""margin-top: 30px; color: #888888; font-size: 14px;"">
                            Si no solicitaste este cambio, puedes ignorar este correo. Tu contraseña actual permanecerá sin cambios.
                            </p>
                        </td>
                        </tr>
                        <tr>
                        <td style=""padding-top: 30px; text-align: center; font-size: 12px; color: #aaaaaa;"">
                            © {DateTime.Now.Year} - Portal COSIE.
                        </td>
                        </tr>
                    </table>
                    </td>
                </tr>
                </table>
            </body>";
        }
        public static string ContrasenaRestablecidaHtml()
        {
            return $@"
            <body style=""margin: 0; padding: 0; font-family: 'Segoe UI', sans-serif; background-color: #f6f9fc;"">
                <table role=""presentation"" border=""0"" cellpadding=""0"" cellspacing=""0"" width=""100%"">
                <tr>
                    <td align=""center"" style=""padding: 40px 0;"">
                    <table width=""600"" cellpadding=""0"" cellspacing=""0"" style=""background-color: #ffffff; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); padding: 40px;"">
                        <tr>
                        <td align=""center"" style=""padding-bottom: 20px;"">
                            <h1 style=""margin: 0; font-size: 24px; color: #333333;"">Tu contraseña ha sido cambiada con éxito</h1>
                        </td>
                        </tr>
                        <tr>
                        <td style=""color: #555555; font-size: 16px; line-height: 1.5;"">
                            <p style=""margin-bottom: 20px;"">
                                Queremos informarte que la contraseña de tu cuenta fue cambiada recientemente. Si fuiste tú quien realizó este cambio, no necesitas hacer nada más. Si no reconoces esta actividad, por favor restablece tu contraseña de inmediato.
                            </p>
                            <p style=""text-align: center; margin: 30px 0;"">
                            <a href=""https://localhost:7276/Cuenta/Recuperar"" style=""display: inline-block; background-color: #FF0000; color: #ffffff; padding: 14px 28px; text-decoration: none; border-radius: 6px; font-weight: bold;"">
                                Recuperar contraseña
                            </a>
                            </p>
                            <p style=""margin-top: 30px; color: #888888; font-size: 14px;"">
                            Por seguridad, nunca compartas tu contraseña con nadie.
                            </p>
                        </td>
                        </tr>
                        <tr>
                        <td style=""padding-top: 30px; text-align: center; font-size: 12px; color: #aaaaaa;"">
                            © {DateTime.Now.Year} - Portal COSIE.
                        </td>
                        </tr>
                    </table>
                    </td>
                </tr>
                </table>
            </body>";
        }
        public static string ActivarAccesoHtml(string rol)
        {
            return $@"
            <body style=""margin: 0; padding: 0; font-family: 'Segoe UI', sans-serif; background-color: #f6f9fc;"">
                <table role=""presentation"" border=""0"" cellpadding=""0"" cellspacing=""0"" width=""100%"">
                    <tr>
                    <td align=""center"" style=""padding: 40px 0;"">
                        <table width=""600"" cellpadding=""0"" cellspacing=""0"" style=""background-color: #ffffff; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); padding: 40px;"">
                        <tr>
                            <td align=""center"" style=""padding-bottom: 20px;"">
                            <h1 style=""margin: 0; font-size: 24px; color: #2e7d32;"">¡Bienvenido!</h1>
                            </td>
                        </tr>
                        <tr>
                            <td style=""color: #555555; font-size: 16px; line-height: 1.5;"">
                            <p style=""margin-bottom: 20px; text-align: center;"">
                                Su cuenta ha sido activada exitosamente como <strong>{rol}</strong>, ya puedes hacer uso de la plataforma.
                            </p>
                            <p style=""text-align: center; margin: 30px 0;"">
                                <a href=""https://localhost:7276/Cuenta/Ingresar"" style=""display: inline-block; background-color: #2e7d32; color: #ffffff; padding: 14px 28px; text-decoration: none; border-radius: 6px; font-weight: bold;"">
                                Iniciar sesión
                                </a>
                            </p>
                            </td>
                        </tr>
                        <tr>
                            <td style=""text-align: center; font-size: 12px; color: #aaaaaa;"">
                            © {DateTime.Now.Year} - Portal COSIE.
                            </td>
                        </tr>
                        </table>
                    </td>
                    </tr>
                </table>
            </body>";
        }
        public static string RestringirAccesoHtml(string rol)
        {
            return $@"
            <body style=""margin: 0; padding: 0; font-family: 'Segoe UI', sans-serif; background-color: #f6f9fc;"">
                <table role=""presentation"" border=""0"" cellpadding=""0"" cellspacing=""0"" width=""100%"">
                    <tr>
                    <td align=""center"" style=""padding: 40px 0;"">
                        <table width=""600"" cellpadding=""0"" cellspacing=""0"" style=""background-color: #ffffff; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); padding: 40px;"">
                        <tr>
                            <td align=""center"" style=""padding-bottom: 20px;"">
                            <h1 style=""margin: 0; font-size: 24px; color: #d32f2f;"">Restringimos su acceso como <strong>{rol}</strong></h1>
                            </td>
                        </tr>
                        <tr>
                            <td style=""color: #555555; font-size: 16px; line-height: 1.5;"">
                            <p style=""margin-bottom: 20px;"">
                                Hemos detectado actividad inusual en su cuenta y por medidas de seguridad hemos aplicado restricciones temporales.
                            </p>
                    
                            <p style=""margin-top: 30px; color: #888888; font-size: 14px;"">
                                Si considera que esto es un error, por favor responda a este correo inmediatamente.
                            </p>
                            </td>
                        </tr>
                        <tr>
                            <td style=""text-align: center; font-size: 12px; color: #aaaaaa;"">
                            © {DateTime.Now.Year} - Portal COSIE.
                            </td>
                        </tr>
                        </table>
                    </td>
                    </tr>
                </table>
            </body>";
        }
        public static string VerificarCorreoHtml(string userId, string correo, string encodedToken)
        {
            return $@"
            <body style=""margin:0; padding:0; font-family:'Segoe UI', sans-serif; background-color:#f4f6f8;"">
                <table role=""presentation"" width=""100%"" cellspacing=""0"" cellpadding=""0"" style=""background-color:#f4f6f8; padding:40px 0;"">
                    <tr>
                        <td align=""center"">
                            <table width=""600"" cellpadding=""0"" cellspacing=""0"" style=""background:#ffffff; border-radius:10px; padding:40px; box-shadow:0 3px 8px rgba(0,0,0,0.08);"">
                        
                                <tr>
                                    <td align=""center"" style=""padding-bottom:25px;"">
                                        <h1 style=""margin:0; font-size:26px; color:#2d2d2d;"">
                                            Solicitud de actualización de correo
                                        </h1>
                                    </td>
                                </tr>

                                <tr>
                                    <td style=""font-size:16px; color:#4a4a4a; line-height:1.6;"">
                                        <p>
                                            Hemos recibido una solicitud para cambiar el correo asociado a tu cuenta del 
                                            <strong>Portal COSIE</strong> a este correo (<strong>{correo}</strong>).
                                        </p>

                                        <p>
                                            Si tú realizaste esta solicitud, por favor confirma el cambio dando clic en el siguiente botón:
                                        </p>

                                        <div style=""text-align:center; margin:35px 0;"">
                                            <a href=""https://localhost:7276/Cuenta/ActualizarCorreo?id={userId}&correo={correo}&token={encodedToken}""
                                               style=""background-color:#1d72b8; color:#ffffff; padding:14px 30px; text-decoration:none; 
                                               border-radius:8px; font-size:16px; font-weight:bold; display:inline-block;"">
                                                Confirmar cambio
                                            </a>
                                        </div>

                                        <p style=""color:#777; font-size:14px;"">
                                            Si no solicitaste este cambio, puedes ignorar este mensaje.
                                            Tu cuenta seguirá vinculada a tu correo actual.
                                        </p>
                                    </td>
                                </tr>

                                <tr>
                                    <td style=""text-align:center; padding-top:35px; font-size:12px; color:#999;"">
                                        © {DateTime.Now.Year} - Portal COSIE.
                                    </td>
                                </tr>

                            </table>
                        </td>
                    </tr>
                </table>
            </body>";
        }
        public static string CorreoActualizadoHtml(string nuevoCorreo)
        {
            return $@"
            <body style=""margin:0; padding:0; font-family: 'Segoe UI', sans-serif; background-color:#f6f9fc;"">
                <table role=""presentation"" border=""0"" cellpadding=""0"" cellspacing=""0"" width=""100%"">
                    <tr>
                        <td align=""center"" style=""padding:40px 0;"">
                            <table width=""600"" cellpadding=""0"" cellspacing=""0"" 
                                   style=""background-color:#ffffff; border-radius:8px; 
                                          box-shadow:0 2px 5px rgba(0,0,0,0.05); padding:40px;"">
                        
                                <!-- Título -->
                                <tr>
                                    <td align=""center"" style=""padding-bottom:20px;"">
                                        <h1 style=""margin:0; font-size:24px; color:#333333;"">
                                            Tu correo ha sido actualizado
                                        </h1>
                                    </td>
                                </tr>

                                <!-- Contenido -->
                                <tr>
                                    <td style=""color:#555555; font-size:16px; line-height:1.6;"">
                                
                                        <p>
                                            Queremos informarte que el correo asociado a tu cuenta 
                                            ha sido actualizado correctamente.
                                        </p>

                                        <p style=""margin:20px 0; font-weight:bold; color:#1d72b8;"">
                                            Nuevo correo registrado: <span style=""color:#333333;"">{nuevoCorreo}</span>
                                        </p>

                                        <p>
                                            Si tú realizaste esta acción, no necesitas hacer nada más.
                                        </p>

                                        <p style=""margin-top:25px;"">
                                            <strong>¿No reconoces este cambio?</strong><br>
                                            Por favor contacta inmediatamente a getión escolar.
                                        </p>

                                    </td>
                                </tr>

                                <!-- Footer -->
                                <tr>
                                    <td style=""padding-top:30px; text-align:center; font-size:12px; color:#aaaaaa;"">
                                        © {DateTime.Now.Year} - Portal COSIE.
                                    </td>
                                </tr>

                            </table>
                        </td>
                    </tr>
                </table>
            </body>";
        }
        public static string CelularActualizadoHtml(string nuevoCelular)
        {
            return $@"
            <body style=""margin: 0; padding: 0; font-family: 'Segoe UI', sans-serif; background-color: #f6f9fc;"">
                <table role=""presentation"" border=""0"" cellpadding=""0"" cellspacing=""0"" width=""100%"">
                    <tr>
                        <td align=""center"" style=""padding: 40px 0;"">
                            <table width=""600"" cellpadding=""0"" cellspacing=""0"" style=""background-color: #ffffff; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); padding: 40px;"">
                    
                                <tr>
                                    <td align=""center"" style=""padding-bottom: 20px;"">
                                        <h1 style=""margin: 0; font-size: 24px; color: #333333;"">
                                            Tu número de celular ha sido actualizado
                                        </h1>
                                    </td>
                                </tr>

                                <tr>
                                    <td style=""color: #555555; font-size: 16px; line-height: 1.5; text-align: justify;"">

                                        <p style=""margin-bottom: 20px;"">
                                            Te informamos que el número de celular asociado a tu cuenta ha sido actualizado correctamente. 
                                            El nuevo número registrado es el siguiente:
                                        </p>

                                        <p style=""text-align: center; font-size: 20px; font-weight: bold; margin: 30px 0;"">
                                            {nuevoCelular}
                                        </p>

                                        <p style=""margin-top: 20px;"">
                                            Si realizaste este cambio, no necesitas hacer nada más.  
                                            Si no reconoces esta actividad, te recomendamos contactar a gestión escolar.
                                        </p>
                                    </td>
                                </tr>

                                <tr>
                                    <td style=""padding-top: 30px; text-align: center; font-size: 12px; color: #aaaaaa;"">
                                        © {DateTime.Now.Year} - Portal COSIE.
                                    </td>
                                </tr>

                            </table>
                        </td>
                    </tr>
                </table>
            </body>";
        }
        public static string ContrasenaCambiadaHtml() 
        {
            return $@"
            <body style=""margin: 0; padding: 0; font-family: 'Segoe UI', sans-serif; background-color: #f6f9fc;"">
                <table role=""presentation"" border=""0"" cellpadding=""0"" cellspacing=""0"" width=""100%"">
                    <tr>
                        <td align=""center"" style=""padding: 40px 0;"">
                            <table width=""600"" cellpadding=""0"" cellspacing=""0"" style=""background-color: #ffffff; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); padding: 40px;"">
                        
                                <tr>
                                    <td align=""center"" style=""padding-bottom: 20px;"">
                                        <h1 style=""margin: 0; font-size: 24px; color: #333333;"">
                                            Tu contraseña ha sido cambiada exitosamente
                                        </h1>
                                    </td>
                                </tr>
                                <tr>
                                    <td style=""color: #555555; font-size: 16px; line-height: 1.5;"">
                                        <p style=""margin-bottom: 20px;"">
                                            Te informamos que la contraseña de tu cuenta ha sido cambiada exitosamente. 
                                            Si fuiste tú quien realizó este cambio, no necesitas hacer nada más.
                                        </p>
                                        <p style=""margin-top: 20px;"">
                                            Si no reconoces esta actividad, te recomendamos restablecer tu contraseña de inmediato o contactar a gestión escolar.
                                        </p>
                                    </td>
                                </tr>
                                <tr>
                                    <td style=""padding-top: 30px; text-align: center; font-size: 12px; color: #aaaaaa;"">
                                        © {DateTime.Now.Year} - Portal COSIE.
                                    </td>
                                </tr>
                            </table>
                        </td>
                    </tr>
                </table>
            </body>";
        }
    }
}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Infrastructure\Data\Email\SmtpEmailSender.cs ---
using Microsoft.Extensions.Configuration;
using PortalCOSIE.Application;
using PortalCOSIE.Application.Interfaces;
using System.Net;
using System.Net.Mail;

namespace PortalCOSIE.Infrastructure.Data.Email
{
    public class SmtpEmailSender : IEmailSender
    {
        private readonly IConfiguration _config;

        public SmtpEmailSender(IConfiguration config)
        {
            _config = config;
        }

        public async Task<Result<string>> SendEmailAsync(string toEmail, string subject, string message)
        {
            var smtpHost = _config["Smtp:Host"];
            var smtpPort = _config["Smtp:Port"];
            var smtpUser = _config["Smtp:User"];
            var smtpPass = _config["Smtp:Pass"];
            var smtpFrom = _config["Smtp:From"];

            if (string.IsNullOrEmpty(smtpHost) || string.IsNullOrEmpty(smtpPort) ||
                string.IsNullOrEmpty(smtpUser) || string.IsNullOrEmpty(smtpPass) ||
                string.IsNullOrEmpty(smtpFrom))
            {
                throw new InvalidOperationException("SMTP configuration is missing or invalid.");
            }

            var smtpClient = new SmtpClient(smtpHost, int.Parse(smtpPort))
            {
                Credentials = new NetworkCredential(smtpUser, smtpPass),
                EnableSsl = true,
            };

            var fromAdress = new MailAddress(smtpFrom, "Gestión escolar");
            var toAdress = new MailAddress(toEmail);

            var mailMessage = new MailMessage(fromAdress, toAdress)
            {
                Subject = subject,
                Body = message,
                IsBodyHtml = true,
            };

            await smtpClient.SendMailAsync(mailMessage);
            return Result<string>.Success("Correo enviado correctamente");
        }
    }

}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Infrastructure\Data\Identity\DataSeeder.cs ---
using Microsoft.AspNetCore.Identity;
using Microsoft.Extensions.Configuration;

namespace PortalCOSIE.Infrastructure.Data.Identity
{
    public static class DataSeeder
    {
        public static async Task SeedIdentityAsync(UserManager<IdentityUser> userManager, IConfiguration configuration)
        {
            var adminEmail = configuration["AdminUser:Email"];
            var adminPassword = configuration["AdminUser:Password"];
            var adminUser = await userManager.FindByEmailAsync(adminEmail);

            if (adminUser == null)
            {
                adminUser = new IdentityUser
                {
                    UserName = adminEmail,
                    Email = adminEmail,
                    EmailConfirmed = true,
                    SecurityStamp = Guid.NewGuid().ToString(),
                    ConcurrencyStamp = Guid.NewGuid().ToString()
                };

                var result = await userManager.CreateAsync(adminUser, adminPassword);

                if (result.Succeeded)
                {
                    await userManager.AddToRoleAsync(adminUser, "Administrador");
                }
            }
        }
    }
}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Infrastructure\Data\Identity\SecurityService.cs ---
using PortalCOSIE.Application;
using PortalCOSIE.Application.DTO.Cuenta;
using PortalCOSIE.Application.DTO.Usuario;
using PortalCOSIE.Application.Interfaces;
using System.Net;
using Microsoft.AspNetCore.Identity;
using PortalCOSIE.Domain.Entities.Usuarios;

namespace PortalCOSIE.Infrastructure.Data.Identity
{
    public class SecurityService : ISecurityService
    {
        private readonly UserManager<IdentityUser> _userManager;
        private readonly SignInManager<IdentityUser> _signInManager;
        private readonly IUsuarioRepository _usuarioRepo;
        private readonly IEmailSender _emailSender;

        public SecurityService(
            UserManager<IdentityUser> userManager,
            SignInManager<IdentityUser> signInManager,
            IUsuarioRepository usuarioRepo,
            IEmailSender emailSender)
        {
            _userManager = userManager;
            _signInManager = signInManager;
            _usuarioRepo = usuarioRepo;
            _emailSender = emailSender;
        }

        public async Task<Result<string>> IngresarUsuarioAsync(IngresarDTO dto)
        {
            var user = await _userManager.FindByEmailAsync(dto.Correo);

            if (user == null)
            {
                throw new ApplicationException("Usuario no encontrado.");
            }

            if (!user.EmailConfirmed)
            {
                //En caso de que el ususario borre el email de confirmacion que?
                return Result<string>.Failure("Revisa tu correo electrónico para confirmar tu cuenta.");
            }

            //RememberMe false para mayor seguridad
            var login = await _signInManager.PasswordSignInAsync(user, dto.Contrasena, false, lockoutOnFailure: true);

            if (login.IsLockedOut)
            {
                var lockoutEnd = await _userManager.GetLockoutEndDateAsync(user);
                var restante = lockoutEnd.Value.UtcDateTime - DateTime.UtcNow;
                int minutos = (int)restante.TotalMinutes;
                int segundos = restante.Seconds;

                string tiempo;
                if (minutos > 0)
                    tiempo = $"{minutos} minuto{(minutos > 1 ? "s" : "")} y {segundos} segundo{(segundos != 1 ? "s" : "")}";
                else
                    tiempo = $"{segundos} segundo{(segundos != 1 ? "s" : "")}";

                return Result<string>.Failure($"Cuenta bloqueada por múltiples intentos fallidos. Intenta de nuevo en {tiempo}.");
            }
            if (login.IsNotAllowed)
            {
                return Result<string>.Failure("Ingreso no permitido");
            }

            return login.Succeeded
                ? Result<string>.Success("Inicio de sesión exitoso.")
                : Result<string>.Failure("Contraseña incorrecta.");
        }
        public async Task CerrarSesionAsync()
        {
            await _signInManager.SignOutAsync();
        }
        public async Task<Result<string>> CrearUsuarioAsync(CrearCuentaDTO dto)
        {
            if (string.IsNullOrEmpty(dto.Correo) || string.IsNullOrEmpty(dto.Contrasena) || string.IsNullOrEmpty(dto.ConfirmarContrasena))
                throw new ApplicationException("Datos incompletos para restablecer la contraseña.");
            if (await _userManager.FindByEmailAsync(dto.Correo) != null)
                throw new ApplicationException("Ya existe este usuario.");
            if (dto.ConfirmarContrasena != dto.ConfirmarContrasena)
                return Result<string>.Failure("Las contraseñas no coinciden.");

            var user = new IdentityUser
            {
                UserName = dto.Correo,
                Email = dto.Correo,
                PhoneNumber = dto.Celular
            };

            var crear = await _userManager.CreateAsync(user, dto.Contrasena);
            if (!crear.Succeeded)
            {
                var errors = crear.Errors.Select(e => e.Description);
                return Result<string>.Failure(errors);
            }

            var token = await _userManager.GenerateEmailConfirmationTokenAsync(user);
            var encodedToken = WebUtility.UrlEncode(token);

            var correo = await _emailSender.SendEmailAsync(
                dto.Correo,
                "Confirma tu cuenta",
                HtmlTemplates.ConfirmarCorreoHtml(dto.Correo, encodedToken));

            if (!correo.Succeeded)
            {
                var errors = crear.Errors.Select(e => e.Description);
                return Result<string>.Failure(errors);
            }
            return Result<string>.Success("Se ha enviado un enlace a tu correo para confirmar tu cuenta. No olvides revisar tu carpeta de spam.");
        }
        public async Task<Result<string>> ConfirmarCorreoAsync(string correo, string token)
        {
            var user = await _userManager.FindByEmailAsync(correo);
            if (user == null)
                return Result<string>.Failure("Usuario no encontrado");
            if (user.EmailConfirmed)
                return Result<string>.Failure("Ya se ha confirmado tu correo");
            if (token == null)
                return Result<string>.Failure("Token vacio");
            var result = await _userManager.ConfirmEmailAsync(user, token);
            if (!result.Succeeded)
            {
                var errors = result.Errors.Select(e => e.Description);
                return Result<string>.Failure(errors);
            }
            return Result<string>.Success("Correo confirmado");
        }
        public async Task<Result<string>> RecuperarContrasenaAsync(string correo)
        {
            if (string.IsNullOrEmpty(correo))
                throw new ApplicationException("El correo no puede ser nulo");
            var user = await _userManager.FindByEmailAsync(correo);
            if (user == null || !(await _userManager.IsEmailConfirmedAsync(user)))
                return Result<string>.Failure("No se puede recuperar la contraseña. Verifica que el correo sea correcto y esté confirmado.");
            var token = await _userManager.GeneratePasswordResetTokenAsync(user);
            var encodedToken = WebUtility.UrlEncode(token);
            var envio = await _emailSender.SendEmailAsync(
                correo,
                "Recupera tu contraseña",
                HtmlTemplates.RecuperarContrasenaHtml(correo, encodedToken)
            );

            if (!envio.Succeeded)
                return Result<string>.Failure("No se pudo enviar el correo de recuperación.");

            return Result<string>.Success("Se ha enviado un enlace para restablecer tu contraseña.");
        }
        public async Task<Result<string>> RestablecerContrasenaAsync(RestablecerDTO dto)
        {
            if (string.IsNullOrEmpty(dto.Correo) || string.IsNullOrEmpty(dto.Token) || string.IsNullOrEmpty(dto.NuevaContrasena))
                throw new ApplicationException("Datos incompletos para restablecer la contraseña.");
            var user = await _userManager.FindByEmailAsync(dto.Correo);
            if (user == null)
                throw new ApplicationException("No se encontró el usuario.");

            if (dto.NuevaContrasena != dto.ConfirmarContrasena)
                return Result<string>.Failure("Las contraseñas no coinciden.");

            var resultado = await _userManager.ResetPasswordAsync(user, dto.Token, dto.NuevaContrasena);

            if (!resultado.Succeeded)
            {
                var errors = resultado.Errors.Select(e => e.Description);
                return Result<string>.Failure(errors);
            }

            var envio = await _emailSender.SendEmailAsync(
                dto.Correo,
                "Contraseña restablecida con éxito",
                HtmlTemplates.ContrasenaRestablecidaHtml()
            );

            if (!envio.Succeeded)
                return Result<string>.Failure("No se pudo enviar el correo de aviso.");

            return Result<string>.Success("Contraseña restablecida con éxito.");
        }
        public async Task<Result<string>> CambiarContrasena(CambiarContrasenaDTO dto)
        {
            if (dto.NuevaContrasena != dto.ConfirmarContrasena)
                return Result<string>.Failure("Las contraseñas no coinciden.");
            var user = await _userManager.FindByIdAsync(dto.IdentityUserId);
            if (user == null)
                return Result<string>.Failure("Usuario no encontrado");
            var resultado = await _userManager.ChangePasswordAsync(user, dto.Contrasena, dto.NuevaContrasena);
            if (!resultado.Succeeded)
            {
                var errors = resultado.Errors.Select(e => e.Description);
                return Result<string>.Failure(errors);
            }
            var envio = await _emailSender.SendEmailAsync(
                user.Email,
                "Contraseña cambiada con éxito",
                HtmlTemplates.ContrasenaCambiadaHtml()
            );
            if (!envio.Succeeded)
                return Result<string>.Failure("No se pudo enviar el correo de aviso.");
            return Result<string>.Success("Contraseña restablecida con éxito.");
        }
        public async Task<Result<string>> VerificarCorreoAsync(string userId, string correo)
        {
            // Validaciones básicas
            if (string.IsNullOrWhiteSpace(userId))
                return Result<string>.Failure("El id no puede ser nulo o vacío");
            if (string.IsNullOrWhiteSpace(correo))
                return Result<string>.Failure("El correo no puede ser nulo o vacío");

            // Buscar usuario
            var user = await _userManager.FindByIdAsync(userId);
            if (user == null)
                return Result<string>.Failure("No se encontró el usuario a editar");

            // Si es el mismo correo -> no hacer nada
            if (user.NormalizedEmail == _userManager.NormalizeEmail(correo))
                return Result<string>.Failure("No se detectaron cambios");

            // Validar si el correo ya está en uso
            var correoExistente = await _userManager.FindByEmailAsync(correo);
            if (correoExistente != null)
                return Result<string>.Failure("Ese correo ya está en uso");

            // 2. Envio correo
            var token = await _userManager.GenerateChangeEmailTokenAsync(user, correo);
            var encodedToken = WebUtility.UrlEncode(token);
            var envio = await _emailSender.SendEmailAsync(correo, "Cambio de correo", HtmlTemplates.VerificarCorreoHtml(userId, correo, encodedToken));
            if (!envio.Succeeded)
                return Result<string>.Failure("No se pudo enviar el correo.");

            return Result<string>.Success($"Se envió una verificación a {correo}");
        }
        public async Task<Result<string>> ActualizarCorreoAsync(string id, string correo, string token)
        {
            // 1. Validaciones
            if (string.IsNullOrEmpty(correo))
                return Result<string>.Failure("El nuevo correo no puede ser nulo o vacio");
            var user = await _userManager.FindByIdAsync(id);
            if (user == null)
                return Result<string>.Failure("Usuario no encontrado");
            string correoViejo = user.Email;

            var emailResult = await _userManager.ChangeEmailAsync(user, correo, token);
            if (!emailResult.Succeeded)
                return Result<string>.Failure(string.Join(", ", emailResult.Errors.Select(e => e.Description)));

            var nameResult = await _userManager.SetUserNameAsync(user, correo);
            if (!nameResult.Succeeded)
                return Result<string>.Failure($"Error al actualizar nombre de usuario: {string.Join(", ", nameResult.Errors.Select(e => e.Description))}");

            var envio = await _emailSender.SendEmailAsync(correoViejo, "Correo actualizado", HtmlTemplates.CorreoActualizadoHtml(correo));
            if (!envio.Succeeded)
                return Result<string>.Failure("No se pudo enviar el correo.");

            return Result<string>.Success("Se actualizó el correo con éxito");
        }
        public async Task<Result<string>> ActualizarCelularAsync(string userId, string celular)
        {
            if (string.IsNullOrEmpty(userId))
                throw new ApplicationException("El id no puede ser nulo o vacio");
            if (string.IsNullOrEmpty(celular))
                throw new ApplicationException("El nuevo celular no puede ser nulo o vacio");

            var user = await _userManager.FindByIdAsync(userId);
            if (user == null)
                return Result<string>.Failure("Usuario no encontrado");
            if (user.PhoneNumber == celular)
                return Result<string>.Failure("No se detectaron cambios");

            var token = await _userManager.GenerateChangePhoneNumberTokenAsync(user, celular);
            var result = await _userManager.ChangePhoneNumberAsync(user, celular, token);
            if (!result.Succeeded)
                return Result<string>.Failure($"Error al actualizar celular: {string.Join(", ", result.Errors.Select(e => e.Description))}");
            var envio = await _emailSender.SendEmailAsync(user.Email, "Celular actualizado", HtmlTemplates.CelularActualizadoHtml(celular));
            if (!envio.Succeeded)
                return Result<string>.Failure("No se pudo enviar el correo.");
            return Result<string>.Success("Celular actualizado con éxito");
        }
        public async Task<Result<string>> ToggleRol(string userId, string rol)
        {
            if (string.IsNullOrWhiteSpace(userId))
                return Result<string>.Failure("ID de usuario no válido");
            if (string.IsNullOrWhiteSpace(rol))
                return Result<string>.Failure("Nombre de rol no válido");

            // Roles válidos permitidos
            var validRoles = new[] { "Alumno", "Personal" };
            if (!validRoles.Contains(rol))
                return Result<string>.Failure($"Rol '{rol}' no es válido");

            // Obtener usuario
            var user = await _userManager.FindByIdAsync(userId);
            if (user == null)
                return Result<string>.Failure("Usuario no encontrado");

            // Verificar si el usuario tiene el rol actualmente
            var hasRole = await _userManager.IsInRoleAsync(user, rol);
            IdentityResult result;

            if (hasRole)
            {
                // Si tiene el rol, lo removemos (pasa a "Inactivo")
                result = await _userManager.RemoveFromRoleAsync(user, rol);

                if (!result.Succeeded)
                {
                    return Result<string>.Failure($"Error al desactivar usuario: {string.Join(", ", result.Errors.Select(e => e.Description))}");
                }

                await _emailSender.SendEmailAsync(user.Email, "Acceso restringido", HtmlTemplates.RestringirAccesoHtml(rol));
                return Result<string>.Success("Usuario marcado como Inactivo correctamente");
            }
            else
            {
                // Si no tiene el rol, primero removemos cualquier rol conflictivo del mismo tipo
                var currentRoles = await _userManager.GetRolesAsync(user);
                var conflictingRoles = currentRoles.Where(r => validRoles.Contains(r)).ToList();

                // Remover roles conflictivos si existen
                if (conflictingRoles.Any())
                {
                    var removeResult = await _userManager.RemoveFromRolesAsync(user, conflictingRoles);
                    if (!removeResult.Succeeded)
                    {
                        return Result<string>.Failure($"Error al remover roles existentes: {string.Join(", ", removeResult.Errors.Select(e => e.Description))}");
                    }
                }

                // Asignar el nuevo rol
                result = await _userManager.AddToRoleAsync(user, rol);

                if (!result.Succeeded)
                {
                    return Result<string>.Failure($"Error al asignar rol: {string.Join(", ", result.Errors.Select(e => e.Description))}");
                }

                await _emailSender.SendEmailAsync(user.Email, "Acceso activado", HtmlTemplates.ActivarAccesoHtml(rol));
                return Result<string>.Success($"Rol {rol} asignado correctamente");
            }
        }
        public async Task<IEnumerable<AlumnoCompletoDTO>> ListarAlumnos()
        {
            var alumnos = await _usuarioRepo.ListarAlumnoConCarrera();
            var alumnosDTO = new List<AlumnoCompletoDTO>();

            foreach (var alumno in alumnos)
            {
                var identityUser = await _userManager.FindByIdAsync(alumno.IdentityUserId);
                if (identityUser == null) continue;

                var roles = await _userManager.GetRolesAsync(identityUser);

                alumnosDTO.Add(new AlumnoCompletoDTO
                {
                    IdentityUserId = identityUser.Id,
                    NumeroBoleta = alumno?.NumeroBoleta ?? "N/A",
                    Nombre = alumno.Nombre,
                    ApellidoPaterno = alumno.ApellidoPaterno,
                    ApellidoMaterno = alumno.ApellidoMaterno,
                    Carrera = alumno.Carrera,
                    PeriodoIngreso = alumno.PeriodoIngreso,
                    Correo = identityUser.Email,
                    Celular = identityUser.PhoneNumber,
                    Rol = roles.FirstOrDefault()
                });
            }
            return alumnosDTO;
        }
        public async Task<IEnumerable<PersonalCompletoDTO>> ListarPersonal()
        {
            var usuarios = await _usuarioRepo.ListarConPersonal();

            var personalDTO = new List<PersonalCompletoDTO>();

            foreach (var usuario in usuarios)
            {
                var identityUser = await _userManager.FindByIdAsync(usuario.IdentityUserId);
                if (identityUser == null) continue;

                var roles = await _userManager.GetRolesAsync(identityUser);

                personalDTO.Add(new PersonalCompletoDTO
                {
                    IdentityUserId = identityUser.Id,
                    Nombre = usuario.Nombre,
                    ApellidoPaterno = usuario.ApellidoPaterno,
                    ApellidoMaterno = usuario.ApellidoMaterno,
                    Correo = identityUser.Email,
                    Rol = roles.FirstOrDefault()
                });
            }
            return personalDTO;
        }
        public async Task<AlumnoCompletoDTO?> BuscarAlumnoCompleto(string identityUserId)
        {
            if (string.IsNullOrWhiteSpace(identityUserId))
                throw new ArgumentException("El ID del usuario es obligatorio", nameof(identityUserId));

            var alumno = await _usuarioRepo.BuscarAlumnoConCarrera(identityUserId)
                           ?? throw new ApplicationException("No se encontró el usuario");

            // Obtener IdentityUser para el celular
            var identityUser = await _userManager.FindByIdAsync(identityUserId)
                               ?? throw new ApplicationException("No se encontró el IdentityUser");

            return new AlumnoCompletoDTO
            {
                IdentityUserId = identityUserId,
                Nombre = alumno.Nombre,
                ApellidoPaterno = alumno.ApellidoPaterno,
                ApellidoMaterno = alumno.ApellidoMaterno,
                NumeroBoleta = alumno.NumeroBoleta,
                Correo = identityUser.Email,
                CorreoConfirmado = identityUser.EmailConfirmed,
                PeriodoIngreso = alumno.PeriodoIngreso,
                Carrera = alumno.Carrera,
                Celular = identityUser.PhoneNumber
            };
        }

    }
}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Infrastructure\IoC\DependencyInjection.cs ---
using Microsoft.EntityFrameworkCore;
using Microsoft.Extensions.Configuration;
using Microsoft.Extensions.DependencyInjection;
using PortalCOSIE.Domain.Entities.Usuarios;
using PortalCOSIE.Domain.Entities.Tramites;
using PortalCOSIE.Domain.Interfaces;
using PortalCOSIE.Application;
using PortalCOSIE.Application.Interfaces;
using PortalCOSIE.Application.Services;
using PortalCOSIE.Infrastructure.Data;
using PortalCOSIE.Infrastructure.Data.Email;
using PortalCOSIE.Infrastructure.Data.Identity;
using PortalCOSIE.Infrastructure.Repositories;
using Infrastructure.Data;
using PortalCOSIE.Domain.Entities.Carreras;
using PortalCOSIE.Domain.Entities.Calendario;
using PortalCOSIE.Domain.Entities.Bitacoras;

namespace PortalCOSIE.Infrastructure.IoC
{
    public static class DependencyInjection
    {
        public static IServiceCollection AddInfrastructure(this IServiceCollection services, IConfiguration configuration)
        {
            services.AddScoped<AuditInterceptor>();
            services.AddDbContext<AppDbContext>((serviceProvider, options) =>
            {
                var auditInterceptor = serviceProvider.GetRequiredService<AuditInterceptor>();

                options.UseSqlServer(
                    configuration.GetConnectionString("DefaultConnection"),
                    b => b.MigrationsAssembly(typeof(AppDbContext).Assembly.FullName))
                    .AddInterceptors(auditInterceptor);
            });

            //Servicios Infraestructura
            services.AddScoped<ISecurityService, SecurityService>();
            services.AddScoped<IEmailSender, SmtpEmailSender>();

            //Servicios Aplicacion
            services.AddScoped(typeof(ICatalogoService<>), typeof(CatalogoService<>));

            services.AddScoped<IUsuarioService, UsuarioService>();
            services.AddScoped<ITramiteService, TramiteService>();
            services.AddScoped<IPeriodosService, PeriodosService>();
            services.AddScoped<ICarreraService, CarreraService>();
            services.AddScoped<IBitacoraService, BitacoraService>();

            //Repositorios
            services.AddScoped(typeof(IBaseRepository<>), typeof(BaseRepository<>));
            services.AddScoped<IUnitOfWork, UnitOfWork>();

            services.AddScoped<IUsuarioRepository, UsuarioRepository>();
            services.AddScoped<IBitacoraRepository, BitacoraRepository>();
            services.AddScoped<ISesionRepository, SesionRepository>();
            services.AddScoped<ICarreraRepository, CarreraRepository>();
            services.AddScoped<ITramiteRepository, TramiteRepository>();
            services.AddScoped<IDocumentoRepository, DocumentoRepository>();

            return services;
        }
    }
}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Infrastructure\Migrations\20251129200459_NuevaBse.cs ---
using System;
using Microsoft.EntityFrameworkCore.Migrations;

#nullable disable

#pragma warning disable CA1814 // Prefer jagged arrays over multidimensional

namespace PortalCOSIE.Infrastructure.Migrations
{
    /// <inheritdoc />
    public partial class NuevaBse : Migration
    {
        /// <inheritdoc />
        protected override void Up(MigrationBuilder migrationBuilder)
        {
            migrationBuilder.CreateTable(
                name: "AspNetRoles",
                columns: table => new
                {
                    Id = table.Column<string>(type: "nvarchar(450)", nullable: false),
                    Name = table.Column<string>(type: "nvarchar(256)", maxLength: 256, nullable: true),
                    NormalizedName = table.Column<string>(type: "nvarchar(256)", maxLength: 256, nullable: true),
                    ConcurrencyStamp = table.Column<string>(type: "nvarchar(max)", nullable: true)
                },
                constraints: table =>
                {
                    table.PrimaryKey("PK_AspNetRoles", x => x.Id);
                });

            migrationBuilder.CreateTable(
                name: "AspNetUsers",
                columns: table => new
                {
                    Id = table.Column<string>(type: "nvarchar(450)", nullable: false),
                    UserName = table.Column<string>(type: "nvarchar(256)", maxLength: 256, nullable: true),
                    NormalizedUserName = table.Column<string>(type: "nvarchar(256)", maxLength: 256, nullable: true),
                    Email = table.Column<string>(type: "nvarchar(256)", maxLength: 256, nullable: true),
                    NormalizedEmail = table.Column<string>(type: "nvarchar(256)", maxLength: 256, nullable: true),
                    EmailConfirmed = table.Column<bool>(type: "bit", nullable: false),
                    PasswordHash = table.Column<string>(type: "nvarchar(max)", nullable: true),
                    SecurityStamp = table.Column<string>(type: "nvarchar(max)", nullable: true),
                    ConcurrencyStamp = table.Column<string>(type: "nvarchar(max)", nullable: true),
                    PhoneNumber = table.Column<string>(type: "nvarchar(max)", nullable: true),
                    PhoneNumberConfirmed = table.Column<bool>(type: "bit", nullable: false),
                    TwoFactorEnabled = table.Column<bool>(type: "bit", nullable: false),
                    LockoutEnd = table.Column<DateTimeOffset>(type: "datetimeoffset", nullable: true),
                    LockoutEnabled = table.Column<bool>(type: "bit", nullable: false),
                    AccessFailedCount = table.Column<int>(type: "int", nullable: false)
                },
                constraints: table =>
                {
                    table.PrimaryKey("PK_AspNetUsers", x => x.Id);
                });

            migrationBuilder.CreateTable(
                name: "Carrera",
                columns: table => new
                {
                    Id = table.Column<int>(type: "int", nullable: false)
                        .Annotation("SqlServer:Identity", "1, 1"),
                    Nombre = table.Column<string>(type: "nvarchar(100)", maxLength: 100, nullable: false),
                    IsDeleted = table.Column<bool>(type: "bit", nullable: false)
                },
                constraints: table =>
                {
                    table.PrimaryKey("PK_Carrera", x => x.Id);
                });

            migrationBuilder.CreateTable(
                name: "EstadoDocumento",
                columns: table => new
                {
                    Id = table.Column<int>(type: "int", nullable: false)
                        .Annotation("SqlServer:Identity", "1, 1"),
                    IsDeleted = table.Column<bool>(type: "bit", nullable: false),
                    Nombre = table.Column<string>(type: "nvarchar(100)", maxLength: 100, nullable: false)
                },
                constraints: table =>
                {
                    table.PrimaryKey("PK_EstadoDocumento", x => x.Id);
                });

            migrationBuilder.CreateTable(
                name: "EstadoTramite",
                columns: table => new
                {
                    Id = table.Column<int>(type: "int", nullable: false)
                        .Annotation("SqlServer:Identity", "1, 1"),
                    IsDeleted = table.Column<bool>(type: "bit", nullable: false),
                    Nombre = table.Column<string>(type: "nvarchar(100)", maxLength: 100, nullable: false)
                },
                constraints: table =>
                {
                    table.PrimaryKey("PK_EstadoTramite", x => x.Id);
                });

            migrationBuilder.CreateTable(
                name: "PeriodoConfig",
                columns: table => new
                {
                    Id = table.Column<int>(type: "int", nullable: false)
                        .Annotation("SqlServer:Identity", "1, 1"),
                    AnioInicio = table.Column<int>(type: "int", maxLength: 4, nullable: false),
                    PeriodoInicio = table.Column<int>(type: "int", maxLength: 1, nullable: false),
                    AnioFin = table.Column<int>(type: "int", maxLength: 4, nullable: false),
                    PeriodoFin = table.Column<int>(type: "int", maxLength: 1, nullable: false),
                    IsDeleted = table.Column<bool>(type: "bit", nullable: false)
                },
                constraints: table =>
                {
                    table.PrimaryKey("PK_PeriodoConfig", x => x.Id);
                });

            migrationBuilder.CreateTable(
                name: "SesionCOSIE",
                columns: table => new
                {
                    Id = table.Column<int>(type: "int", nullable: false)
                        .Annotation("SqlServer:Identity", "1, 1"),
                    NumeroSesion = table.Column<string>(type: "nvarchar(50)", maxLength: 50, nullable: false),
                    FechaSesion = table.Column<DateTime>(type: "datetime2", nullable: true),
                    IsDeleted = table.Column<bool>(type: "bit", nullable: false)
                },
                constraints: table =>
                {
                    table.PrimaryKey("PK_SesionCOSIE", x => x.Id);
                });

            migrationBuilder.CreateTable(
                name: "TipoTramite",
                columns: table => new
                {
                    Id = table.Column<int>(type: "int", nullable: false)
                        .Annotation("SqlServer:Identity", "1, 1"),
                    IsDeleted = table.Column<bool>(type: "bit", nullable: false),
                    Nombre = table.Column<string>(type: "nvarchar(100)", maxLength: 100, nullable: false)
                },
                constraints: table =>
                {
                    table.PrimaryKey("PK_TipoTramite", x => x.Id);
                });

            migrationBuilder.CreateTable(
                name: "AspNetRoleClaims",
                columns: table => new
                {
                    Id = table.Column<int>(type: "int", nullable: false)
                        .Annotation("SqlServer:Identity", "1, 1"),
                    RoleId = table.Column<string>(type: "nvarchar(450)", nullable: false),
                    ClaimType = table.Column<string>(type: "nvarchar(max)", nullable: true),
                    ClaimValue = table.Column<string>(type: "nvarchar(max)", nullable: true)
                },
                constraints: table =>
                {
                    table.PrimaryKey("PK_AspNetRoleClaims", x => x.Id);
                    table.ForeignKey(
                        name: "FK_AspNetRoleClaims_AspNetRoles_RoleId",
                        column: x => x.RoleId,
                        principalTable: "AspNetRoles",
                        principalColumn: "Id",
                        onDelete: ReferentialAction.Cascade);
                });

            migrationBuilder.CreateTable(
                name: "AspNetUserClaims",
                columns: table => new
                {
                    Id = table.Column<int>(type: "int", nullable: false)
                        .Annotation("SqlServer:Identity", "1, 1"),
                    UserId = table.Column<string>(type: "nvarchar(450)", nullable: false),
                    ClaimType = table.Column<string>(type: "nvarchar(max)", nullable: true),
                    ClaimValue = table.Column<string>(type: "nvarchar(max)", nullable: true)
                },
                constraints: table =>
                {
                    table.PrimaryKey("PK_AspNetUserClaims", x => x.Id);
                    table.ForeignKey(
                        name: "FK_AspNetUserClaims_AspNetUsers_UserId",
                        column: x => x.UserId,
                        principalTable: "AspNetUsers",
                        principalColumn: "Id",
                        onDelete: ReferentialAction.Cascade);
                });

            migrationBuilder.CreateTable(
                name: "AspNetUserLogins",
                columns: table => new
                {
                    LoginProvider = table.Column<string>(type: "nvarchar(450)", nullable: false),
                    ProviderKey = table.Column<string>(type: "nvarchar(450)", nullable: false),
                    ProviderDisplayName = table.Column<string>(type: "nvarchar(max)", nullable: true),
                    UserId = table.Column<string>(type: "nvarchar(450)", nullable: false)
                },
                constraints: table =>
                {
                    table.PrimaryKey("PK_AspNetUserLogins", x => new { x.LoginProvider, x.ProviderKey });
                    table.ForeignKey(
                        name: "FK_AspNetUserLogins_AspNetUsers_UserId",
                        column: x => x.UserId,
                        principalTable: "AspNetUsers",
                        principalColumn: "Id",
                        onDelete: ReferentialAction.Cascade);
                });

            migrationBuilder.CreateTable(
                name: "AspNetUserRoles",
                columns: table => new
                {
                    UserId = table.Column<string>(type: "nvarchar(450)", nullable: false),
                    RoleId = table.Column<string>(type: "nvarchar(450)", nullable: false)
                },
                constraints: table =>
                {
                    table.PrimaryKey("PK_AspNetUserRoles", x => new { x.UserId, x.RoleId });
                    table.ForeignKey(
                        name: "FK_AspNetUserRoles_AspNetRoles_RoleId",
                        column: x => x.RoleId,
                        principalTable: "AspNetRoles",
                        principalColumn: "Id",
                        onDelete: ReferentialAction.Cascade);
                    table.ForeignKey(
                        name: "FK_AspNetUserRoles_AspNetUsers_UserId",
                        column: x => x.UserId,
                        principalTable: "AspNetUsers",
                        principalColumn: "Id",
                        onDelete: ReferentialAction.Cascade);
                });

            migrationBuilder.CreateTable(
                name: "AspNetUserTokens",
                columns: table => new
                {
                    UserId = table.Column<string>(type: "nvarchar(450)", nullable: false),
                    LoginProvider = table.Column<string>(type: "nvarchar(450)", nullable: false),
                    Name = table.Column<string>(type: "nvarchar(450)", nullable: false),
                    Value = table.Column<string>(type: "nvarchar(max)", nullable: true)
                },
                constraints: table =>
                {
                    table.PrimaryKey("PK_AspNetUserTokens", x => new { x.UserId, x.LoginProvider, x.Name });
                    table.ForeignKey(
                        name: "FK_AspNetUserTokens_AspNetUsers_UserId",
                        column: x => x.UserId,
                        principalTable: "AspNetUsers",
                        principalColumn: "Id",
                        onDelete: ReferentialAction.Cascade);
                });

            migrationBuilder.CreateTable(
                name: "Bitacora",
                columns: table => new
                {
                    Id = table.Column<int>(type: "int", nullable: false)
                        .Annotation("SqlServer:Identity", "1, 1"),
                    Accion = table.Column<string>(type: "nvarchar(max)", nullable: false),
                    Entidad = table.Column<string>(type: "nvarchar(max)", nullable: false),
                    EntidadId = table.Column<string>(type: "nvarchar(max)", nullable: false),
                    ValorNuevo = table.Column<string>(type: "nvarchar(max)", nullable: true),
                    IdentityUserId = table.Column<string>(type: "nvarchar(450)", nullable: true),
                    IpAddress = table.Column<string>(type: "nvarchar(max)", nullable: true),
                    UserAgent = table.Column<string>(type: "nvarchar(max)", nullable: true),
                    FechaRegistro = table.Column<DateTime>(type: "datetime2", nullable: false),
                    IsDeleted = table.Column<bool>(type: "bit", nullable: false)
                },
                constraints: table =>
                {
                    table.PrimaryKey("PK_Bitacora", x => x.Id);
                    table.ForeignKey(
                        name: "FK_Bitacora_AspNetUsers_IdentityUserId",
                        column: x => x.IdentityUserId,
                        principalTable: "AspNetUsers",
                        principalColumn: "Id");
                });

            migrationBuilder.CreateTable(
                name: "Usuario",
                columns: table => new
                {
                    Id = table.Column<int>(type: "int", nullable: false)
                        .Annotation("SqlServer:Identity", "1, 1"),
                    IdentityUserId = table.Column<string>(type: "nvarchar(450)", nullable: false),
                    Nombre = table.Column<string>(type: "nvarchar(100)", maxLength: 100, nullable: false),
                    ApellidoPaterno = table.Column<string>(type: "nvarchar(100)", maxLength: 100, nullable: false),
                    ApellidoMaterno = table.Column<string>(type: "nvarchar(100)", maxLength: 100, nullable: false),
                    IsDeleted = table.Column<bool>(type: "bit", nullable: false)
                },
                constraints: table =>
                {
                    table.PrimaryKey("PK_Usuario", x => x.Id);
                    table.ForeignKey(
                        name: "FK_Usuario_AspNetUsers_IdentityUserId",
                        column: x => x.IdentityUserId,
                        principalTable: "AspNetUsers",
                        principalColumn: "Id",
                        onDelete: ReferentialAction.Cascade);
                });

            migrationBuilder.CreateTable(
                name: "UnidadAprendizaje",
                columns: table => new
                {
                    Id = table.Column<int>(type: "int", nullable: false)
                        .Annotation("SqlServer:Identity", "1, 1"),
                    Nombre = table.Column<string>(type: "nvarchar(100)", maxLength: 100, nullable: false),
                    CarreraId = table.Column<int>(type: "int", nullable: false),
                    Semestre = table.Column<int>(type: "int", nullable: false),
                    IsDeleted = table.Column<bool>(type: "bit", nullable: false)
                },
                constraints: table =>
                {
                    table.PrimaryKey("PK_UnidadAprendizaje", x => x.Id);
                    table.ForeignKey(
                        name: "FK_UnidadAprendizaje_Carrera_CarreraId",
                        column: x => x.CarreraId,
                        principalTable: "Carrera",
                        principalColumn: "Id",
                        onDelete: ReferentialAction.Cascade);
                });

            migrationBuilder.CreateTable(
                name: "FechaRecepcion",
                columns: table => new
                {
                    Id = table.Column<int>(type: "int", nullable: false)
                        .Annotation("SqlServer:Identity", "1, 1"),
                    SesionId = table.Column<int>(type: "int", nullable: false),
                    Fecha = table.Column<DateTime>(type: "datetime2", nullable: false),
                    IsDeleted = table.Column<bool>(type: "bit", nullable: false)
                },
                constraints: table =>
                {
                    table.PrimaryKey("PK_FechaRecepcion", x => x.Id);
                    table.ForeignKey(
                        name: "FK_FechaRecepcion_SesionCOSIE_SesionId",
                        column: x => x.SesionId,
                        principalTable: "SesionCOSIE",
                        principalColumn: "Id",
                        onDelete: ReferentialAction.Cascade);
                });

            migrationBuilder.CreateTable(
                name: "Alumno",
                columns: table => new
                {
                    Id = table.Column<int>(type: "int", nullable: false),
                    NumeroBoleta = table.Column<string>(type: "nvarchar(10)", maxLength: 10, nullable: false),
                    PeriodoIngreso = table.Column<string>(type: "nvarchar(max)", nullable: false),
                    CarreraId = table.Column<int>(type: "int", nullable: false)
                },
                constraints: table =>
                {
                    table.PrimaryKey("PK_Alumno", x => x.Id);
                    table.ForeignKey(
                        name: "FK_Alumno_Carrera_CarreraId",
                        column: x => x.CarreraId,
                        principalTable: "Carrera",
                        principalColumn: "Id",
                        onDelete: ReferentialAction.Restrict);
                    table.ForeignKey(
                        name: "FK_Alumno_Usuario_Id",
                        column: x => x.Id,
                        principalTable: "Usuario",
                        principalColumn: "Id",
                        onDelete: ReferentialAction.Restrict);
                });

            migrationBuilder.CreateTable(
                name: "Personal",
                columns: table => new
                {
                    Id = table.Column<int>(type: "int", nullable: false),
                    IdPersonal = table.Column<string>(type: "nvarchar(max)", nullable: false),
                    Area = table.Column<string>(type: "nvarchar(max)", nullable: false),
                    UsuarioId = table.Column<int>(type: "int", nullable: false)
                },
                constraints: table =>
                {
                    table.PrimaryKey("PK_Personal", x => x.Id);
                    table.ForeignKey(
                        name: "FK_Personal_Usuario_Id",
                        column: x => x.Id,
                        principalTable: "Usuario",
                        principalColumn: "Id",
                        onDelete: ReferentialAction.Restrict);
                    table.ForeignKey(
                        name: "FK_Personal_Usuario_UsuarioId",
                        column: x => x.UsuarioId,
                        principalTable: "Usuario",
                        principalColumn: "Id",
                        onDelete: ReferentialAction.Cascade);
                });

            migrationBuilder.CreateTable(
                name: "Tramite",
                columns: table => new
                {
                    Id = table.Column<int>(type: "int", nullable: false)
                        .Annotation("SqlServer:Identity", "1, 1"),
                    EstadoTramiteId = table.Column<int>(type: "int", nullable: false),
                    AlumnoId = table.Column<int>(type: "int", nullable: false),
                    PersonalId = table.Column<int>(type: "int", nullable: true),
                    TipoTramiteId = table.Column<int>(type: "int", nullable: false),
                    FechaSolicitud = table.Column<DateTime>(type: "datetime2", nullable: false),
                    FechaConclusion = table.Column<DateTime>(type: "datetime2", nullable: true),
                    IsDeleted = table.Column<bool>(type: "bit", nullable: false)
                },
                constraints: table =>
                {
                    table.PrimaryKey("PK_Tramite", x => x.Id);
                    table.ForeignKey(
                        name: "FK_Tramite_Alumno_AlumnoId",
                        column: x => x.AlumnoId,
                        principalTable: "Alumno",
                        principalColumn: "Id",
                        onDelete: ReferentialAction.Restrict);
                    table.ForeignKey(
                        name: "FK_Tramite_EstadoTramite_EstadoTramiteId",
                        column: x => x.EstadoTramiteId,
                        principalTable: "EstadoTramite",
                        principalColumn: "Id",
                        onDelete: ReferentialAction.Cascade);
                    table.ForeignKey(
                        name: "FK_Tramite_Personal_PersonalId",
                        column: x => x.PersonalId,
                        principalTable: "Personal",
                        principalColumn: "Id",
                        onDelete: ReferentialAction.Restrict);
                    table.ForeignKey(
                        name: "FK_Tramite_TipoTramite_TipoTramiteId",
                        column: x => x.TipoTramiteId,
                        principalTable: "TipoTramite",
                        principalColumn: "Id",
                        onDelete: ReferentialAction.Cascade);
                });

            migrationBuilder.CreateTable(
                name: "DetalleCTCE",
                columns: table => new
                {
                    Id = table.Column<int>(type: "int", nullable: false),
                    Situacion = table.Column<string>(type: "nvarchar(1000)", maxLength: 1000, nullable: false),
                    TieneDictamenesAnteriores = table.Column<bool>(type: "bit", nullable: false)
                },
                constraints: table =>
                {
                    table.PrimaryKey("PK_DetalleCTCE", x => x.Id);
                    table.ForeignKey(
                        name: "FK_DetalleCTCE_Tramite_Id",
                        column: x => x.Id,
                        principalTable: "Tramite",
                        principalColumn: "Id",
                        onDelete: ReferentialAction.Cascade);
                });

            migrationBuilder.CreateTable(
                name: "Documento",
                columns: table => new
                {
                    Id = table.Column<int>(type: "int", nullable: false)
                        .Annotation("SqlServer:Identity", "1, 1"),
                    Nombre = table.Column<string>(type: "nvarchar(200)", maxLength: 200, nullable: false),
                    Observaciones = table.Column<string>(type: "nvarchar(1000)", maxLength: 1000, nullable: false),
                    TramiteId = table.Column<int>(type: "int", nullable: false),
                    EstadoDocumentoId = table.Column<int>(type: "int", nullable: false),
                    Contenido = table.Column<byte[]>(type: "varbinary(max)", nullable: false),
                    IsDeleted = table.Column<bool>(type: "bit", nullable: false)
                },
                constraints: table =>
                {
                    table.PrimaryKey("PK_Documento", x => x.Id);
                    table.ForeignKey(
                        name: "FK_Documento_EstadoDocumento_EstadoDocumentoId",
                        column: x => x.EstadoDocumentoId,
                        principalTable: "EstadoDocumento",
                        principalColumn: "Id",
                        onDelete: ReferentialAction.Cascade);
                    table.ForeignKey(
                        name: "FK_Documento_Tramite_TramiteId",
                        column: x => x.TramiteId,
                        principalTable: "Tramite",
                        principalColumn: "Id",
                        onDelete: ReferentialAction.Restrict);
                });

            migrationBuilder.CreateTable(
                name: "UnidadReprobada",
                columns: table => new
                {
                    Id = table.Column<int>(type: "int", nullable: false)
                        .Annotation("SqlServer:Identity", "1, 1"),
                    DetalleCTCEId = table.Column<int>(type: "int", nullable: false),
                    UnidadAprendizajeId = table.Column<int>(type: "int", nullable: false),
                    PeriodoCurso = table.Column<string>(type: "nvarchar(max)", nullable: false),
                    PeriodoRecurse = table.Column<string>(type: "nvarchar(max)", nullable: false),
                    IsDeleted = table.Column<bool>(type: "bit", nullable: false)
                },
                constraints: table =>
                {
                    table.PrimaryKey("PK_UnidadReprobada", x => x.Id);
                    table.ForeignKey(
                        name: "FK_UnidadReprobada_DetalleCTCE_DetalleCTCEId",
                        column: x => x.DetalleCTCEId,
                        principalTable: "DetalleCTCE",
                        principalColumn: "Id",
                        onDelete: ReferentialAction.Cascade);
                    table.ForeignKey(
                        name: "FK_UnidadReprobada_UnidadAprendizaje_UnidadAprendizajeId",
                        column: x => x.UnidadAprendizajeId,
                        principalTable: "UnidadAprendizaje",
                        principalColumn: "Id",
                        onDelete: ReferentialAction.Cascade);
                });

            migrationBuilder.InsertData(
                table: "AspNetRoles",
                columns: new[] { "Id", "ConcurrencyStamp", "Name", "NormalizedName" },
                values: new object[,]
                {
                    { "11111111-1111-1111-1111-111111111111", null, "Administrador", "ADMINISTRADOR" },
                    { "22222222-2222-2222-2222-222222222222", null, "Personal", "PERSONAL" },
                    { "33333333-3333-3333-3333-333333333333", null, "Alumno", "ALUMNO" }
                });

            migrationBuilder.InsertData(
                table: "Carrera",
                columns: new[] { "Id", "IsDeleted", "Nombre" },
                values: new object[,]
                {
                    { 1, false, "Mecatrónica" },
                    { 2, false, "Telemática" },
                    { 3, false, "Biónica" },
                    { 4, false, "Energía" },
                    { 5, false, "ISISA" }
                });

            migrationBuilder.InsertData(
                table: "EstadoDocumento",
                columns: new[] { "Id", "IsDeleted", "Nombre" },
                values: new object[,]
                {
                    { 1, false, "En Revisión" },
                    { 2, false, "Validado" },
                    { 3, false, "Con errores" },
                    { 4, false, "Documento incorrecto" }
                });

            migrationBuilder.InsertData(
                table: "EstadoTramite",
                columns: new[] { "Id", "IsDeleted", "Nombre" },
                values: new object[,]
                {
                    { 1, false, "Solicitado" },
                    { 2, false, "En revision" },
                    { 3, false, "Documentos pendientes" },
                    { 4, false, "Concluido" },
                    { 5, false, "Cancelado" }
                });

            migrationBuilder.InsertData(
                table: "PeriodoConfig",
                columns: new[] { "Id", "AnioFin", "AnioInicio", "IsDeleted", "PeriodoFin", "PeriodoInicio" },
                values: new object[] { 1, 2026, 1997, false, 2, 1 });

            migrationBuilder.InsertData(
                table: "SesionCOSIE",
                columns: new[] { "Id", "FechaSesion", "IsDeleted", "NumeroSesion" },
                values: new object[,]
                {
                    { 1, new DateTime(2025, 12, 20, 0, 0, 0, 0, DateTimeKind.Unspecified), false, "PRIMERA" },
                    { 2, new DateTime(2025, 12, 10, 0, 0, 0, 0, DateTimeKind.Unspecified), false, "SEGUNDA" },
                    { 3, new DateTime(2025, 12, 2, 0, 0, 0, 0, DateTimeKind.Unspecified), false, "TERCERA" }
                });

            migrationBuilder.InsertData(
                table: "TipoTramite",
                columns: new[] { "Id", "IsDeleted", "Nombre" },
                values: new object[,]
                {
                    { 1, false, "Dictamen interno (CTCE)" },
                    { 2, false, "Dictamen externo (CGC)" }
                });

            migrationBuilder.InsertData(
                table: "UnidadAprendizaje",
                columns: new[] { "Id", "CarreraId", "IsDeleted", "Nombre", "Semestre" },
                values: new object[,]
                {
                    { 1, 1, false, "ALGEBRA LINEAL Y NUMEROS COMPLEJOS", 1 },
                    { 2, 1, false, "ANALISIS Y DISEÑO DE PROGRAMAS", 1 },
                    { 3, 1, false, "CALCULO DIFERENCIAL E INTEGRAL", 1 },
                    { 4, 1, false, "CALCULO VECTORIAL", 1 },
                    { 5, 1, false, "CIRCUITOS ELECTRICOS", 1 },
                    { 6, 1, false, "CIRCUITOS ELECTRICOS AVANZADOS", 1 },
                    { 7, 1, false, "DIBUJO ASISTIDO POR COMPUTADORA", 1 },
                    { 8, 1, false, "ECUACIONES DIFERENCIALES", 1 },
                    { 9, 1, false, "ELECTRICIDAD Y MAGNETISMO", 1 },
                    { 10, 1, false, "ESTRUCTURA Y PROPIEDADES DE LOS MATERIALES", 1 },
                    { 11, 1, false, "COMUNICACION ORAL Y ESCRITA", 1 },
                    { 12, 1, false, "FUNDAMENTOS DE ELECTRONICA", 1 },
                    { 13, 1, false, "HERRAMIENTAS COMPUTACIONALES", 1 },
                    { 14, 1, false, "INGLES I", 1 },
                    { 15, 1, false, "INGLES II", 1 },
                    { 16, 1, false, "INTRODUCCION A LA MECATRONICA", 1 },
                    { 17, 1, false, "INTRODUCCION A LA PROGRAMACION", 1 },
                    { 18, 1, false, "MECANICA DE LA PARTICULA", 1 },
                    { 19, 1, false, "MECANICA DEL CUERPO RIGIDO", 1 },
                    { 20, 1, false, "PROCESO DE MANUFACTURA", 1 },
                    { 21, 1, false, "RESISTENCIA DE MATERIALES", 1 },
                    { 22, 1, false, "ADMINISTRACION ORGANIZACIONAL", 2 },
                    { 23, 1, false, "ANALISIS DE SEÑALES Y SISTEMAS", 2 },
                    { 24, 1, false, "ANALISIS Y SINTESIS DE MECANISMOS", 2 },
                    { 25, 1, false, "CIRCUITOS LOGICOS", 2 },
                    { 26, 1, false, "DISEÑO BASICO DE ELEMENTOS DE MAQUINAS", 2 },
                    { 27, 1, false, "DISPOSITIVOS LOGICOS PROGRAMABLES", 2 },
                    { 28, 1, false, "ELECTRONICA ANALOGICA", 2 },
                    { 29, 1, false, "INGLES III", 2 },
                    { 30, 1, false, "LIDERAZGO Y EMPRENDEDORES", 2 },
                    { 31, 1, false, "MANTENIMIENTO Y SISTEMAS DE MANUFACTURA", 2 },
                    { 32, 1, false, "MAQUINAS ELECTRICAS", 2 },
                    { 33, 1, false, "MECANICA DE FLUIDOS", 2 },
                    { 34, 1, false, "MICROPROCESADORES, MICROCONTROLADORES E INTERFAZ", 2 },
                    { 35, 1, false, "NEUMATICA E HIDRAULICA", 2 },
                    { 36, 1, false, "OSCILACIONES Y OPTICA", 2 },
                    { 37, 1, false, "PROBABILIDAD Y ESTADISTICA PARA INGENIERIA", 2 },
                    { 38, 1, false, "PROGRAMACION AVANZADA", 2 },
                    { 39, 1, false, "SENSORES Y ACONDICIONADORES DE SEÑAL", 2 },
                    { 40, 1, false, "SIMULACION ELECTRONICA Y DISEÑO DE CIRCUITOS IMPRESOS", 2 },
                    { 41, 1, false, "SISTEMAS NEURODIFUSOS", 2 },
                    { 42, 1, false, "TEORIA ELECTROMAGNETICA", 2 },
                    { 43, 1, false, "TERMODINAMICA", 2 },
                    { 44, 1, false, "CONTROL CLASICO", 3 },
                    { 45, 1, false, "ETICA PARA EL EJERCICIO PROFESIONAL", 3 },
                    { 46, 1, false, "INSTRUMENTACION VIRTUAL", 3 },
                    { 47, 1, false, "MODELADO Y SIMULACION DE SISTEMAS MECATRONICOS", 3 },
                    { 48, 1, false, "AUTOMATIZACION INDUSTRIAL", 3 },
                    { 49, 1, false, "DISEÑO AVANZADO DE ELEMENTOS DE MAQUINAS", 3 },
                    { 50, 1, false, "FINANZAS E INGENIERIA ECONOMICA", 3 },
                    { 51, 1, false, "PROCESADOR DIGITAL DE SEÑALES", 3 },
                    { 52, 1, false, "INGENIERIA AMBIENTAL", 3 },
                    { 53, 1, false, "ECONOMIA Y LOGISTICA", 3 },
                    { 54, 1, false, "CONTROL DISTRIBUIDO", 3 },
                    { 55, 1, false, "TOPICOS AVANZADOS DE ELECTRONICA", 3 },
                    { 56, 1, false, "DISEÑO AVANZADO Y MANUFACTURA ASISTIDA POR COMPUTADORA", 3 },
                    { 57, 1, false, "PROYECTO INTEGRADOR", 3 },
                    { 58, 1, false, "AUTOMATAS INDUSTRIALES", 3 },
                    { 59, 1, false, "AUTOMATIZACION DE LINEA DE PRODUCCION", 3 },
                    { 60, 1, false, "TOPICOS AVANZADOS DE SENSORES", 3 },
                    { 61, 1, false, "DESARROLLO EMPRESARIAL", 3 },
                    { 62, 1, false, "SEGURIDAD INDUSTRIAL", 3 },
                    { 63, 1, false, "SISTEMAS OPERATIVOS EN TIEMPO REAL", 3 },
                    { 64, 1, false, "GRAFICACION EN 3D", 3 },
                    { 65, 1, false, "PROCESOS INDUSTRIALES", 3 },
                    { 66, 1, false, "PRODUCCION MAS LIMPIA", 3 },
                    { 67, 1, false, "USO Y MANTENIMIENTO DE HERRAMENTAL PARA PROC. DE MANUFACTURA", 3 },
                    { 68, 1, false, "ELECTIVA I", 3 },
                    { 69, 1, false, "SISTEMAS DE CALIDAD PARA LA MANUFACTURA", 3 },
                    { 70, 1, false, "PROTOCOLOS AVANZADOS DE COMUNICACIONES", 3 },
                    { 71, 1, false, "CONTROL DE SISTEMAS MECATRONICOS", 4 },
                    { 72, 1, false, "ELECTRONICA DE POTENCIA", 4 },
                    { 73, 1, false, "INGENIERIA ASISTIDA POR COMPUTADORA", 4 },
                    { 74, 1, false, "METODOLOGIA DE LA INVESTIGACION", 4 },
                    { 75, 1, false, "PROYECTOS DE INVERSION", 4 },
                    { 76, 1, false, "SISTEMAS DE VISION ARTIFICIAL", 4 },
                    { 77, 1, false, "MICROCONTROLADORES AVANZADOS", 4 },
                    { 78, 1, false, "MERCADOTECNIA", 4 },
                    { 79, 1, false, "INTEGRACION DE UN SISTEMA ROBOTICO", 4 },
                    { 80, 1, false, "VISION ARTIFICIAL APLICADA", 4 },
                    { 81, 1, false, "ELECTIVA II", 4 },
                    { 82, 1, false, "PROCESOS AVANZADOS DE MANUFACTURA", 4 },
                    { 83, 1, false, "CONTROL DE SISTEMAS ROBOTICOS", 4 },
                    { 84, 1, false, "IMPLEMENTACION DE SISTEMAS DIGITALES", 4 },
                    { 85, 1, false, "INSTRUMENTACION VIRTUAL APLICADA", 4 },
                    { 86, 1, false, "MANUFACTURA INTEGRADA POR COMPUTADORA", 4 },
                    { 87, 1, false, "TOPICOS AVANZADOS DE AUTOMATIZACION", 4 },
                    { 88, 1, false, "SISTEMAS AVANZADOS DE MANUFACTURA", 4 },
                    { 89, 1, false, "CONTROL DE PROCESOS INDUSTRIALES", 4 },
                    { 90, 1, false, "CONTROL INTELIGENTE", 4 },
                    { 91, 1, false, "DISEÑO DE EQUIPO PARA MANEJO DE MATERIALES", 4 },
                    { 92, 1, false, "DISEÑO ERGONOMICO", 4 },
                    { 93, 1, false, "PROTOCOLOS DE COMUNICACION INDUSTRIAL", 4 },
                    { 94, 1, false, "PROYECTO DE SISTEMAS EMBEBIDOS", 4 },
                    { 95, 1, false, "REALIDAD VIRTUAL", 4 },
                    { 96, 1, false, "SISTEMAS DE PROCESAMIENTO DIGITAL DE SEÑALES", 4 },
                    { 97, 1, false, "TOPICOS AVANZADOS DE SOLDADURA", 4 },
                    { 98, 1, false, "CONTROL DE MAQUINAS ELECTRICAS", 5 },
                    { 99, 1, false, "ELECTIVA III", 5 },
                    { 100, 1, false, "TRABAJO TERMINAL I", 5 },
                    { 101, 1, false, "TRABAJO TERMINAL II", 5 },
                    { 102, 1, false, "SERVICIO SOCIAL", 5 },
                    { 103, 2, false, "PROGRAMACION", 1 },
                    { 104, 2, false, "ANALISIS Y DISEÑO DE SISTEMAS", 1 },
                    { 105, 2, false, "ESTRUCTURA DE DATOS", 1 },
                    { 106, 2, false, "ADMINISTRACION DE SISTEMAS OPERATIVOS", 1 },
                    { 107, 2, false, "DISEÑO DIGITAL", 1 },
                    { 108, 2, false, "ARQUITECTURA DE COMPUTADORAS", 1 },
                    { 109, 2, false, "FUNDAMENTOS DE FISICA", 1 },
                    { 110, 2, false, "ECUACIONES DIFERENCIALES", 1 },
                    { 111, 2, false, "PROBABILIDAD", 1 },
                    { 112, 2, false, "CALCULO DIFERENCIAL E INTEGRAL", 1 },
                    { 113, 2, false, "VARIABLE COMPLEJA", 1 },
                    { 114, 2, false, "ALGEBRA LINEAL", 1 },
                    { 115, 2, false, "ELECTROMAGNETISMO", 1 },
                    { 116, 2, false, "CALCULO MULTIVARIABLE", 1 },
                    { 117, 2, false, "ADMINISTRACION ORGANIZACIONAL", 1 },
                    { 118, 2, false, "ETICA, PROFESION Y SOCIEDAD", 1 },
                    { 119, 2, false, "COMUNICACION ORAL Y ESCRITA", 1 },
                    { 120, 2, false, "INGLES I", 1 },
                    { 121, 2, false, "INGLES II", 1 },
                    { 122, 2, false, "PROGRAMACION ESTRUCTURADA", 1 },
                    { 123, 2, false, "SOCIEDAD, CIENCIA Y TECNOLOGIA", 1 },
                    { 124, 2, false, "SEÑALES Y SISTEMAS", 2 },
                    { 125, 2, false, "PROPAGACION DE ONDAS ELECTROMAGNETICAS", 2 },
                    { 126, 2, false, "ELECTRONICA", 2 },
                    { 127, 2, false, "TEORIA DE LOS CIRCUITOS", 2 },
                    { 128, 2, false, "TEORIA DE LA INFORMACION", 2 },
                    { 129, 2, false, "TEORIA DE LAS COMUNICACIONES", 2 },
                    { 130, 2, false, "COMUNICACIONES DIGITALES", 2 },
                    { 131, 2, false, "PROCESAMIENTO DIGITAL DE SEÑALES", 2 },
                    { 132, 2, false, "TELEFONIA", 2 },
                    { 133, 2, false, "SISTEMAS CELULARES", 2 },
                    { 134, 2, false, "PROTOCOLOS DE INTERNET", 2 },
                    { 135, 2, false, "SISTEMAS DISTRIBUIDOS", 2 },
                    { 136, 2, false, "INGENIERIA WEB", 2 },
                    { 137, 2, false, "PROGRAMACION AVANZADA", 2 },
                    { 138, 2, false, "BASES DE DATOS", 2 },
                    { 139, 2, false, "TRANSMISION DE DATOS", 2 },
                    { 140, 2, false, "INFORMACION FINANCIERA E INGENIERIA ECONOMICA", 2 },
                    { 141, 2, false, "OPTATIVA I", 2 },
                    { 142, 2, false, "INGLES III", 2 },
                    { 143, 2, false, "METODOS NUMERICOS", 2 },
                    { 144, 2, false, "ELECTRONICA PARA COMUNICACIONES", 2 },
                    { 145, 2, false, "OPTICA", 2 },
                    { 146, 2, false, "DESARROLLO SUSTENTABLE", 2 },
                    { 147, 2, false, "ECONOMIA PARA INGENIEROS", 2 },
                    { 148, 2, false, "INGLES IV", 2 },
                    { 149, 2, false, "REDES INALAMBRICAS", 2 },
                    { 150, 2, false, "REDES NEURONALES", 2 },
                    { 151, 2, false, "LOGICA DIFUSA", 2 },
                    { 152, 2, false, "SISTEMAS DE INFORMACION GEOGRAFICA", 2 },
                    { 153, 2, false, "PROGRAMACION DE DISPOSITIVOS MOVILES", 2 },
                    { 154, 2, false, "NORMATIVIDAD EN TELECOMUNICACIONES E INFORMATICA", 2 },
                    { 155, 2, false, "REDES INTELIGENTES", 3 },
                    { 156, 2, false, "LINEAS DE TRANSMISION Y ANTENAS", 3 },
                    { 157, 2, false, "SEGURIDAD EN REDES", 3 },
                    { 158, 2, false, "MULTIMEDIA", 3 },
                    { 159, 2, false, "BASES DE DATOS DISTRIBUIDAS", 3 },
                    { 160, 2, false, "METODOLOGIA DE LA INVESTIGACION", 3 },
                    { 161, 2, false, "ADMINISTRACION DE PROYECTOS", 3 },
                    { 162, 2, false, "LIDERAZGO Y EMPRENDEDORES", 3 },
                    { 163, 2, false, "CRIPTOGRAFIA", 3 },
                    { 164, 2, false, "MICROONDAS", 3 },
                    { 165, 2, false, "PROCESAMIENTO DE IMAGENES", 3 },
                    { 166, 2, false, "TELEVISION DIGITAL", 3 },
                    { 167, 2, false, "SISTEMAS DE CALIDAD", 3 },
                    { 168, 2, false, "PROCESAMIENTO DE VOZ", 3 },
                    { 169, 2, false, "FILTRADO AVANZADO", 3 },
                    { 170, 2, false, "PROYECTO TERMINAL I", 4 },
                    { 171, 2, false, "PROYECTO TERMINAL II", 4 },
                    { 172, 2, false, "REDES DE TELECOMUNICACIONES", 4 },
                    { 173, 2, false, "APLICACIONES DISTRIBUIDAS", 4 },
                    { 174, 2, false, "DISPOSITIVOS PROGRAMABLES", 4 },
                    { 175, 2, false, "SERVICIO SOCIAL", 4 },
                    { 176, 2, false, "ELECTIVA I", 4 },
                    { 177, 2, false, "ELECTIVA II", 4 },
                    { 178, 2, false, "ELECTIVA III", 4 },
                    { 179, 2, false, "ELECTIVA IV", 4 }
                });

            migrationBuilder.CreateIndex(
                name: "IX_Alumno_CarreraId",
                table: "Alumno",
                column: "CarreraId");

            migrationBuilder.CreateIndex(
                name: "IX_Alumno_NumeroBoleta",
                table: "Alumno",
                column: "NumeroBoleta",
                unique: true,
                filter: "[NumeroBoleta] IS NOT NULL");

            migrationBuilder.CreateIndex(
                name: "IX_AspNetRoleClaims_RoleId",
                table: "AspNetRoleClaims",
                column: "RoleId");

            migrationBuilder.CreateIndex(
                name: "RoleNameIndex",
                table: "AspNetRoles",
                column: "NormalizedName",
                unique: true,
                filter: "[NormalizedName] IS NOT NULL");

            migrationBuilder.CreateIndex(
                name: "IX_AspNetUserClaims_UserId",
                table: "AspNetUserClaims",
                column: "UserId");

            migrationBuilder.CreateIndex(
                name: "IX_AspNetUserLogins_UserId",
                table: "AspNetUserLogins",
                column: "UserId");

            migrationBuilder.CreateIndex(
                name: "IX_AspNetUserRoles_RoleId",
                table: "AspNetUserRoles",
                column: "RoleId");

            migrationBuilder.CreateIndex(
                name: "EmailIndex",
                table: "AspNetUsers",
                column: "NormalizedEmail");

            migrationBuilder.CreateIndex(
                name: "UserNameIndex",
                table: "AspNetUsers",
                column: "NormalizedUserName",
                unique: true,
                filter: "[NormalizedUserName] IS NOT NULL");

            migrationBuilder.CreateIndex(
                name: "IX_Bitacora_IdentityUserId",
                table: "Bitacora",
                column: "IdentityUserId");

            migrationBuilder.CreateIndex(
                name: "IX_Carrera_Nombre",
                table: "Carrera",
                column: "Nombre",
                unique: true);

            migrationBuilder.CreateIndex(
                name: "IX_Documento_EstadoDocumentoId",
                table: "Documento",
                column: "EstadoDocumentoId");

            migrationBuilder.CreateIndex(
                name: "IX_Documento_TramiteId",
                table: "Documento",
                column: "TramiteId");

            migrationBuilder.CreateIndex(
                name: "IX_EstadoDocumento_Nombre",
                table: "EstadoDocumento",
                column: "Nombre",
                unique: true);

            migrationBuilder.CreateIndex(
                name: "IX_EstadoTramite_Nombre",
                table: "EstadoTramite",
                column: "Nombre",
                unique: true);

            migrationBuilder.CreateIndex(
                name: "IX_FechaRecepcion_SesionId",
                table: "FechaRecepcion",
                column: "SesionId");

            migrationBuilder.CreateIndex(
                name: "IX_Personal_UsuarioId",
                table: "Personal",
                column: "UsuarioId");

            migrationBuilder.CreateIndex(
                name: "IX_SesionCOSIE_NumeroSesion",
                table: "SesionCOSIE",
                column: "NumeroSesion",
                unique: true);

            migrationBuilder.CreateIndex(
                name: "IX_TipoTramite_Nombre",
                table: "TipoTramite",
                column: "Nombre",
                unique: true);

            migrationBuilder.CreateIndex(
                name: "IX_Tramite_AlumnoId",
                table: "Tramite",
                column: "AlumnoId");

            migrationBuilder.CreateIndex(
                name: "IX_Tramite_EstadoTramiteId",
                table: "Tramite",
                column: "EstadoTramiteId");

            migrationBuilder.CreateIndex(
                name: "IX_Tramite_PersonalId",
                table: "Tramite",
                column: "PersonalId");

            migrationBuilder.CreateIndex(
                name: "IX_Tramite_TipoTramiteId",
                table: "Tramite",
                column: "TipoTramiteId");

            migrationBuilder.CreateIndex(
                name: "IX_UnidadAprendizaje_CarreraId",
                table: "UnidadAprendizaje",
                column: "CarreraId");

            migrationBuilder.CreateIndex(
                name: "IX_UnidadReprobada_DetalleCTCEId",
                table: "UnidadReprobada",
                column: "DetalleCTCEId");

            migrationBuilder.CreateIndex(
                name: "IX_UnidadReprobada_UnidadAprendizajeId",
                table: "UnidadReprobada",
                column: "UnidadAprendizajeId");

            migrationBuilder.CreateIndex(
                name: "IX_Usuario_IdentityUserId",
                table: "Usuario",
                column: "IdentityUserId");
        }

        /// <inheritdoc />
        protected override void Down(MigrationBuilder migrationBuilder)
        {
            migrationBuilder.DropTable(
                name: "AspNetRoleClaims");

            migrationBuilder.DropTable(
                name: "AspNetUserClaims");

            migrationBuilder.DropTable(
                name: "AspNetUserLogins");

            migrationBuilder.DropTable(
                name: "AspNetUserRoles");

            migrationBuilder.DropTable(
                name: "AspNetUserTokens");

            migrationBuilder.DropTable(
                name: "Bitacora");

            migrationBuilder.DropTable(
                name: "Documento");

            migrationBuilder.DropTable(
                name: "FechaRecepcion");

            migrationBuilder.DropTable(
                name: "PeriodoConfig");

            migrationBuilder.DropTable(
                name: "UnidadReprobada");

            migrationBuilder.DropTable(
                name: "AspNetRoles");

            migrationBuilder.DropTable(
                name: "EstadoDocumento");

            migrationBuilder.DropTable(
                name: "SesionCOSIE");

            migrationBuilder.DropTable(
                name: "DetalleCTCE");

            migrationBuilder.DropTable(
                name: "UnidadAprendizaje");

            migrationBuilder.DropTable(
                name: "Tramite");

            migrationBuilder.DropTable(
                name: "Alumno");

            migrationBuilder.DropTable(
                name: "EstadoTramite");

            migrationBuilder.DropTable(
                name: "Personal");

            migrationBuilder.DropTable(
                name: "TipoTramite");

            migrationBuilder.DropTable(
                name: "Carrera");

            migrationBuilder.DropTable(
                name: "Usuario");

            migrationBuilder.DropTable(
                name: "AspNetUsers");
        }
    }
}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Infrastructure\Migrations\20251129200459_NuevaBse.Designer.cs ---
// <auto-generated />
using System;
using Microsoft.EntityFrameworkCore;
using Microsoft.EntityFrameworkCore.Infrastructure;
using Microsoft.EntityFrameworkCore.Metadata;
using Microsoft.EntityFrameworkCore.Migrations;
using Microsoft.EntityFrameworkCore.Storage.ValueConversion;
using PortalCOSIE.Infrastructure.Data;

#nullable disable

namespace PortalCOSIE.Infrastructure.Migrations
{
    [DbContext(typeof(AppDbContext))]
    [Migration("20251129200459_NuevaBse")]
    partial class NuevaBse
    {
        /// <inheritdoc />
        protected override void BuildTargetModel(ModelBuilder modelBuilder)
        {
#pragma warning disable 612, 618
            modelBuilder
                .HasAnnotation("ProductVersion", "9.0.7")
                .HasAnnotation("Relational:MaxIdentifierLength", 128);

            SqlServerModelBuilderExtensions.UseIdentityColumns(modelBuilder);

            modelBuilder.Entity("Microsoft.AspNetCore.Identity.IdentityRole", b =>
                {
                    b.Property<string>("Id")
                        .HasColumnType("nvarchar(450)");

                    b.Property<string>("ConcurrencyStamp")
                        .IsConcurrencyToken()
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("Name")
                        .HasMaxLength(256)
                        .HasColumnType("nvarchar(256)");

                    b.Property<string>("NormalizedName")
                        .HasMaxLength(256)
                        .HasColumnType("nvarchar(256)");

                    b.HasKey("Id");

                    b.HasIndex("NormalizedName")
                        .IsUnique()
                        .HasDatabaseName("RoleNameIndex")
                        .HasFilter("[NormalizedName] IS NOT NULL");

                    b.ToTable("AspNetRoles", (string)null);

                    b.HasData(
                        new
                        {
                            Id = "11111111-1111-1111-1111-111111111111",
                            Name = "Administrador",
                            NormalizedName = "ADMINISTRADOR"
                        },
                        new
                        {
                            Id = "22222222-2222-2222-2222-222222222222",
                            Name = "Personal",
                            NormalizedName = "PERSONAL"
                        },
                        new
                        {
                            Id = "33333333-3333-3333-3333-333333333333",
                            Name = "Alumno",
                            NormalizedName = "ALUMNO"
                        });
                });

            modelBuilder.Entity("Microsoft.AspNetCore.Identity.IdentityRoleClaim<string>", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("Id"));

                    b.Property<string>("ClaimType")
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("ClaimValue")
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("RoleId")
                        .IsRequired()
                        .HasColumnType("nvarchar(450)");

                    b.HasKey("Id");

                    b.HasIndex("RoleId");

                    b.ToTable("AspNetRoleClaims", (string)null);
                });

            modelBuilder.Entity("Microsoft.AspNetCore.Identity.IdentityUser", b =>
                {
                    b.Property<string>("Id")
                        .HasColumnType("nvarchar(450)");

                    b.Property<int>("AccessFailedCount")
                        .HasColumnType("int");

                    b.Property<string>("ConcurrencyStamp")
                        .IsConcurrencyToken()
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("Email")
                        .HasMaxLength(256)
                        .HasColumnType("nvarchar(256)");

                    b.Property<bool>("EmailConfirmed")
                        .HasColumnType("bit");

                    b.Property<bool>("LockoutEnabled")
                        .HasColumnType("bit");

                    b.Property<DateTimeOffset?>("LockoutEnd")
                        .HasColumnType("datetimeoffset");

                    b.Property<string>("NormalizedEmail")
                        .HasMaxLength(256)
                        .HasColumnType("nvarchar(256)");

                    b.Property<string>("NormalizedUserName")
                        .HasMaxLength(256)
                        .HasColumnType("nvarchar(256)");

                    b.Property<string>("PasswordHash")
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("PhoneNumber")
                        .HasColumnType("nvarchar(max)");

                    b.Property<bool>("PhoneNumberConfirmed")
                        .HasColumnType("bit");

                    b.Property<string>("SecurityStamp")
                        .HasColumnType("nvarchar(max)");

                    b.Property<bool>("TwoFactorEnabled")
                        .HasColumnType("bit");

                    b.Property<string>("UserName")
                        .HasMaxLength(256)
                        .HasColumnType("nvarchar(256)");

                    b.HasKey("Id");

                    b.HasIndex("NormalizedEmail")
                        .HasDatabaseName("EmailIndex");

                    b.HasIndex("NormalizedUserName")
                        .IsUnique()
                        .HasDatabaseName("UserNameIndex")
                        .HasFilter("[NormalizedUserName] IS NOT NULL");

                    b.ToTable("AspNetUsers", (string)null);
                });

            modelBuilder.Entity("Microsoft.AspNetCore.Identity.IdentityUserClaim<string>", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("Id"));

                    b.Property<string>("ClaimType")
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("ClaimValue")
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("UserId")
                        .IsRequired()
                        .HasColumnType("nvarchar(450)");

                    b.HasKey("Id");

                    b.HasIndex("UserId");

                    b.ToTable("AspNetUserClaims", (string)null);
                });

            modelBuilder.Entity("Microsoft.AspNetCore.Identity.IdentityUserLogin<string>", b =>
                {
                    b.Property<string>("LoginProvider")
                        .HasColumnType("nvarchar(450)");

                    b.Property<string>("ProviderKey")
                        .HasColumnType("nvarchar(450)");

                    b.Property<string>("ProviderDisplayName")
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("UserId")
                        .IsRequired()
                        .HasColumnType("nvarchar(450)");

                    b.HasKey("LoginProvider", "ProviderKey");

                    b.HasIndex("UserId");

                    b.ToTable("AspNetUserLogins", (string)null);
                });

            modelBuilder.Entity("Microsoft.AspNetCore.Identity.IdentityUserRole<string>", b =>
                {
                    b.Property<string>("UserId")
                        .HasColumnType("nvarchar(450)");

                    b.Property<string>("RoleId")
                        .HasColumnType("nvarchar(450)");

                    b.HasKey("UserId", "RoleId");

                    b.HasIndex("RoleId");

                    b.ToTable("AspNetUserRoles", (string)null);
                });

            modelBuilder.Entity("Microsoft.AspNetCore.Identity.IdentityUserToken<string>", b =>
                {
                    b.Property<string>("UserId")
                        .HasColumnType("nvarchar(450)");

                    b.Property<string>("LoginProvider")
                        .HasColumnType("nvarchar(450)");

                    b.Property<string>("Name")
                        .HasColumnType("nvarchar(450)");

                    b.Property<string>("Value")
                        .HasColumnType("nvarchar(max)");

                    b.HasKey("UserId", "LoginProvider", "Name");

                    b.ToTable("AspNetUserTokens", (string)null);
                });

            modelBuilder.Entity("PortalCOSIE.Domain.Entities.Bitacoras.EntradaBitacora", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("Id"));

                    b.Property<string>("Accion")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("Entidad")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("EntidadId")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.Property<DateTime>("FechaRegistro")
                        .HasColumnType("datetime2");

                    b.Property<string>("IdentityUserId")
                        .HasColumnType("nvarchar(450)");

                    b.Property<string>("IpAddress")
                        .HasColumnType("nvarchar(max)");

                    b.Property<bool>("IsDeleted")
                        .HasColumnType("bit");

                    b.Property<string>("UserAgent")
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("ValorNuevo")
                        .HasColumnType("nvarchar(max)");

                    b.HasKey("Id");

                    b.HasIndex("IdentityUserId");

                    b.ToTable("Bitacora", (string)null);
                });

            modelBuilder.Entity("PortalCOSIE.Domain.Entities.Calendario.FechaRecepcion", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("Id"));

                    b.Property<DateTime>("Fecha")
                        .HasColumnType("datetime2");

                    b.Property<bool>("IsDeleted")
                        .HasColumnType("bit");

                    b.Property<int>("SesionId")
                        .HasColumnType("int");

                    b.HasKey("Id");

                    b.HasIndex("SesionId");

                    b.ToTable("FechaRecepcion", (string)null);
                });

            modelBuilder.Entity("PortalCOSIE.Domain.Entities.Calendario.PeriodoConfig", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("Id"));

                    b.Property<int>("AnioFin")
                        .HasMaxLength(4)
                        .HasColumnType("int");

                    b.Property<int>("AnioInicio")
                        .HasMaxLength(4)
                        .HasColumnType("int");

                    b.Property<bool>("IsDeleted")
                        .HasColumnType("bit");

                    b.Property<int>("PeriodoFin")
                        .HasMaxLength(1)
                        .HasColumnType("int");

                    b.Property<int>("PeriodoInicio")
                        .HasMaxLength(1)
                        .HasColumnType("int");

                    b.HasKey("Id");

                    b.ToTable("PeriodoConfig", (string)null);

                    b.HasData(
                        new
                        {
                            Id = 1,
                            AnioFin = 2026,
                            AnioInicio = 1997,
                            IsDeleted = false,
                            PeriodoFin = 2,
                            PeriodoInicio = 1
                        });
                });

            modelBuilder.Entity("PortalCOSIE.Domain.Entities.Calendario.SesionCOSIE", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("Id"));

                    b.Property<DateTime?>("FechaSesion")
                        .HasColumnType("datetime2");

                    b.Property<bool>("IsDeleted")
                        .HasColumnType("bit");

                    b.Property<string>("NumeroSesion")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("nvarchar(50)");

                    b.HasKey("Id");

                    b.HasIndex("NumeroSesion")
                        .IsUnique();

                    b.ToTable("SesionCOSIE", (string)null);

                    b.HasData(
                        new
                        {
                            Id = 1,
                            FechaSesion = new DateTime(2025, 12, 20, 0, 0, 0, 0, DateTimeKind.Unspecified),
                            IsDeleted = false,
                            NumeroSesion = "PRIMERA"
                        },
                        new
                        {
                            Id = 2,
                            FechaSesion = new DateTime(2025, 12, 10, 0, 0, 0, 0, DateTimeKind.Unspecified),
                            IsDeleted = false,
                            NumeroSesion = "SEGUNDA"
                        },
                        new
                        {
                            Id = 3,
                            FechaSesion = new DateTime(2025, 12, 2, 0, 0, 0, 0, DateTimeKind.Unspecified),
                            IsDeleted = false,
                            NumeroSesion = "TERCERA"
                        });
                });

            modelBuilder.Entity("PortalCOSIE.Domain.Entities.Carreras.Carrera", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("Id"));

                    b.Property<bool>("IsDeleted")
                        .HasColumnType("bit");

                    b.Property<string>("Nombre")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("nvarchar(100)");

                    b.HasKey("Id");

                    b.HasIndex("Nombre")
                        .IsUnique();

                    b.ToTable("Carrera", (string)null);

                    b.HasData(
                        new
                        {
                            Id = 1,
                            IsDeleted = false,
                            Nombre = "Mecatrónica"
                        },
                        new
                        {
                            Id = 2,
                            IsDeleted = false,
                            Nombre = "Telemática"
                        },
                        new
                        {
                            Id = 3,
                            IsDeleted = false,
                            Nombre = "Biónica"
                        },
                        new
                        {
                            Id = 4,
                            IsDeleted = false,
                            Nombre = "Energía"
                        },
                        new
                        {
                            Id = 5,
                            IsDeleted = false,
                            Nombre = "ISISA"
                        });
                });

            modelBuilder.Entity("PortalCOSIE.Domain.Entities.Carreras.UnidadAprendizaje", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("Id"));

                    b.Property<int>("CarreraId")
                        .HasColumnType("int");

                    b.Property<bool>("IsDeleted")
                        .HasColumnType("bit");

                    b.Property<string>("Nombre")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("nvarchar(100)");

                    b.Property<int>("Semestre")
                        .HasColumnType("int");

                    b.HasKey("Id");

                    b.HasIndex("CarreraId");

                    b.ToTable("UnidadAprendizaje", (string)null);

                    b.HasData(
                        new
                        {
                            Id = 1,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "ALGEBRA LINEAL Y NUMEROS COMPLEJOS",
                            Semestre = 1
                        },
                        new
                        {
                            Id = 2,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "ANALISIS Y DISEÑO DE PROGRAMAS",
                            Semestre = 1
                        },
                        new
                        {
                            Id = 3,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "CALCULO DIFERENCIAL E INTEGRAL",
                            Semestre = 1
                        },
                        new
                        {
                            Id = 4,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "CALCULO VECTORIAL",
                            Semestre = 1
                        },
                        new
                        {
                            Id = 5,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "CIRCUITOS ELECTRICOS",
                            Semestre = 1
                        },
                        new
                        {
                            Id = 6,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "CIRCUITOS ELECTRICOS AVANZADOS",
                            Semestre = 1
                        },
                        new
                        {
                            Id = 7,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "DIBUJO ASISTIDO POR COMPUTADORA",
                            Semestre = 1
                        },
                        new
                        {
                            Id = 8,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "ECUACIONES DIFERENCIALES",
                            Semestre = 1
                        },
                        new
                        {
                            Id = 9,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "ELECTRICIDAD Y MAGNETISMO",
                            Semestre = 1
                        },
                        new
                        {
                            Id = 10,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "ESTRUCTURA Y PROPIEDADES DE LOS MATERIALES",
                            Semestre = 1
                        },
                        new
                        {
                            Id = 11,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "COMUNICACION ORAL Y ESCRITA",
                            Semestre = 1
                        },
                        new
                        {
                            Id = 12,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "FUNDAMENTOS DE ELECTRONICA",
                            Semestre = 1
                        },
                        new
                        {
                            Id = 13,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "HERRAMIENTAS COMPUTACIONALES",
                            Semestre = 1
                        },
                        new
                        {
                            Id = 14,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "INGLES I",
                            Semestre = 1
                        },
                        new
                        {
                            Id = 15,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "INGLES II",
                            Semestre = 1
                        },
                        new
                        {
                            Id = 16,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "INTRODUCCION A LA MECATRONICA",
                            Semestre = 1
                        },
                        new
                        {
                            Id = 17,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "INTRODUCCION A LA PROGRAMACION",
                            Semestre = 1
                        },
                        new
                        {
                            Id = 18,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "MECANICA DE LA PARTICULA",
                            Semestre = 1
                        },
                        new
                        {
                            Id = 19,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "MECANICA DEL CUERPO RIGIDO",
                            Semestre = 1
                        },
                        new
                        {
                            Id = 20,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "PROCESO DE MANUFACTURA",
                            Semestre = 1
                        },
                        new
                        {
                            Id = 21,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "RESISTENCIA DE MATERIALES",
                            Semestre = 1
                        },
                        new
                        {
                            Id = 22,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "ADMINISTRACION ORGANIZACIONAL",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 23,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "ANALISIS DE SEÑALES Y SISTEMAS",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 24,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "ANALISIS Y SINTESIS DE MECANISMOS",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 25,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "CIRCUITOS LOGICOS",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 26,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "DISEÑO BASICO DE ELEMENTOS DE MAQUINAS",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 27,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "DISPOSITIVOS LOGICOS PROGRAMABLES",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 28,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "ELECTRONICA ANALOGICA",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 29,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "INGLES III",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 30,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "LIDERAZGO Y EMPRENDEDORES",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 31,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "MANTENIMIENTO Y SISTEMAS DE MANUFACTURA",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 32,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "MAQUINAS ELECTRICAS",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 33,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "MECANICA DE FLUIDOS",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 34,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "MICROPROCESADORES, MICROCONTROLADORES E INTERFAZ",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 35,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "NEUMATICA E HIDRAULICA",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 36,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "OSCILACIONES Y OPTICA",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 37,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "PROBABILIDAD Y ESTADISTICA PARA INGENIERIA",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 38,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "PROGRAMACION AVANZADA",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 39,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "SENSORES Y ACONDICIONADORES DE SEÑAL",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 40,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "SIMULACION ELECTRONICA Y DISEÑO DE CIRCUITOS IMPRESOS",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 41,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "SISTEMAS NEURODIFUSOS",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 42,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "TEORIA ELECTROMAGNETICA",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 43,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "TERMODINAMICA",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 44,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "CONTROL CLASICO",
                            Semestre = 3
                        },
                        new
                        {
                            Id = 45,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "ETICA PARA EL EJERCICIO PROFESIONAL",
                            Semestre = 3
                        },
                        new
                        {
                            Id = 46,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "INSTRUMENTACION VIRTUAL",
                            Semestre = 3
                        },
                        new
                        {
                            Id = 47,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "MODELADO Y SIMULACION DE SISTEMAS MECATRONICOS",
                            Semestre = 3
                        },
                        new
                        {
                            Id = 48,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "AUTOMATIZACION INDUSTRIAL",
                            Semestre = 3
                        },
                        new
                        {
                            Id = 49,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "DISEÑO AVANZADO DE ELEMENTOS DE MAQUINAS",
                            Semestre = 3
                        },
                        new
                        {
                            Id = 50,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "FINANZAS E INGENIERIA ECONOMICA",
                            Semestre = 3
                        },
                        new
                        {
                            Id = 51,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "PROCESADOR DIGITAL DE SEÑALES",
                            Semestre = 3
                        },
                        new
                        {
                            Id = 52,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "INGENIERIA AMBIENTAL",
                            Semestre = 3
                        },
                        new
                        {
                            Id = 53,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "ECONOMIA Y LOGISTICA",
                            Semestre = 3
                        },
                        new
                        {
                            Id = 54,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "CONTROL DISTRIBUIDO",
                            Semestre = 3
                        },
                        new
                        {
                            Id = 55,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "TOPICOS AVANZADOS DE ELECTRONICA",
                            Semestre = 3
                        },
                        new
                        {
                            Id = 56,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "DISEÑO AVANZADO Y MANUFACTURA ASISTIDA POR COMPUTADORA",
                            Semestre = 3
                        },
                        new
                        {
                            Id = 57,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "PROYECTO INTEGRADOR",
                            Semestre = 3
                        },
                        new
                        {
                            Id = 58,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "AUTOMATAS INDUSTRIALES",
                            Semestre = 3
                        },
                        new
                        {
                            Id = 59,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "AUTOMATIZACION DE LINEA DE PRODUCCION",
                            Semestre = 3
                        },
                        new
                        {
                            Id = 60,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "TOPICOS AVANZADOS DE SENSORES",
                            Semestre = 3
                        },
                        new
                        {
                            Id = 61,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "DESARROLLO EMPRESARIAL",
                            Semestre = 3
                        },
                        new
                        {
                            Id = 62,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "SEGURIDAD INDUSTRIAL",
                            Semestre = 3
                        },
                        new
                        {
                            Id = 63,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "SISTEMAS OPERATIVOS EN TIEMPO REAL",
                            Semestre = 3
                        },
                        new
                        {
                            Id = 64,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "GRAFICACION EN 3D",
                            Semestre = 3
                        },
                        new
                        {
                            Id = 65,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "PROCESOS INDUSTRIALES",
                            Semestre = 3
                        },
                        new
                        {
                            Id = 66,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "PRODUCCION MAS LIMPIA",
                            Semestre = 3
                        },
                        new
                        {
                            Id = 67,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "USO Y MANTENIMIENTO DE HERRAMENTAL PARA PROC. DE MANUFACTURA",
                            Semestre = 3
                        },
                        new
                        {
                            Id = 68,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "ELECTIVA I",
                            Semestre = 3
                        },
                        new
                        {
                            Id = 69,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "SISTEMAS DE CALIDAD PARA LA MANUFACTURA",
                            Semestre = 3
                        },
                        new
                        {
                            Id = 70,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "PROTOCOLOS AVANZADOS DE COMUNICACIONES",
                            Semestre = 3
                        },
                        new
                        {
                            Id = 71,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "CONTROL DE SISTEMAS MECATRONICOS",
                            Semestre = 4
                        },
                        new
                        {
                            Id = 72,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "ELECTRONICA DE POTENCIA",
                            Semestre = 4
                        },
                        new
                        {
                            Id = 73,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "INGENIERIA ASISTIDA POR COMPUTADORA",
                            Semestre = 4
                        },
                        new
                        {
                            Id = 74,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "METODOLOGIA DE LA INVESTIGACION",
                            Semestre = 4
                        },
                        new
                        {
                            Id = 75,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "PROYECTOS DE INVERSION",
                            Semestre = 4
                        },
                        new
                        {
                            Id = 76,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "SISTEMAS DE VISION ARTIFICIAL",
                            Semestre = 4
                        },
                        new
                        {
                            Id = 77,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "MICROCONTROLADORES AVANZADOS",
                            Semestre = 4
                        },
                        new
                        {
                            Id = 78,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "MERCADOTECNIA",
                            Semestre = 4
                        },
                        new
                        {
                            Id = 79,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "INTEGRACION DE UN SISTEMA ROBOTICO",
                            Semestre = 4
                        },
                        new
                        {
                            Id = 80,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "VISION ARTIFICIAL APLICADA",
                            Semestre = 4
                        },
                        new
                        {
                            Id = 81,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "ELECTIVA II",
                            Semestre = 4
                        },
                        new
                        {
                            Id = 82,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "PROCESOS AVANZADOS DE MANUFACTURA",
                            Semestre = 4
                        },
                        new
                        {
                            Id = 83,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "CONTROL DE SISTEMAS ROBOTICOS",
                            Semestre = 4
                        },
                        new
                        {
                            Id = 84,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "IMPLEMENTACION DE SISTEMAS DIGITALES",
                            Semestre = 4
                        },
                        new
                        {
                            Id = 85,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "INSTRUMENTACION VIRTUAL APLICADA",
                            Semestre = 4
                        },
                        new
                        {
                            Id = 86,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "MANUFACTURA INTEGRADA POR COMPUTADORA",
                            Semestre = 4
                        },
                        new
                        {
                            Id = 87,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "TOPICOS AVANZADOS DE AUTOMATIZACION",
                            Semestre = 4
                        },
                        new
                        {
                            Id = 88,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "SISTEMAS AVANZADOS DE MANUFACTURA",
                            Semestre = 4
                        },
                        new
                        {
                            Id = 89,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "CONTROL DE PROCESOS INDUSTRIALES",
                            Semestre = 4
                        },
                        new
                        {
                            Id = 90,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "CONTROL INTELIGENTE",
                            Semestre = 4
                        },
                        new
                        {
                            Id = 91,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "DISEÑO DE EQUIPO PARA MANEJO DE MATERIALES",
                            Semestre = 4
                        },
                        new
                        {
                            Id = 92,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "DISEÑO ERGONOMICO",
                            Semestre = 4
                        },
                        new
                        {
                            Id = 93,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "PROTOCOLOS DE COMUNICACION INDUSTRIAL",
                            Semestre = 4
                        },
                        new
                        {
                            Id = 94,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "PROYECTO DE SISTEMAS EMBEBIDOS",
                            Semestre = 4
                        },
                        new
                        {
                            Id = 95,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "REALIDAD VIRTUAL",
                            Semestre = 4
                        },
                        new
                        {
                            Id = 96,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "SISTEMAS DE PROCESAMIENTO DIGITAL DE SEÑALES",
                            Semestre = 4
                        },
                        new
                        {
                            Id = 97,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "TOPICOS AVANZADOS DE SOLDADURA",
                            Semestre = 4
                        },
                        new
                        {
                            Id = 98,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "CONTROL DE MAQUINAS ELECTRICAS",
                            Semestre = 5
                        },
                        new
                        {
                            Id = 99,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "ELECTIVA III",
                            Semestre = 5
                        },
                        new
                        {
                            Id = 100,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "TRABAJO TERMINAL I",
                            Semestre = 5
                        },
                        new
                        {
                            Id = 101,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "TRABAJO TERMINAL II",
                            Semestre = 5
                        },
                        new
                        {
                            Id = 102,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "SERVICIO SOCIAL",
                            Semestre = 5
                        },
                        new
                        {
                            Id = 103,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "PROGRAMACION",
                            Semestre = 1
                        },
                        new
                        {
                            Id = 104,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "ANALISIS Y DISEÑO DE SISTEMAS",
                            Semestre = 1
                        },
                        new
                        {
                            Id = 105,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "ESTRUCTURA DE DATOS",
                            Semestre = 1
                        },
                        new
                        {
                            Id = 106,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "ADMINISTRACION DE SISTEMAS OPERATIVOS",
                            Semestre = 1
                        },
                        new
                        {
                            Id = 107,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "DISEÑO DIGITAL",
                            Semestre = 1
                        },
                        new
                        {
                            Id = 108,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "ARQUITECTURA DE COMPUTADORAS",
                            Semestre = 1
                        },
                        new
                        {
                            Id = 109,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "FUNDAMENTOS DE FISICA",
                            Semestre = 1
                        },
                        new
                        {
                            Id = 110,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "ECUACIONES DIFERENCIALES",
                            Semestre = 1
                        },
                        new
                        {
                            Id = 111,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "PROBABILIDAD",
                            Semestre = 1
                        },
                        new
                        {
                            Id = 112,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "CALCULO DIFERENCIAL E INTEGRAL",
                            Semestre = 1
                        },
                        new
                        {
                            Id = 113,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "VARIABLE COMPLEJA",
                            Semestre = 1
                        },
                        new
                        {
                            Id = 114,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "ALGEBRA LINEAL",
                            Semestre = 1
                        },
                        new
                        {
                            Id = 115,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "ELECTROMAGNETISMO",
                            Semestre = 1
                        },
                        new
                        {
                            Id = 116,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "CALCULO MULTIVARIABLE",
                            Semestre = 1
                        },
                        new
                        {
                            Id = 117,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "ADMINISTRACION ORGANIZACIONAL",
                            Semestre = 1
                        },
                        new
                        {
                            Id = 118,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "ETICA, PROFESION Y SOCIEDAD",
                            Semestre = 1
                        },
                        new
                        {
                            Id = 119,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "COMUNICACION ORAL Y ESCRITA",
                            Semestre = 1
                        },
                        new
                        {
                            Id = 120,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "INGLES I",
                            Semestre = 1
                        },
                        new
                        {
                            Id = 121,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "INGLES II",
                            Semestre = 1
                        },
                        new
                        {
                            Id = 122,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "PROGRAMACION ESTRUCTURADA",
                            Semestre = 1
                        },
                        new
                        {
                            Id = 123,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "SOCIEDAD, CIENCIA Y TECNOLOGIA",
                            Semestre = 1
                        },
                        new
                        {
                            Id = 124,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "SEÑALES Y SISTEMAS",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 125,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "PROPAGACION DE ONDAS ELECTROMAGNETICAS",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 126,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "ELECTRONICA",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 127,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "TEORIA DE LOS CIRCUITOS",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 128,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "TEORIA DE LA INFORMACION",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 129,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "TEORIA DE LAS COMUNICACIONES",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 130,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "COMUNICACIONES DIGITALES",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 131,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "PROCESAMIENTO DIGITAL DE SEÑALES",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 132,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "TELEFONIA",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 133,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "SISTEMAS CELULARES",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 134,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "PROTOCOLOS DE INTERNET",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 135,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "SISTEMAS DISTRIBUIDOS",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 136,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "INGENIERIA WEB",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 137,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "PROGRAMACION AVANZADA",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 138,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "BASES DE DATOS",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 139,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "TRANSMISION DE DATOS",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 140,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "INFORMACION FINANCIERA E INGENIERIA ECONOMICA",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 141,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "OPTATIVA I",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 142,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "INGLES III",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 143,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "METODOS NUMERICOS",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 144,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "ELECTRONICA PARA COMUNICACIONES",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 145,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "OPTICA",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 146,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "DESARROLLO SUSTENTABLE",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 147,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "ECONOMIA PARA INGENIEROS",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 148,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "INGLES IV",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 149,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "REDES INALAMBRICAS",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 150,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "REDES NEURONALES",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 151,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "LOGICA DIFUSA",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 152,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "SISTEMAS DE INFORMACION GEOGRAFICA",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 153,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "PROGRAMACION DE DISPOSITIVOS MOVILES",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 154,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "NORMATIVIDAD EN TELECOMUNICACIONES E INFORMATICA",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 155,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "REDES INTELIGENTES",
                            Semestre = 3
                        },
                        new
                        {
                            Id = 156,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "LINEAS DE TRANSMISION Y ANTENAS",
                            Semestre = 3
                        },
                        new
                        {
                            Id = 157,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "SEGURIDAD EN REDES",
                            Semestre = 3
                        },
                        new
                        {
                            Id = 158,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "MULTIMEDIA",
                            Semestre = 3
                        },
                        new
                        {
                            Id = 159,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "BASES DE DATOS DISTRIBUIDAS",
                            Semestre = 3
                        },
                        new
                        {
                            Id = 160,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "METODOLOGIA DE LA INVESTIGACION",
                            Semestre = 3
                        },
                        new
                        {
                            Id = 161,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "ADMINISTRACION DE PROYECTOS",
                            Semestre = 3
                        },
                        new
                        {
                            Id = 162,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "LIDERAZGO Y EMPRENDEDORES",
                            Semestre = 3
                        },
                        new
                        {
                            Id = 163,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "CRIPTOGRAFIA",
                            Semestre = 3
                        },
                        new
                        {
                            Id = 164,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "MICROONDAS",
                            Semestre = 3
                        },
                        new
                        {
                            Id = 165,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "PROCESAMIENTO DE IMAGENES",
                            Semestre = 3
                        },
                        new
                        {
                            Id = 166,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "TELEVISION DIGITAL",
                            Semestre = 3
                        },
                        new
                        {
                            Id = 167,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "SISTEMAS DE CALIDAD",
                            Semestre = 3
                        },
                        new
                        {
                            Id = 168,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "PROCESAMIENTO DE VOZ",
                            Semestre = 3
                        },
                        new
                        {
                            Id = 169,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "FILTRADO AVANZADO",
                            Semestre = 3
                        },
                        new
                        {
                            Id = 170,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "PROYECTO TERMINAL I",
                            Semestre = 4
                        },
                        new
                        {
                            Id = 171,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "PROYECTO TERMINAL II",
                            Semestre = 4
                        },
                        new
                        {
                            Id = 172,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "REDES DE TELECOMUNICACIONES",
                            Semestre = 4
                        },
                        new
                        {
                            Id = 173,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "APLICACIONES DISTRIBUIDAS",
                            Semestre = 4
                        },
                        new
                        {
                            Id = 174,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "DISPOSITIVOS PROGRAMABLES",
                            Semestre = 4
                        },
                        new
                        {
                            Id = 175,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "SERVICIO SOCIAL",
                            Semestre = 4
                        },
                        new
                        {
                            Id = 176,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "ELECTIVA I",
                            Semestre = 4
                        },
                        new
                        {
                            Id = 177,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "ELECTIVA II",
                            Semestre = 4
                        },
                        new
                        {
                            Id = 178,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "ELECTIVA III",
                            Semestre = 4
                        },
                        new
                        {
                            Id = 179,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "ELECTIVA IV",
                            Semestre = 4
                        });
                });

            modelBuilder.Entity("PortalCOSIE.Domain.Entities.Documentos.Documento", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("Id"));

                    b.Property<byte[]>("Contenido")
                        .IsRequired()
                        .HasColumnType("varbinary(max)");

                    b.Property<int>("EstadoDocumentoId")
                        .HasColumnType("int");

                    b.Property<bool>("IsDeleted")
                        .HasColumnType("bit");

                    b.Property<string>("Nombre")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("nvarchar(200)");

                    b.Property<string>("Observaciones")
                        .IsRequired()
                        .HasMaxLength(1000)
                        .HasColumnType("nvarchar(1000)");

                    b.Property<int>("TramiteId")
                        .HasColumnType("int");

                    b.HasKey("Id");

                    b.HasIndex("EstadoDocumentoId");

                    b.HasIndex("TramiteId");

                    b.ToTable("Documento", (string)null);
                });

            modelBuilder.Entity("PortalCOSIE.Domain.Entities.Documentos.EstadoDocumento", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("Id"));

                    b.Property<bool>("IsDeleted")
                        .HasColumnType("bit");

                    b.Property<string>("Nombre")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("nvarchar(100)");

                    b.HasKey("Id");

                    b.HasIndex("Nombre")
                        .IsUnique();

                    b.ToTable("EstadoDocumento", (string)null);

                    b.HasData(
                        new
                        {
                            Id = 1,
                            IsDeleted = false,
                            Nombre = "En Revisión"
                        },
                        new
                        {
                            Id = 2,
                            IsDeleted = false,
                            Nombre = "Validado"
                        },
                        new
                        {
                            Id = 3,
                            IsDeleted = false,
                            Nombre = "Con errores"
                        },
                        new
                        {
                            Id = 4,
                            IsDeleted = false,
                            Nombre = "Documento incorrecto"
                        });
                });

            modelBuilder.Entity("PortalCOSIE.Domain.Entities.Tramites.EstadoTramite", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("Id"));

                    b.Property<bool>("IsDeleted")
                        .HasColumnType("bit");

                    b.Property<string>("Nombre")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("nvarchar(100)");

                    b.HasKey("Id");

                    b.HasIndex("Nombre")
                        .IsUnique();

                    b.ToTable("EstadoTramite", (string)null);

                    b.HasData(
                        new
                        {
                            Id = 1,
                            IsDeleted = false,
                            Nombre = "Solicitado"
                        },
                        new
                        {
                            Id = 2,
                            IsDeleted = false,
                            Nombre = "En revision"
                        },
                        new
                        {
                            Id = 3,
                            IsDeleted = false,
                            Nombre = "Documentos pendientes"
                        },
                        new
                        {
                            Id = 4,
                            IsDeleted = false,
                            Nombre = "Concluido"
                        },
                        new
                        {
                            Id = 5,
                            IsDeleted = false,
                            Nombre = "Cancelado"
                        });
                });

            modelBuilder.Entity("PortalCOSIE.Domain.Entities.Tramites.TipoTramite", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("Id"));

                    b.Property<bool>("IsDeleted")
                        .HasColumnType("bit");

                    b.Property<string>("Nombre")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("nvarchar(100)");

                    b.HasKey("Id");

                    b.HasIndex("Nombre")
                        .IsUnique();

                    b.ToTable("TipoTramite", (string)null);

                    b.HasData(
                        new
                        {
                            Id = 1,
                            IsDeleted = false,
                            Nombre = "Dictamen interno (CTCE)"
                        },
                        new
                        {
                            Id = 2,
                            IsDeleted = false,
                            Nombre = "Dictamen externo (CGC)"
                        });
                });

            modelBuilder.Entity("PortalCOSIE.Domain.Entities.Tramites.Tramite", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("Id"));

                    b.Property<int>("AlumnoId")
                        .HasColumnType("int");

                    b.Property<int>("EstadoTramiteId")
                        .HasColumnType("int");

                    b.Property<DateTime?>("FechaConclusion")
                        .HasColumnType("datetime2");

                    b.Property<DateTime>("FechaSolicitud")
                        .HasColumnType("datetime2");

                    b.Property<bool>("IsDeleted")
                        .HasColumnType("bit");

                    b.Property<int?>("PersonalId")
                        .HasColumnType("int");

                    b.Property<int>("TipoTramiteId")
                        .HasColumnType("int");

                    b.HasKey("Id");

                    b.HasIndex("AlumnoId");

                    b.HasIndex("EstadoTramiteId");

                    b.HasIndex("PersonalId");

                    b.HasIndex("TipoTramiteId");

                    b.ToTable("Tramite", (string)null);

                    b.UseTptMappingStrategy();
                });

            modelBuilder.Entity("PortalCOSIE.Domain.Entities.Tramites.UnidadReprobada", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("Id"));

                    b.Property<int>("DetalleCTCEId")
                        .HasColumnType("int");

                    b.Property<bool>("IsDeleted")
                        .HasColumnType("bit");

                    b.Property<string>("PeriodoCurso")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("PeriodoRecurse")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.Property<int>("UnidadAprendizajeId")
                        .HasColumnType("int");

                    b.HasKey("Id");

                    b.HasIndex("DetalleCTCEId");

                    b.HasIndex("UnidadAprendizajeId");

                    b.ToTable("UnidadReprobada", (string)null);
                });

            modelBuilder.Entity("PortalCOSIE.Domain.Entities.Usuarios.Usuario", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("Id"));

                    b.Property<string>("ApellidoMaterno")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("nvarchar(100)");

                    b.Property<string>("ApellidoPaterno")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("nvarchar(100)");

                    b.Property<string>("IdentityUserId")
                        .IsRequired()
                        .HasColumnType("nvarchar(450)");

                    b.Property<bool>("IsDeleted")
                        .HasColumnType("bit");

                    b.Property<string>("Nombre")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("nvarchar(100)");

                    b.HasKey("Id");

                    b.HasIndex("IdentityUserId");

                    b.ToTable("Usuario", (string)null);

                    b.UseTptMappingStrategy();
                });

            modelBuilder.Entity("PortalCOSIE.Domain.Entities.Tramites.DetalleCTCE", b =>
                {
                    b.HasBaseType("PortalCOSIE.Domain.Entities.Tramites.Tramite");

                    b.Property<string>("Situacion")
                        .IsRequired()
                        .HasMaxLength(1000)
                        .HasColumnType("nvarchar(1000)");

                    b.Property<bool>("TieneDictamenesAnteriores")
                        .HasColumnType("bit");

                    b.ToTable("DetalleCTCE", (string)null);
                });

            modelBuilder.Entity("PortalCOSIE.Domain.Entities.Usuarios.Alumno", b =>
                {
                    b.HasBaseType("PortalCOSIE.Domain.Entities.Usuarios.Usuario");

                    b.Property<int>("CarreraId")
                        .HasColumnType("int");

                    b.Property<string>("NumeroBoleta")
                        .IsRequired()
                        .HasMaxLength(10)
                        .HasColumnType("nvarchar(10)");

                    b.Property<string>("PeriodoIngreso")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.HasIndex("CarreraId");

                    b.HasIndex("NumeroBoleta")
                        .IsUnique()
                        .HasFilter("[NumeroBoleta] IS NOT NULL");

                    b.ToTable("Alumno", (string)null);
                });

            modelBuilder.Entity("PortalCOSIE.Domain.Entities.Usuarios.Personal", b =>
                {
                    b.HasBaseType("PortalCOSIE.Domain.Entities.Usuarios.Usuario");

                    b.Property<string>("Area")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("IdPersonal")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.Property<int>("UsuarioId")
                        .HasColumnType("int");

                    b.HasIndex("UsuarioId");

                    b.ToTable("Personal", (string)null);
                });

            modelBuilder.Entity("Microsoft.AspNetCore.Identity.IdentityRoleClaim<string>", b =>
                {
                    b.HasOne("Microsoft.AspNetCore.Identity.IdentityRole", null)
                        .WithMany()
                        .HasForeignKey("RoleId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();
                });

            modelBuilder.Entity("Microsoft.AspNetCore.Identity.IdentityUserClaim<string>", b =>
                {
                    b.HasOne("Microsoft.AspNetCore.Identity.IdentityUser", null)
                        .WithMany()
                        .HasForeignKey("UserId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();
                });

            modelBuilder.Entity("Microsoft.AspNetCore.Identity.IdentityUserLogin<string>", b =>
                {
                    b.HasOne("Microsoft.AspNetCore.Identity.IdentityUser", null)
                        .WithMany()
                        .HasForeignKey("UserId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();
                });

            modelBuilder.Entity("Microsoft.AspNetCore.Identity.IdentityUserRole<string>", b =>
                {
                    b.HasOne("Microsoft.AspNetCore.Identity.IdentityRole", null)
                        .WithMany()
                        .HasForeignKey("RoleId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("Microsoft.AspNetCore.Identity.IdentityUser", null)
                        .WithMany()
                        .HasForeignKey("UserId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();
                });

            modelBuilder.Entity("Microsoft.AspNetCore.Identity.IdentityUserToken<string>", b =>
                {
                    b.HasOne("Microsoft.AspNetCore.Identity.IdentityUser", null)
                        .WithMany()
                        .HasForeignKey("UserId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();
                });

            modelBuilder.Entity("PortalCOSIE.Domain.Entities.Bitacoras.EntradaBitacora", b =>
                {
                    b.HasOne("Microsoft.AspNetCore.Identity.IdentityUser", null)
                        .WithMany()
                        .HasForeignKey("IdentityUserId");
                });

            modelBuilder.Entity("PortalCOSIE.Domain.Entities.Calendario.FechaRecepcion", b =>
                {
                    b.HasOne("PortalCOSIE.Domain.Entities.Calendario.SesionCOSIE", "Sesion")
                        .WithMany("FechasRecepcion")
                        .HasForeignKey("SesionId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Sesion");
                });

            modelBuilder.Entity("PortalCOSIE.Domain.Entities.Carreras.UnidadAprendizaje", b =>
                {
                    b.HasOne("PortalCOSIE.Domain.Entities.Carreras.Carrera", "Carrera")
                        .WithMany("UnidadesAprendizaje")
                        .HasForeignKey("CarreraId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Carrera");
                });

            modelBuilder.Entity("PortalCOSIE.Domain.Entities.Documentos.Documento", b =>
                {
                    b.HasOne("PortalCOSIE.Domain.Entities.Documentos.EstadoDocumento", "EstadoDocumento")
                        .WithMany()
                        .HasForeignKey("EstadoDocumentoId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("PortalCOSIE.Domain.Entities.Tramites.Tramite", "Tramite")
                        .WithMany("Documentos")
                        .HasForeignKey("TramiteId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("EstadoDocumento");

                    b.Navigation("Tramite");
                });

            modelBuilder.Entity("PortalCOSIE.Domain.Entities.Tramites.Tramite", b =>
                {
                    b.HasOne("PortalCOSIE.Domain.Entities.Usuarios.Alumno", "Alumno")
                        .WithMany()
                        .HasForeignKey("AlumnoId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("PortalCOSIE.Domain.Entities.Tramites.EstadoTramite", "EstadoTramite")
                        .WithMany()
                        .HasForeignKey("EstadoTramiteId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("PortalCOSIE.Domain.Entities.Usuarios.Personal", "Personal")
                        .WithMany()
                        .HasForeignKey("PersonalId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.HasOne("PortalCOSIE.Domain.Entities.Tramites.TipoTramite", "TipoTramite")
                        .WithMany()
                        .HasForeignKey("TipoTramiteId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Alumno");

                    b.Navigation("EstadoTramite");

                    b.Navigation("Personal");

                    b.Navigation("TipoTramite");
                });

            modelBuilder.Entity("PortalCOSIE.Domain.Entities.Tramites.UnidadReprobada", b =>
                {
                    b.HasOne("PortalCOSIE.Domain.Entities.Tramites.DetalleCTCE", "DetalleCTCE")
                        .WithMany("UnidadesReprobadas")
                        .HasForeignKey("DetalleCTCEId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("PortalCOSIE.Domain.Entities.Carreras.UnidadAprendizaje", "UnidadAprendizaje")
                        .WithMany()
                        .HasForeignKey("UnidadAprendizajeId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("DetalleCTCE");

                    b.Navigation("UnidadAprendizaje");
                });

            modelBuilder.Entity("PortalCOSIE.Domain.Entities.Usuarios.Usuario", b =>
                {
                    b.HasOne("Microsoft.AspNetCore.Identity.IdentityUser", null)
                        .WithMany()
                        .HasForeignKey("IdentityUserId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();
                });

            modelBuilder.Entity("PortalCOSIE.Domain.Entities.Tramites.DetalleCTCE", b =>
                {
                    b.HasOne("PortalCOSIE.Domain.Entities.Tramites.Tramite", null)
                        .WithOne()
                        .HasForeignKey("PortalCOSIE.Domain.Entities.Tramites.DetalleCTCE", "Id")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();
                });

            modelBuilder.Entity("PortalCOSIE.Domain.Entities.Usuarios.Alumno", b =>
                {
                    b.HasOne("PortalCOSIE.Domain.Entities.Carreras.Carrera", "Carrera")
                        .WithMany()
                        .HasForeignKey("CarreraId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("PortalCOSIE.Domain.Entities.Usuarios.Usuario", null)
                        .WithOne()
                        .HasForeignKey("PortalCOSIE.Domain.Entities.Usuarios.Alumno", "Id")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("Carrera");
                });

            modelBuilder.Entity("PortalCOSIE.Domain.Entities.Usuarios.Personal", b =>
                {
                    b.HasOne("PortalCOSIE.Domain.Entities.Usuarios.Usuario", null)
                        .WithOne()
                        .HasForeignKey("PortalCOSIE.Domain.Entities.Usuarios.Personal", "Id")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("PortalCOSIE.Domain.Entities.Usuarios.Usuario", "Usuario")
                        .WithMany()
                        .HasForeignKey("UsuarioId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Usuario");
                });

            modelBuilder.Entity("PortalCOSIE.Domain.Entities.Calendario.SesionCOSIE", b =>
                {
                    b.Navigation("FechasRecepcion");
                });

            modelBuilder.Entity("PortalCOSIE.Domain.Entities.Carreras.Carrera", b =>
                {
                    b.Navigation("UnidadesAprendizaje");
                });

            modelBuilder.Entity("PortalCOSIE.Domain.Entities.Tramites.Tramite", b =>
                {
                    b.Navigation("Documentos");
                });

            modelBuilder.Entity("PortalCOSIE.Domain.Entities.Tramites.DetalleCTCE", b =>
                {
                    b.Navigation("UnidadesReprobadas");
                });
#pragma warning restore 612, 618
        }
    }
}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Infrastructure\Migrations\AppDbContextModelSnapshot.cs ---
// <auto-generated />
using System;
using Microsoft.EntityFrameworkCore;
using Microsoft.EntityFrameworkCore.Infrastructure;
using Microsoft.EntityFrameworkCore.Metadata;
using Microsoft.EntityFrameworkCore.Storage.ValueConversion;
using PortalCOSIE.Infrastructure.Data;

#nullable disable

namespace PortalCOSIE.Infrastructure.Migrations
{
    [DbContext(typeof(AppDbContext))]
    partial class AppDbContextModelSnapshot : ModelSnapshot
    {
        protected override void BuildModel(ModelBuilder modelBuilder)
        {
#pragma warning disable 612, 618
            modelBuilder
                .HasAnnotation("ProductVersion", "9.0.7")
                .HasAnnotation("Relational:MaxIdentifierLength", 128);

            SqlServerModelBuilderExtensions.UseIdentityColumns(modelBuilder);

            modelBuilder.Entity("Microsoft.AspNetCore.Identity.IdentityRole", b =>
                {
                    b.Property<string>("Id")
                        .HasColumnType("nvarchar(450)");

                    b.Property<string>("ConcurrencyStamp")
                        .IsConcurrencyToken()
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("Name")
                        .HasMaxLength(256)
                        .HasColumnType("nvarchar(256)");

                    b.Property<string>("NormalizedName")
                        .HasMaxLength(256)
                        .HasColumnType("nvarchar(256)");

                    b.HasKey("Id");

                    b.HasIndex("NormalizedName")
                        .IsUnique()
                        .HasDatabaseName("RoleNameIndex")
                        .HasFilter("[NormalizedName] IS NOT NULL");

                    b.ToTable("AspNetRoles", (string)null);

                    b.HasData(
                        new
                        {
                            Id = "11111111-1111-1111-1111-111111111111",
                            Name = "Administrador",
                            NormalizedName = "ADMINISTRADOR"
                        },
                        new
                        {
                            Id = "22222222-2222-2222-2222-222222222222",
                            Name = "Personal",
                            NormalizedName = "PERSONAL"
                        },
                        new
                        {
                            Id = "33333333-3333-3333-3333-333333333333",
                            Name = "Alumno",
                            NormalizedName = "ALUMNO"
                        });
                });

            modelBuilder.Entity("Microsoft.AspNetCore.Identity.IdentityRoleClaim<string>", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("Id"));

                    b.Property<string>("ClaimType")
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("ClaimValue")
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("RoleId")
                        .IsRequired()
                        .HasColumnType("nvarchar(450)");

                    b.HasKey("Id");

                    b.HasIndex("RoleId");

                    b.ToTable("AspNetRoleClaims", (string)null);
                });

            modelBuilder.Entity("Microsoft.AspNetCore.Identity.IdentityUser", b =>
                {
                    b.Property<string>("Id")
                        .HasColumnType("nvarchar(450)");

                    b.Property<int>("AccessFailedCount")
                        .HasColumnType("int");

                    b.Property<string>("ConcurrencyStamp")
                        .IsConcurrencyToken()
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("Email")
                        .HasMaxLength(256)
                        .HasColumnType("nvarchar(256)");

                    b.Property<bool>("EmailConfirmed")
                        .HasColumnType("bit");

                    b.Property<bool>("LockoutEnabled")
                        .HasColumnType("bit");

                    b.Property<DateTimeOffset?>("LockoutEnd")
                        .HasColumnType("datetimeoffset");

                    b.Property<string>("NormalizedEmail")
                        .HasMaxLength(256)
                        .HasColumnType("nvarchar(256)");

                    b.Property<string>("NormalizedUserName")
                        .HasMaxLength(256)
                        .HasColumnType("nvarchar(256)");

                    b.Property<string>("PasswordHash")
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("PhoneNumber")
                        .HasColumnType("nvarchar(max)");

                    b.Property<bool>("PhoneNumberConfirmed")
                        .HasColumnType("bit");

                    b.Property<string>("SecurityStamp")
                        .HasColumnType("nvarchar(max)");

                    b.Property<bool>("TwoFactorEnabled")
                        .HasColumnType("bit");

                    b.Property<string>("UserName")
                        .HasMaxLength(256)
                        .HasColumnType("nvarchar(256)");

                    b.HasKey("Id");

                    b.HasIndex("NormalizedEmail")
                        .HasDatabaseName("EmailIndex");

                    b.HasIndex("NormalizedUserName")
                        .IsUnique()
                        .HasDatabaseName("UserNameIndex")
                        .HasFilter("[NormalizedUserName] IS NOT NULL");

                    b.ToTable("AspNetUsers", (string)null);
                });

            modelBuilder.Entity("Microsoft.AspNetCore.Identity.IdentityUserClaim<string>", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("Id"));

                    b.Property<string>("ClaimType")
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("ClaimValue")
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("UserId")
                        .IsRequired()
                        .HasColumnType("nvarchar(450)");

                    b.HasKey("Id");

                    b.HasIndex("UserId");

                    b.ToTable("AspNetUserClaims", (string)null);
                });

            modelBuilder.Entity("Microsoft.AspNetCore.Identity.IdentityUserLogin<string>", b =>
                {
                    b.Property<string>("LoginProvider")
                        .HasColumnType("nvarchar(450)");

                    b.Property<string>("ProviderKey")
                        .HasColumnType("nvarchar(450)");

                    b.Property<string>("ProviderDisplayName")
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("UserId")
                        .IsRequired()
                        .HasColumnType("nvarchar(450)");

                    b.HasKey("LoginProvider", "ProviderKey");

                    b.HasIndex("UserId");

                    b.ToTable("AspNetUserLogins", (string)null);
                });

            modelBuilder.Entity("Microsoft.AspNetCore.Identity.IdentityUserRole<string>", b =>
                {
                    b.Property<string>("UserId")
                        .HasColumnType("nvarchar(450)");

                    b.Property<string>("RoleId")
                        .HasColumnType("nvarchar(450)");

                    b.HasKey("UserId", "RoleId");

                    b.HasIndex("RoleId");

                    b.ToTable("AspNetUserRoles", (string)null);
                });

            modelBuilder.Entity("Microsoft.AspNetCore.Identity.IdentityUserToken<string>", b =>
                {
                    b.Property<string>("UserId")
                        .HasColumnType("nvarchar(450)");

                    b.Property<string>("LoginProvider")
                        .HasColumnType("nvarchar(450)");

                    b.Property<string>("Name")
                        .HasColumnType("nvarchar(450)");

                    b.Property<string>("Value")
                        .HasColumnType("nvarchar(max)");

                    b.HasKey("UserId", "LoginProvider", "Name");

                    b.ToTable("AspNetUserTokens", (string)null);
                });

            modelBuilder.Entity("PortalCOSIE.Domain.Entities.Bitacoras.EntradaBitacora", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("Id"));

                    b.Property<string>("Accion")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("Entidad")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("EntidadId")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.Property<DateTime>("FechaRegistro")
                        .HasColumnType("datetime2");

                    b.Property<string>("IdentityUserId")
                        .HasColumnType("nvarchar(450)");

                    b.Property<string>("IpAddress")
                        .HasColumnType("nvarchar(max)");

                    b.Property<bool>("IsDeleted")
                        .HasColumnType("bit");

                    b.Property<string>("UserAgent")
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("ValorNuevo")
                        .HasColumnType("nvarchar(max)");

                    b.HasKey("Id");

                    b.HasIndex("IdentityUserId");

                    b.ToTable("Bitacora", (string)null);
                });

            modelBuilder.Entity("PortalCOSIE.Domain.Entities.Calendario.FechaRecepcion", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("Id"));

                    b.Property<DateTime>("Fecha")
                        .HasColumnType("datetime2");

                    b.Property<bool>("IsDeleted")
                        .HasColumnType("bit");

                    b.Property<int>("SesionId")
                        .HasColumnType("int");

                    b.HasKey("Id");

                    b.HasIndex("SesionId");

                    b.ToTable("FechaRecepcion", (string)null);
                });

            modelBuilder.Entity("PortalCOSIE.Domain.Entities.Calendario.PeriodoConfig", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("Id"));

                    b.Property<int>("AnioFin")
                        .HasMaxLength(4)
                        .HasColumnType("int");

                    b.Property<int>("AnioInicio")
                        .HasMaxLength(4)
                        .HasColumnType("int");

                    b.Property<bool>("IsDeleted")
                        .HasColumnType("bit");

                    b.Property<int>("PeriodoFin")
                        .HasMaxLength(1)
                        .HasColumnType("int");

                    b.Property<int>("PeriodoInicio")
                        .HasMaxLength(1)
                        .HasColumnType("int");

                    b.HasKey("Id");

                    b.ToTable("PeriodoConfig", (string)null);

                    b.HasData(
                        new
                        {
                            Id = 1,
                            AnioFin = 2026,
                            AnioInicio = 1997,
                            IsDeleted = false,
                            PeriodoFin = 2,
                            PeriodoInicio = 1
                        });
                });

            modelBuilder.Entity("PortalCOSIE.Domain.Entities.Calendario.SesionCOSIE", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("Id"));

                    b.Property<DateTime?>("FechaSesion")
                        .HasColumnType("datetime2");

                    b.Property<bool>("IsDeleted")
                        .HasColumnType("bit");

                    b.Property<string>("NumeroSesion")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("nvarchar(50)");

                    b.HasKey("Id");

                    b.HasIndex("NumeroSesion")
                        .IsUnique();

                    b.ToTable("SesionCOSIE", (string)null);

                    b.HasData(
                        new
                        {
                            Id = 1,
                            FechaSesion = new DateTime(2025, 12, 20, 0, 0, 0, 0, DateTimeKind.Unspecified),
                            IsDeleted = false,
                            NumeroSesion = "PRIMERA"
                        },
                        new
                        {
                            Id = 2,
                            FechaSesion = new DateTime(2025, 12, 10, 0, 0, 0, 0, DateTimeKind.Unspecified),
                            IsDeleted = false,
                            NumeroSesion = "SEGUNDA"
                        },
                        new
                        {
                            Id = 3,
                            FechaSesion = new DateTime(2025, 12, 2, 0, 0, 0, 0, DateTimeKind.Unspecified),
                            IsDeleted = false,
                            NumeroSesion = "TERCERA"
                        });
                });

            modelBuilder.Entity("PortalCOSIE.Domain.Entities.Carreras.Carrera", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("Id"));

                    b.Property<bool>("IsDeleted")
                        .HasColumnType("bit");

                    b.Property<string>("Nombre")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("nvarchar(100)");

                    b.HasKey("Id");

                    b.HasIndex("Nombre")
                        .IsUnique();

                    b.ToTable("Carrera", (string)null);

                    b.HasData(
                        new
                        {
                            Id = 1,
                            IsDeleted = false,
                            Nombre = "Mecatrónica"
                        },
                        new
                        {
                            Id = 2,
                            IsDeleted = false,
                            Nombre = "Telemática"
                        },
                        new
                        {
                            Id = 3,
                            IsDeleted = false,
                            Nombre = "Biónica"
                        },
                        new
                        {
                            Id = 4,
                            IsDeleted = false,
                            Nombre = "Energía"
                        },
                        new
                        {
                            Id = 5,
                            IsDeleted = false,
                            Nombre = "ISISA"
                        });
                });

            modelBuilder.Entity("PortalCOSIE.Domain.Entities.Carreras.UnidadAprendizaje", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("Id"));

                    b.Property<int>("CarreraId")
                        .HasColumnType("int");

                    b.Property<bool>("IsDeleted")
                        .HasColumnType("bit");

                    b.Property<string>("Nombre")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("nvarchar(100)");

                    b.Property<int>("Semestre")
                        .HasColumnType("int");

                    b.HasKey("Id");

                    b.HasIndex("CarreraId");

                    b.ToTable("UnidadAprendizaje", (string)null);

                    b.HasData(
                        new
                        {
                            Id = 1,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "ALGEBRA LINEAL Y NUMEROS COMPLEJOS",
                            Semestre = 1
                        },
                        new
                        {
                            Id = 2,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "ANALISIS Y DISEÑO DE PROGRAMAS",
                            Semestre = 1
                        },
                        new
                        {
                            Id = 3,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "CALCULO DIFERENCIAL E INTEGRAL",
                            Semestre = 1
                        },
                        new
                        {
                            Id = 4,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "CALCULO VECTORIAL",
                            Semestre = 1
                        },
                        new
                        {
                            Id = 5,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "CIRCUITOS ELECTRICOS",
                            Semestre = 1
                        },
                        new
                        {
                            Id = 6,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "CIRCUITOS ELECTRICOS AVANZADOS",
                            Semestre = 1
                        },
                        new
                        {
                            Id = 7,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "DIBUJO ASISTIDO POR COMPUTADORA",
                            Semestre = 1
                        },
                        new
                        {
                            Id = 8,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "ECUACIONES DIFERENCIALES",
                            Semestre = 1
                        },
                        new
                        {
                            Id = 9,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "ELECTRICIDAD Y MAGNETISMO",
                            Semestre = 1
                        },
                        new
                        {
                            Id = 10,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "ESTRUCTURA Y PROPIEDADES DE LOS MATERIALES",
                            Semestre = 1
                        },
                        new
                        {
                            Id = 11,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "COMUNICACION ORAL Y ESCRITA",
                            Semestre = 1
                        },
                        new
                        {
                            Id = 12,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "FUNDAMENTOS DE ELECTRONICA",
                            Semestre = 1
                        },
                        new
                        {
                            Id = 13,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "HERRAMIENTAS COMPUTACIONALES",
                            Semestre = 1
                        },
                        new
                        {
                            Id = 14,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "INGLES I",
                            Semestre = 1
                        },
                        new
                        {
                            Id = 15,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "INGLES II",
                            Semestre = 1
                        },
                        new
                        {
                            Id = 16,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "INTRODUCCION A LA MECATRONICA",
                            Semestre = 1
                        },
                        new
                        {
                            Id = 17,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "INTRODUCCION A LA PROGRAMACION",
                            Semestre = 1
                        },
                        new
                        {
                            Id = 18,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "MECANICA DE LA PARTICULA",
                            Semestre = 1
                        },
                        new
                        {
                            Id = 19,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "MECANICA DEL CUERPO RIGIDO",
                            Semestre = 1
                        },
                        new
                        {
                            Id = 20,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "PROCESO DE MANUFACTURA",
                            Semestre = 1
                        },
                        new
                        {
                            Id = 21,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "RESISTENCIA DE MATERIALES",
                            Semestre = 1
                        },
                        new
                        {
                            Id = 22,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "ADMINISTRACION ORGANIZACIONAL",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 23,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "ANALISIS DE SEÑALES Y SISTEMAS",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 24,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "ANALISIS Y SINTESIS DE MECANISMOS",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 25,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "CIRCUITOS LOGICOS",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 26,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "DISEÑO BASICO DE ELEMENTOS DE MAQUINAS",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 27,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "DISPOSITIVOS LOGICOS PROGRAMABLES",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 28,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "ELECTRONICA ANALOGICA",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 29,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "INGLES III",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 30,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "LIDERAZGO Y EMPRENDEDORES",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 31,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "MANTENIMIENTO Y SISTEMAS DE MANUFACTURA",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 32,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "MAQUINAS ELECTRICAS",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 33,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "MECANICA DE FLUIDOS",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 34,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "MICROPROCESADORES, MICROCONTROLADORES E INTERFAZ",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 35,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "NEUMATICA E HIDRAULICA",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 36,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "OSCILACIONES Y OPTICA",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 37,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "PROBABILIDAD Y ESTADISTICA PARA INGENIERIA",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 38,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "PROGRAMACION AVANZADA",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 39,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "SENSORES Y ACONDICIONADORES DE SEÑAL",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 40,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "SIMULACION ELECTRONICA Y DISEÑO DE CIRCUITOS IMPRESOS",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 41,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "SISTEMAS NEURODIFUSOS",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 42,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "TEORIA ELECTROMAGNETICA",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 43,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "TERMODINAMICA",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 44,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "CONTROL CLASICO",
                            Semestre = 3
                        },
                        new
                        {
                            Id = 45,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "ETICA PARA EL EJERCICIO PROFESIONAL",
                            Semestre = 3
                        },
                        new
                        {
                            Id = 46,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "INSTRUMENTACION VIRTUAL",
                            Semestre = 3
                        },
                        new
                        {
                            Id = 47,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "MODELADO Y SIMULACION DE SISTEMAS MECATRONICOS",
                            Semestre = 3
                        },
                        new
                        {
                            Id = 48,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "AUTOMATIZACION INDUSTRIAL",
                            Semestre = 3
                        },
                        new
                        {
                            Id = 49,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "DISEÑO AVANZADO DE ELEMENTOS DE MAQUINAS",
                            Semestre = 3
                        },
                        new
                        {
                            Id = 50,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "FINANZAS E INGENIERIA ECONOMICA",
                            Semestre = 3
                        },
                        new
                        {
                            Id = 51,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "PROCESADOR DIGITAL DE SEÑALES",
                            Semestre = 3
                        },
                        new
                        {
                            Id = 52,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "INGENIERIA AMBIENTAL",
                            Semestre = 3
                        },
                        new
                        {
                            Id = 53,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "ECONOMIA Y LOGISTICA",
                            Semestre = 3
                        },
                        new
                        {
                            Id = 54,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "CONTROL DISTRIBUIDO",
                            Semestre = 3
                        },
                        new
                        {
                            Id = 55,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "TOPICOS AVANZADOS DE ELECTRONICA",
                            Semestre = 3
                        },
                        new
                        {
                            Id = 56,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "DISEÑO AVANZADO Y MANUFACTURA ASISTIDA POR COMPUTADORA",
                            Semestre = 3
                        },
                        new
                        {
                            Id = 57,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "PROYECTO INTEGRADOR",
                            Semestre = 3
                        },
                        new
                        {
                            Id = 58,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "AUTOMATAS INDUSTRIALES",
                            Semestre = 3
                        },
                        new
                        {
                            Id = 59,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "AUTOMATIZACION DE LINEA DE PRODUCCION",
                            Semestre = 3
                        },
                        new
                        {
                            Id = 60,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "TOPICOS AVANZADOS DE SENSORES",
                            Semestre = 3
                        },
                        new
                        {
                            Id = 61,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "DESARROLLO EMPRESARIAL",
                            Semestre = 3
                        },
                        new
                        {
                            Id = 62,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "SEGURIDAD INDUSTRIAL",
                            Semestre = 3
                        },
                        new
                        {
                            Id = 63,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "SISTEMAS OPERATIVOS EN TIEMPO REAL",
                            Semestre = 3
                        },
                        new
                        {
                            Id = 64,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "GRAFICACION EN 3D",
                            Semestre = 3
                        },
                        new
                        {
                            Id = 65,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "PROCESOS INDUSTRIALES",
                            Semestre = 3
                        },
                        new
                        {
                            Id = 66,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "PRODUCCION MAS LIMPIA",
                            Semestre = 3
                        },
                        new
                        {
                            Id = 67,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "USO Y MANTENIMIENTO DE HERRAMENTAL PARA PROC. DE MANUFACTURA",
                            Semestre = 3
                        },
                        new
                        {
                            Id = 68,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "ELECTIVA I",
                            Semestre = 3
                        },
                        new
                        {
                            Id = 69,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "SISTEMAS DE CALIDAD PARA LA MANUFACTURA",
                            Semestre = 3
                        },
                        new
                        {
                            Id = 70,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "PROTOCOLOS AVANZADOS DE COMUNICACIONES",
                            Semestre = 3
                        },
                        new
                        {
                            Id = 71,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "CONTROL DE SISTEMAS MECATRONICOS",
                            Semestre = 4
                        },
                        new
                        {
                            Id = 72,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "ELECTRONICA DE POTENCIA",
                            Semestre = 4
                        },
                        new
                        {
                            Id = 73,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "INGENIERIA ASISTIDA POR COMPUTADORA",
                            Semestre = 4
                        },
                        new
                        {
                            Id = 74,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "METODOLOGIA DE LA INVESTIGACION",
                            Semestre = 4
                        },
                        new
                        {
                            Id = 75,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "PROYECTOS DE INVERSION",
                            Semestre = 4
                        },
                        new
                        {
                            Id = 76,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "SISTEMAS DE VISION ARTIFICIAL",
                            Semestre = 4
                        },
                        new
                        {
                            Id = 77,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "MICROCONTROLADORES AVANZADOS",
                            Semestre = 4
                        },
                        new
                        {
                            Id = 78,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "MERCADOTECNIA",
                            Semestre = 4
                        },
                        new
                        {
                            Id = 79,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "INTEGRACION DE UN SISTEMA ROBOTICO",
                            Semestre = 4
                        },
                        new
                        {
                            Id = 80,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "VISION ARTIFICIAL APLICADA",
                            Semestre = 4
                        },
                        new
                        {
                            Id = 81,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "ELECTIVA II",
                            Semestre = 4
                        },
                        new
                        {
                            Id = 82,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "PROCESOS AVANZADOS DE MANUFACTURA",
                            Semestre = 4
                        },
                        new
                        {
                            Id = 83,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "CONTROL DE SISTEMAS ROBOTICOS",
                            Semestre = 4
                        },
                        new
                        {
                            Id = 84,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "IMPLEMENTACION DE SISTEMAS DIGITALES",
                            Semestre = 4
                        },
                        new
                        {
                            Id = 85,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "INSTRUMENTACION VIRTUAL APLICADA",
                            Semestre = 4
                        },
                        new
                        {
                            Id = 86,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "MANUFACTURA INTEGRADA POR COMPUTADORA",
                            Semestre = 4
                        },
                        new
                        {
                            Id = 87,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "TOPICOS AVANZADOS DE AUTOMATIZACION",
                            Semestre = 4
                        },
                        new
                        {
                            Id = 88,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "SISTEMAS AVANZADOS DE MANUFACTURA",
                            Semestre = 4
                        },
                        new
                        {
                            Id = 89,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "CONTROL DE PROCESOS INDUSTRIALES",
                            Semestre = 4
                        },
                        new
                        {
                            Id = 90,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "CONTROL INTELIGENTE",
                            Semestre = 4
                        },
                        new
                        {
                            Id = 91,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "DISEÑO DE EQUIPO PARA MANEJO DE MATERIALES",
                            Semestre = 4
                        },
                        new
                        {
                            Id = 92,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "DISEÑO ERGONOMICO",
                            Semestre = 4
                        },
                        new
                        {
                            Id = 93,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "PROTOCOLOS DE COMUNICACION INDUSTRIAL",
                            Semestre = 4
                        },
                        new
                        {
                            Id = 94,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "PROYECTO DE SISTEMAS EMBEBIDOS",
                            Semestre = 4
                        },
                        new
                        {
                            Id = 95,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "REALIDAD VIRTUAL",
                            Semestre = 4
                        },
                        new
                        {
                            Id = 96,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "SISTEMAS DE PROCESAMIENTO DIGITAL DE SEÑALES",
                            Semestre = 4
                        },
                        new
                        {
                            Id = 97,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "TOPICOS AVANZADOS DE SOLDADURA",
                            Semestre = 4
                        },
                        new
                        {
                            Id = 98,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "CONTROL DE MAQUINAS ELECTRICAS",
                            Semestre = 5
                        },
                        new
                        {
                            Id = 99,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "ELECTIVA III",
                            Semestre = 5
                        },
                        new
                        {
                            Id = 100,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "TRABAJO TERMINAL I",
                            Semestre = 5
                        },
                        new
                        {
                            Id = 101,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "TRABAJO TERMINAL II",
                            Semestre = 5
                        },
                        new
                        {
                            Id = 102,
                            CarreraId = 1,
                            IsDeleted = false,
                            Nombre = "SERVICIO SOCIAL",
                            Semestre = 5
                        },
                        new
                        {
                            Id = 103,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "PROGRAMACION",
                            Semestre = 1
                        },
                        new
                        {
                            Id = 104,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "ANALISIS Y DISEÑO DE SISTEMAS",
                            Semestre = 1
                        },
                        new
                        {
                            Id = 105,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "ESTRUCTURA DE DATOS",
                            Semestre = 1
                        },
                        new
                        {
                            Id = 106,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "ADMINISTRACION DE SISTEMAS OPERATIVOS",
                            Semestre = 1
                        },
                        new
                        {
                            Id = 107,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "DISEÑO DIGITAL",
                            Semestre = 1
                        },
                        new
                        {
                            Id = 108,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "ARQUITECTURA DE COMPUTADORAS",
                            Semestre = 1
                        },
                        new
                        {
                            Id = 109,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "FUNDAMENTOS DE FISICA",
                            Semestre = 1
                        },
                        new
                        {
                            Id = 110,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "ECUACIONES DIFERENCIALES",
                            Semestre = 1
                        },
                        new
                        {
                            Id = 111,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "PROBABILIDAD",
                            Semestre = 1
                        },
                        new
                        {
                            Id = 112,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "CALCULO DIFERENCIAL E INTEGRAL",
                            Semestre = 1
                        },
                        new
                        {
                            Id = 113,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "VARIABLE COMPLEJA",
                            Semestre = 1
                        },
                        new
                        {
                            Id = 114,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "ALGEBRA LINEAL",
                            Semestre = 1
                        },
                        new
                        {
                            Id = 115,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "ELECTROMAGNETISMO",
                            Semestre = 1
                        },
                        new
                        {
                            Id = 116,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "CALCULO MULTIVARIABLE",
                            Semestre = 1
                        },
                        new
                        {
                            Id = 117,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "ADMINISTRACION ORGANIZACIONAL",
                            Semestre = 1
                        },
                        new
                        {
                            Id = 118,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "ETICA, PROFESION Y SOCIEDAD",
                            Semestre = 1
                        },
                        new
                        {
                            Id = 119,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "COMUNICACION ORAL Y ESCRITA",
                            Semestre = 1
                        },
                        new
                        {
                            Id = 120,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "INGLES I",
                            Semestre = 1
                        },
                        new
                        {
                            Id = 121,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "INGLES II",
                            Semestre = 1
                        },
                        new
                        {
                            Id = 122,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "PROGRAMACION ESTRUCTURADA",
                            Semestre = 1
                        },
                        new
                        {
                            Id = 123,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "SOCIEDAD, CIENCIA Y TECNOLOGIA",
                            Semestre = 1
                        },
                        new
                        {
                            Id = 124,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "SEÑALES Y SISTEMAS",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 125,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "PROPAGACION DE ONDAS ELECTROMAGNETICAS",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 126,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "ELECTRONICA",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 127,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "TEORIA DE LOS CIRCUITOS",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 128,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "TEORIA DE LA INFORMACION",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 129,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "TEORIA DE LAS COMUNICACIONES",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 130,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "COMUNICACIONES DIGITALES",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 131,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "PROCESAMIENTO DIGITAL DE SEÑALES",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 132,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "TELEFONIA",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 133,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "SISTEMAS CELULARES",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 134,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "PROTOCOLOS DE INTERNET",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 135,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "SISTEMAS DISTRIBUIDOS",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 136,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "INGENIERIA WEB",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 137,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "PROGRAMACION AVANZADA",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 138,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "BASES DE DATOS",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 139,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "TRANSMISION DE DATOS",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 140,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "INFORMACION FINANCIERA E INGENIERIA ECONOMICA",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 141,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "OPTATIVA I",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 142,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "INGLES III",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 143,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "METODOS NUMERICOS",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 144,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "ELECTRONICA PARA COMUNICACIONES",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 145,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "OPTICA",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 146,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "DESARROLLO SUSTENTABLE",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 147,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "ECONOMIA PARA INGENIEROS",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 148,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "INGLES IV",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 149,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "REDES INALAMBRICAS",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 150,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "REDES NEURONALES",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 151,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "LOGICA DIFUSA",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 152,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "SISTEMAS DE INFORMACION GEOGRAFICA",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 153,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "PROGRAMACION DE DISPOSITIVOS MOVILES",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 154,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "NORMATIVIDAD EN TELECOMUNICACIONES E INFORMATICA",
                            Semestre = 2
                        },
                        new
                        {
                            Id = 155,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "REDES INTELIGENTES",
                            Semestre = 3
                        },
                        new
                        {
                            Id = 156,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "LINEAS DE TRANSMISION Y ANTENAS",
                            Semestre = 3
                        },
                        new
                        {
                            Id = 157,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "SEGURIDAD EN REDES",
                            Semestre = 3
                        },
                        new
                        {
                            Id = 158,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "MULTIMEDIA",
                            Semestre = 3
                        },
                        new
                        {
                            Id = 159,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "BASES DE DATOS DISTRIBUIDAS",
                            Semestre = 3
                        },
                        new
                        {
                            Id = 160,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "METODOLOGIA DE LA INVESTIGACION",
                            Semestre = 3
                        },
                        new
                        {
                            Id = 161,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "ADMINISTRACION DE PROYECTOS",
                            Semestre = 3
                        },
                        new
                        {
                            Id = 162,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "LIDERAZGO Y EMPRENDEDORES",
                            Semestre = 3
                        },
                        new
                        {
                            Id = 163,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "CRIPTOGRAFIA",
                            Semestre = 3
                        },
                        new
                        {
                            Id = 164,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "MICROONDAS",
                            Semestre = 3
                        },
                        new
                        {
                            Id = 165,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "PROCESAMIENTO DE IMAGENES",
                            Semestre = 3
                        },
                        new
                        {
                            Id = 166,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "TELEVISION DIGITAL",
                            Semestre = 3
                        },
                        new
                        {
                            Id = 167,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "SISTEMAS DE CALIDAD",
                            Semestre = 3
                        },
                        new
                        {
                            Id = 168,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "PROCESAMIENTO DE VOZ",
                            Semestre = 3
                        },
                        new
                        {
                            Id = 169,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "FILTRADO AVANZADO",
                            Semestre = 3
                        },
                        new
                        {
                            Id = 170,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "PROYECTO TERMINAL I",
                            Semestre = 4
                        },
                        new
                        {
                            Id = 171,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "PROYECTO TERMINAL II",
                            Semestre = 4
                        },
                        new
                        {
                            Id = 172,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "REDES DE TELECOMUNICACIONES",
                            Semestre = 4
                        },
                        new
                        {
                            Id = 173,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "APLICACIONES DISTRIBUIDAS",
                            Semestre = 4
                        },
                        new
                        {
                            Id = 174,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "DISPOSITIVOS PROGRAMABLES",
                            Semestre = 4
                        },
                        new
                        {
                            Id = 175,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "SERVICIO SOCIAL",
                            Semestre = 4
                        },
                        new
                        {
                            Id = 176,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "ELECTIVA I",
                            Semestre = 4
                        },
                        new
                        {
                            Id = 177,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "ELECTIVA II",
                            Semestre = 4
                        },
                        new
                        {
                            Id = 178,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "ELECTIVA III",
                            Semestre = 4
                        },
                        new
                        {
                            Id = 179,
                            CarreraId = 2,
                            IsDeleted = false,
                            Nombre = "ELECTIVA IV",
                            Semestre = 4
                        });
                });

            modelBuilder.Entity("PortalCOSIE.Domain.Entities.Documentos.Documento", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("Id"));

                    b.Property<byte[]>("Contenido")
                        .IsRequired()
                        .HasColumnType("varbinary(max)");

                    b.Property<int>("EstadoDocumentoId")
                        .HasColumnType("int");

                    b.Property<bool>("IsDeleted")
                        .HasColumnType("bit");

                    b.Property<string>("Nombre")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("nvarchar(200)");

                    b.Property<string>("Observaciones")
                        .IsRequired()
                        .HasMaxLength(1000)
                        .HasColumnType("nvarchar(1000)");

                    b.Property<int>("TramiteId")
                        .HasColumnType("int");

                    b.HasKey("Id");

                    b.HasIndex("EstadoDocumentoId");

                    b.HasIndex("TramiteId");

                    b.ToTable("Documento", (string)null);
                });

            modelBuilder.Entity("PortalCOSIE.Domain.Entities.Documentos.EstadoDocumento", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("Id"));

                    b.Property<bool>("IsDeleted")
                        .HasColumnType("bit");

                    b.Property<string>("Nombre")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("nvarchar(100)");

                    b.HasKey("Id");

                    b.HasIndex("Nombre")
                        .IsUnique();

                    b.ToTable("EstadoDocumento", (string)null);

                    b.HasData(
                        new
                        {
                            Id = 1,
                            IsDeleted = false,
                            Nombre = "En Revisión"
                        },
                        new
                        {
                            Id = 2,
                            IsDeleted = false,
                            Nombre = "Validado"
                        },
                        new
                        {
                            Id = 3,
                            IsDeleted = false,
                            Nombre = "Con errores"
                        },
                        new
                        {
                            Id = 4,
                            IsDeleted = false,
                            Nombre = "Documento incorrecto"
                        });
                });

            modelBuilder.Entity("PortalCOSIE.Domain.Entities.Tramites.EstadoTramite", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("Id"));

                    b.Property<bool>("IsDeleted")
                        .HasColumnType("bit");

                    b.Property<string>("Nombre")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("nvarchar(100)");

                    b.HasKey("Id");

                    b.HasIndex("Nombre")
                        .IsUnique();

                    b.ToTable("EstadoTramite", (string)null);

                    b.HasData(
                        new
                        {
                            Id = 1,
                            IsDeleted = false,
                            Nombre = "Solicitado"
                        },
                        new
                        {
                            Id = 2,
                            IsDeleted = false,
                            Nombre = "En revision"
                        },
                        new
                        {
                            Id = 3,
                            IsDeleted = false,
                            Nombre = "Documentos pendientes"
                        },
                        new
                        {
                            Id = 4,
                            IsDeleted = false,
                            Nombre = "Concluido"
                        },
                        new
                        {
                            Id = 5,
                            IsDeleted = false,
                            Nombre = "Cancelado"
                        });
                });

            modelBuilder.Entity("PortalCOSIE.Domain.Entities.Tramites.TipoTramite", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("Id"));

                    b.Property<bool>("IsDeleted")
                        .HasColumnType("bit");

                    b.Property<string>("Nombre")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("nvarchar(100)");

                    b.HasKey("Id");

                    b.HasIndex("Nombre")
                        .IsUnique();

                    b.ToTable("TipoTramite", (string)null);

                    b.HasData(
                        new
                        {
                            Id = 1,
                            IsDeleted = false,
                            Nombre = "Dictamen interno (CTCE)"
                        },
                        new
                        {
                            Id = 2,
                            IsDeleted = false,
                            Nombre = "Dictamen externo (CGC)"
                        });
                });

            modelBuilder.Entity("PortalCOSIE.Domain.Entities.Tramites.Tramite", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("Id"));

                    b.Property<int>("AlumnoId")
                        .HasColumnType("int");

                    b.Property<int>("EstadoTramiteId")
                        .HasColumnType("int");

                    b.Property<DateTime?>("FechaConclusion")
                        .HasColumnType("datetime2");

                    b.Property<DateTime>("FechaSolicitud")
                        .HasColumnType("datetime2");

                    b.Property<bool>("IsDeleted")
                        .HasColumnType("bit");

                    b.Property<int?>("PersonalId")
                        .HasColumnType("int");

                    b.Property<int>("TipoTramiteId")
                        .HasColumnType("int");

                    b.HasKey("Id");

                    b.HasIndex("AlumnoId");

                    b.HasIndex("EstadoTramiteId");

                    b.HasIndex("PersonalId");

                    b.HasIndex("TipoTramiteId");

                    b.ToTable("Tramite", (string)null);

                    b.UseTptMappingStrategy();
                });

            modelBuilder.Entity("PortalCOSIE.Domain.Entities.Tramites.UnidadReprobada", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("Id"));

                    b.Property<int>("DetalleCTCEId")
                        .HasColumnType("int");

                    b.Property<bool>("IsDeleted")
                        .HasColumnType("bit");

                    b.Property<string>("PeriodoCurso")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("PeriodoRecurse")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.Property<int>("UnidadAprendizajeId")
                        .HasColumnType("int");

                    b.HasKey("Id");

                    b.HasIndex("DetalleCTCEId");

                    b.HasIndex("UnidadAprendizajeId");

                    b.ToTable("UnidadReprobada", (string)null);
                });

            modelBuilder.Entity("PortalCOSIE.Domain.Entities.Usuarios.Usuario", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("Id"));

                    b.Property<string>("ApellidoMaterno")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("nvarchar(100)");

                    b.Property<string>("ApellidoPaterno")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("nvarchar(100)");

                    b.Property<string>("IdentityUserId")
                        .IsRequired()
                        .HasColumnType("nvarchar(450)");

                    b.Property<bool>("IsDeleted")
                        .HasColumnType("bit");

                    b.Property<string>("Nombre")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("nvarchar(100)");

                    b.HasKey("Id");

                    b.HasIndex("IdentityUserId");

                    b.ToTable("Usuario", (string)null);

                    b.UseTptMappingStrategy();
                });

            modelBuilder.Entity("PortalCOSIE.Domain.Entities.Tramites.DetalleCTCE", b =>
                {
                    b.HasBaseType("PortalCOSIE.Domain.Entities.Tramites.Tramite");

                    b.Property<string>("Situacion")
                        .IsRequired()
                        .HasMaxLength(1000)
                        .HasColumnType("nvarchar(1000)");

                    b.Property<bool>("TieneDictamenesAnteriores")
                        .HasColumnType("bit");

                    b.ToTable("DetalleCTCE", (string)null);
                });

            modelBuilder.Entity("PortalCOSIE.Domain.Entities.Usuarios.Alumno", b =>
                {
                    b.HasBaseType("PortalCOSIE.Domain.Entities.Usuarios.Usuario");

                    b.Property<int>("CarreraId")
                        .HasColumnType("int");

                    b.Property<string>("NumeroBoleta")
                        .IsRequired()
                        .HasMaxLength(10)
                        .HasColumnType("nvarchar(10)");

                    b.Property<string>("PeriodoIngreso")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.HasIndex("CarreraId");

                    b.HasIndex("NumeroBoleta")
                        .IsUnique()
                        .HasFilter("[NumeroBoleta] IS NOT NULL");

                    b.ToTable("Alumno", (string)null);
                });

            modelBuilder.Entity("PortalCOSIE.Domain.Entities.Usuarios.Personal", b =>
                {
                    b.HasBaseType("PortalCOSIE.Domain.Entities.Usuarios.Usuario");

                    b.Property<string>("Area")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("IdPersonal")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.Property<int>("UsuarioId")
                        .HasColumnType("int");

                    b.HasIndex("UsuarioId");

                    b.ToTable("Personal", (string)null);
                });

            modelBuilder.Entity("Microsoft.AspNetCore.Identity.IdentityRoleClaim<string>", b =>
                {
                    b.HasOne("Microsoft.AspNetCore.Identity.IdentityRole", null)
                        .WithMany()
                        .HasForeignKey("RoleId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();
                });

            modelBuilder.Entity("Microsoft.AspNetCore.Identity.IdentityUserClaim<string>", b =>
                {
                    b.HasOne("Microsoft.AspNetCore.Identity.IdentityUser", null)
                        .WithMany()
                        .HasForeignKey("UserId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();
                });

            modelBuilder.Entity("Microsoft.AspNetCore.Identity.IdentityUserLogin<string>", b =>
                {
                    b.HasOne("Microsoft.AspNetCore.Identity.IdentityUser", null)
                        .WithMany()
                        .HasForeignKey("UserId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();
                });

            modelBuilder.Entity("Microsoft.AspNetCore.Identity.IdentityUserRole<string>", b =>
                {
                    b.HasOne("Microsoft.AspNetCore.Identity.IdentityRole", null)
                        .WithMany()
                        .HasForeignKey("RoleId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("Microsoft.AspNetCore.Identity.IdentityUser", null)
                        .WithMany()
                        .HasForeignKey("UserId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();
                });

            modelBuilder.Entity("Microsoft.AspNetCore.Identity.IdentityUserToken<string>", b =>
                {
                    b.HasOne("Microsoft.AspNetCore.Identity.IdentityUser", null)
                        .WithMany()
                        .HasForeignKey("UserId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();
                });

            modelBuilder.Entity("PortalCOSIE.Domain.Entities.Bitacoras.EntradaBitacora", b =>
                {
                    b.HasOne("Microsoft.AspNetCore.Identity.IdentityUser", null)
                        .WithMany()
                        .HasForeignKey("IdentityUserId");
                });

            modelBuilder.Entity("PortalCOSIE.Domain.Entities.Calendario.FechaRecepcion", b =>
                {
                    b.HasOne("PortalCOSIE.Domain.Entities.Calendario.SesionCOSIE", "Sesion")
                        .WithMany("FechasRecepcion")
                        .HasForeignKey("SesionId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Sesion");
                });

            modelBuilder.Entity("PortalCOSIE.Domain.Entities.Carreras.UnidadAprendizaje", b =>
                {
                    b.HasOne("PortalCOSIE.Domain.Entities.Carreras.Carrera", "Carrera")
                        .WithMany("UnidadesAprendizaje")
                        .HasForeignKey("CarreraId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Carrera");
                });

            modelBuilder.Entity("PortalCOSIE.Domain.Entities.Documentos.Documento", b =>
                {
                    b.HasOne("PortalCOSIE.Domain.Entities.Documentos.EstadoDocumento", "EstadoDocumento")
                        .WithMany()
                        .HasForeignKey("EstadoDocumentoId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("PortalCOSIE.Domain.Entities.Tramites.Tramite", "Tramite")
                        .WithMany("Documentos")
                        .HasForeignKey("TramiteId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("EstadoDocumento");

                    b.Navigation("Tramite");
                });

            modelBuilder.Entity("PortalCOSIE.Domain.Entities.Tramites.Tramite", b =>
                {
                    b.HasOne("PortalCOSIE.Domain.Entities.Usuarios.Alumno", "Alumno")
                        .WithMany()
                        .HasForeignKey("AlumnoId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("PortalCOSIE.Domain.Entities.Tramites.EstadoTramite", "EstadoTramite")
                        .WithMany()
                        .HasForeignKey("EstadoTramiteId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("PortalCOSIE.Domain.Entities.Usuarios.Personal", "Personal")
                        .WithMany()
                        .HasForeignKey("PersonalId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.HasOne("PortalCOSIE.Domain.Entities.Tramites.TipoTramite", "TipoTramite")
                        .WithMany()
                        .HasForeignKey("TipoTramiteId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Alumno");

                    b.Navigation("EstadoTramite");

                    b.Navigation("Personal");

                    b.Navigation("TipoTramite");
                });

            modelBuilder.Entity("PortalCOSIE.Domain.Entities.Tramites.UnidadReprobada", b =>
                {
                    b.HasOne("PortalCOSIE.Domain.Entities.Tramites.DetalleCTCE", "DetalleCTCE")
                        .WithMany("UnidadesReprobadas")
                        .HasForeignKey("DetalleCTCEId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("PortalCOSIE.Domain.Entities.Carreras.UnidadAprendizaje", "UnidadAprendizaje")
                        .WithMany()
                        .HasForeignKey("UnidadAprendizajeId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("DetalleCTCE");

                    b.Navigation("UnidadAprendizaje");
                });

            modelBuilder.Entity("PortalCOSIE.Domain.Entities.Usuarios.Usuario", b =>
                {
                    b.HasOne("Microsoft.AspNetCore.Identity.IdentityUser", null)
                        .WithMany()
                        .HasForeignKey("IdentityUserId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();
                });

            modelBuilder.Entity("PortalCOSIE.Domain.Entities.Tramites.DetalleCTCE", b =>
                {
                    b.HasOne("PortalCOSIE.Domain.Entities.Tramites.Tramite", null)
                        .WithOne()
                        .HasForeignKey("PortalCOSIE.Domain.Entities.Tramites.DetalleCTCE", "Id")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();
                });

            modelBuilder.Entity("PortalCOSIE.Domain.Entities.Usuarios.Alumno", b =>
                {
                    b.HasOne("PortalCOSIE.Domain.Entities.Carreras.Carrera", "Carrera")
                        .WithMany()
                        .HasForeignKey("CarreraId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("PortalCOSIE.Domain.Entities.Usuarios.Usuario", null)
                        .WithOne()
                        .HasForeignKey("PortalCOSIE.Domain.Entities.Usuarios.Alumno", "Id")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("Carrera");
                });

            modelBuilder.Entity("PortalCOSIE.Domain.Entities.Usuarios.Personal", b =>
                {
                    b.HasOne("PortalCOSIE.Domain.Entities.Usuarios.Usuario", null)
                        .WithOne()
                        .HasForeignKey("PortalCOSIE.Domain.Entities.Usuarios.Personal", "Id")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("PortalCOSIE.Domain.Entities.Usuarios.Usuario", "Usuario")
                        .WithMany()
                        .HasForeignKey("UsuarioId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Usuario");
                });

            modelBuilder.Entity("PortalCOSIE.Domain.Entities.Calendario.SesionCOSIE", b =>
                {
                    b.Navigation("FechasRecepcion");
                });

            modelBuilder.Entity("PortalCOSIE.Domain.Entities.Carreras.Carrera", b =>
                {
                    b.Navigation("UnidadesAprendizaje");
                });

            modelBuilder.Entity("PortalCOSIE.Domain.Entities.Tramites.Tramite", b =>
                {
                    b.Navigation("Documentos");
                });

            modelBuilder.Entity("PortalCOSIE.Domain.Entities.Tramites.DetalleCTCE", b =>
                {
                    b.Navigation("UnidadesReprobadas");
                });
#pragma warning restore 612, 618
        }
    }
}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Infrastructure\Repositories\BaseRepository.cs ---
using Microsoft.EntityFrameworkCore;
using PortalCOSIE.Domain.Entities;
using PortalCOSIE.Domain.Interfaces;
using PortalCOSIE.Infrastructure.Data;

namespace PortalCOSIE.Infrastructure.Repositories
{
    public class BaseRepository<TEntity> : IBaseRepository<TEntity> where TEntity : BaseEntity
    {
        protected readonly AppDbContext _context;

        public BaseRepository(AppDbContext context)
        {
            _context = context;
        }

        public async Task<TEntity> GetByIdAsync(int id)
        {
            return await _context.Set<TEntity>().FindAsync(id);
        }
        public async Task<IEnumerable<TEntity>> GetAllAsync(bool filtrarActivos)
        {
            return await _context.Set<TEntity>()
                .Where(e => filtrarActivos ? e.IsDeleted == false : true)
                .AsNoTracking()
                .ToListAsync();
        }
        public async Task<TEntity> AddAsync(TEntity entity)
        {
            await _context.Set<TEntity>().AddAsync(entity);
            return entity;
        }
        public TEntity Delete(TEntity entity)
        {
            _context.Set<TEntity>().Remove(entity);
            return entity;
        }
    }
}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Infrastructure\Repositories\BitacoraRepository.cs ---
using Microsoft.EntityFrameworkCore;
using PortalCOSIE.Domain.Entities.Bitacoras;
using PortalCOSIE.Infrastructure.Data;

namespace PortalCOSIE.Infrastructure.Repositories
{
    public class BitacoraRepository : IBitacoraRepository
    {
        private readonly AppDbContext _context;

        public BitacoraRepository(AppDbContext context)
        {
            _context = context;
        }

        public async Task<IEnumerable<EntradaBitacora>> ListarConCorreo()
        {
            var query = from b in _context.Set<EntradaBitacora>()
                        join u in _context.Users on b.IdentityUserId equals u.Id // Asumiendo que b.UserId es el FK
                        orderby b.FechaRegistro descending
                        select new EntradaBitacora
                        (
                            b.Id,
                            b.Accion,
                            b.Entidad,
                            b.EntidadId,
                            b.ValorNuevo,
                            u.Email,
                            b.IpAddress,
                            b.UserAgent,
                            b.FechaRegistro
                        );

            return await query.AsNoTracking().ToListAsync();
        }
    }
}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Infrastructure\Repositories\CarreraRepository.cs ---
using Microsoft.EntityFrameworkCore;
using PortalCOSIE.Domain.Entities.Carreras;
using PortalCOSIE.Infrastructure.Data;

namespace PortalCOSIE.Infrastructure.Repositories
{
    public class CarreraRepository : BaseRepository<Carrera>, ICarreraRepository
    {
        public CarreraRepository(AppDbContext context) : base(context)
        { }

        public async Task<Carrera> ObtenerCarreraConUnidadesAsync(string carrera)
        {
            return await _context.Set<Carrera>()
                .Include(c => c.UnidadesAprendizaje)
                .FirstOrDefaultAsync(c => c.Nombre == carrera);
        }

        public async Task<IEnumerable<UnidadAprendizaje>> ListarUnidadesPorCarreraAsync(string carrera)
        {
            var carreraEntity = await _context.Set<Carrera>()
                .Include(c => c.UnidadesAprendizaje)
                .FirstOrDefaultAsync(c => c.Nombre == carrera);
            return carreraEntity?.UnidadesAprendizaje ?? Enumerable.Empty<UnidadAprendizaje>();
        }
    }
}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Infrastructure\Repositories\DocumentoRepository.cs ---
using Microsoft.Data.SqlTypes;
using Microsoft.EntityFrameworkCore;
using Microsoft.EntityFrameworkCore.Storage;
using PortalCOSIE.Domain.Entities.Documentos;
using PortalCOSIE.Domain.Entities.Tramites;
using PortalCOSIE.Infrastructure.Data;

namespace PortalCOSIE.Infrastructure.Repositories
{
    public class DocumentoRepository : IDocumentoRepository
    {
        private readonly AppDbContext _context;

        public DocumentoRepository(AppDbContext context)
        {
            _context = context;
        }
        public async Task SubirArchivoAsync(Documento documento, Stream contenido)
        {
            // Inicializamos el contenido en 0 bytes para reservar el espacio en SQL.
            documento.SetContenido(Array.Empty<byte>());

            _context.Set<Documento>().Add(documento);
            await _context.SaveChangesAsync(); // Esto genera el ID y el RowGuid en BD si es necesario

            // 2. Preparar el streaming (FILESTREAM requiere transacción activa)
            // Usamos la transacción actual del UoW.
            var dbTransaction = _context.Database.CurrentTransaction?.GetDbTransaction();

            if (dbTransaction == null)
            {
                throw new InvalidOperationException("FILESTREAM requiere una transacción activa.");
            }

            // 3. Obtener Path y Contexto del archivo insertado
            string sql = "SELECT Contenido.PathName(), GET_FILESTREAM_TRANSACTION_CONTEXT() FROM Documento WHERE Id = @Id";

            var cmd = _context.Database.GetDbConnection().CreateCommand();
            cmd.Transaction = dbTransaction;
            cmd.CommandText = sql;

            var param = cmd.CreateParameter();
            param.ParameterName = "@Id";
            param.Value = documento.Id;
            cmd.Parameters.Add(param);

            using (var reader = await cmd.ExecuteReaderAsync())
            {
                if (await reader.ReadAsync())
                {
                    var filePath = reader.GetString(0); // Path lógico de SQL
                    var transactionContext = (byte[])reader.GetValue(1); // Contexto transaccional

                    reader.Close(); // Importante cerrar reader antes de abrir el stream de escritura

                    // 4. Escribir directamente al FileSystem de SQL Server
                    using (var sqlFileStream = new SqlFileStream(filePath, transactionContext, FileAccess.Write))
                    {
                        await contenido.CopyToAsync(sqlFileStream);
                    }
                }
            }
        }
    }
}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Infrastructure\Repositories\SesionRepository.cs ---
using Microsoft.EntityFrameworkCore;
using PortalCOSIE.Domain.Entities.Calendario;
using PortalCOSIE.Infrastructure.Data;

namespace PortalCOSIE.Infrastructure.Repositories
{
    public class SesionRepository : BaseRepository<SesionCOSIE>, ISesionRepository
    {
        public SesionRepository(AppDbContext context) : base(context)
        { }
        public async Task<IEnumerable<SesionCOSIE>> ListarSesiones(bool filtrarActivos)
        {
            return await _context.Set<SesionCOSIE>()
                .Where(s => filtrarActivos ? s.IsDeleted == false : true)
                .Include(s => s.FechasRecepcion)
                .AsNoTracking()
                .ToListAsync();
        }
        public async Task<SesionCOSIE?> ObtenerConFechasRecepcion(int id)
        {
            return await _context.Set<SesionCOSIE>()
                .Where(s => s.Id == id)
                .Include(s => s.FechasRecepcion)
                .FirstOrDefaultAsync();
        }
    }
}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Infrastructure\Repositories\TramiteRepository.cs ---
using Microsoft.EntityFrameworkCore;
using PortalCOSIE.Domain.Entities.Tramites;
using PortalCOSIE.Infrastructure.Data;

namespace PortalCOSIE.Infrastructure.Repositories
{
    public class TramiteRepository : BaseRepository<Tramite>, ITramiteRepository
    {
        public TramiteRepository(AppDbContext context) : base(context) { }

        public async Task<IEnumerable<Tramite>> ListarConDatosCompletos()
        {
            return await _context.Set<Tramite>()
                .Include(t => t.TipoTramite)
                .Include(t => t.EstadoTramite)
                .Include(t => t.Personal)
                .AsSplitQuery() // Evita la explosión cartesiana
                .AsNoTracking() // Mejora de rendimiento para solo lectura
                .ToListAsync();
        }
    }
}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Infrastructure\Repositories\UsuarioRepository.cs ---
using Microsoft.EntityFrameworkCore;
using PortalCOSIE.Domain.Entities.Usuarios;
using PortalCOSIE.Infrastructure.Data;

namespace PortalCOSIE.Infrastructure.Repositories
{
    public class UsuarioRepository : BaseRepository<Usuario>, IUsuarioRepository
    {
        public UsuarioRepository(AppDbContext context) : base(context)
        { }

        public async Task<Usuario> BuscarPorIdentityId(string identityUserId)
        {
            return await _context.Set<Usuario>().FirstOrDefaultAsync(u => u.IdentityUserId == identityUserId);
        }
        public async Task<Alumno> BuscarAlumnoConCarrera(string identityUserId)
        {
            return await _context.Set<Alumno>()
                .Include(a => a.Carrera!)
                .FirstOrDefaultAsync(u => u.IdentityUserId == identityUserId);
        }
        public async Task<Alumno> BuscarAlumnoPorBoleta(string boleta)
        {
            return await _context.Set<Alumno>()
                .FirstOrDefaultAsync(u => u.NumeroBoleta == boleta);
        }
        public async Task<IEnumerable<Alumno>> ListarAlumnoConCarrera()
        {
            return await _context.Set<Alumno>()
                .Include(a => a.Carrera!)
                .AsNoTracking()
                .ToListAsync();
        }
        public async Task<IEnumerable<Personal>> ListarConPersonal()
        {
            return await _context.Set<Personal>()
                .AsNoTracking()
                .ToListAsync();
        }
    }
}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Web\appsettings.json ---
{
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft.AspNetCore": "Warning"
    }
  },
  "AllowedHosts": "*",
  "ConnectionStrings": {
    "DefaultConnection": "Server=localhost;Database=PortalCOSIE;User Id=usuario2025;Password=usuario2025;TrustServerCertificate=True;"
  },
  "Smtp": {
    "Host": "smtp.gmail.com",
    "Port": "587",
    "User": "portalcosie",
    "Pass": "wqjx ybga ehig qenj",
    "From": "portalcosie@gmail.com"
  },
  "AdminUser": {
    "Email": "portalcosie@gmail.com",
    "Password": "Admin1234."
  }
}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Web\PortalCOSIE.Web.csproj ---
<Project Sdk="Microsoft.NET.Sdk.Web">

	<PropertyGroup>
		<TargetFramework>net8.0</TargetFramework>
		<Nullable>enable</Nullable>
		<ImplicitUsings>enable</ImplicitUsings>
	</PropertyGroup>

	<ItemGroup>
		<Compile Remove="Areas\Admin\**" />
		<Compile Remove="Views\Rol\**" />
		<Content Remove="Areas\Admin\**" />
		<Content Remove="Views\Rol\**" />
		<EmbeddedResource Remove="Areas\Admin\**" />
		<EmbeddedResource Remove="Views\Rol\**" />
		<None Remove="Areas\Admin\**" />
		<None Remove="Views\Rol\**" />
	</ItemGroup>

	<ItemGroup>
		<PackageReference Include="Microsoft.EntityFrameworkCore.Design" Version="9.0.7">
			<PrivateAssets>all</PrivateAssets>
			<IncludeAssets>runtime; build; native; contentfiles; analyzers; buildtransitive</IncludeAssets>
		</PackageReference>
		<PackageReference Include="Microsoft.VisualStudio.Web.CodeGeneration.Design" Version="8.0.7" />
	</ItemGroup>

	<ItemGroup>
		<ProjectReference Include="..\PortalCOSIE.Application\PortalCOSIE.Application.csproj" />
		<ProjectReference Include="..\PortalCOSIE.Infrastructure\PortalCOSIE.Infrastructure.csproj" />
	</ItemGroup>

	<ItemGroup>
		<ProjectReference Include="..\PortalCOSIE.Application\PortalCOSIE.Application.csproj" />
		<ProjectReference Include="..\PortalCOSIE.Infrastructure\PortalCOSIE.Infrastructure.csproj" />
	</ItemGroup>

	<ItemGroup>
		<Folder Include="Areas\" />
	</ItemGroup>

</Project>



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Web\Program.cs ---
using Microsoft.AspNetCore.Identity;
using Microsoft.EntityFrameworkCore;
using PortalCOSIE.Infrastructure.Data;
using PortalCOSIE.Infrastructure.Data.Identity;
using PortalCOSIE.Infrastructure.IoC;

var builder = WebApplication.CreateBuilder(args);

// Add services to the container.
builder.Services.AddHttpContextAccessor();

builder.Services.AddInfrastructure(builder.Configuration);

builder.Services.AddIdentity<IdentityUser, IdentityRole>(options =>
{
    options.SignIn.RequireConfirmedEmail = true;

    //Lockout (bloqueo tras intentos fallidos)
    options.Lockout.DefaultLockoutTimeSpan = TimeSpan.FromMinutes(5);  // Tiempo bloqueado
    options.Lockout.MaxFailedAccessAttempts = 5;                       // Intentos fallidos antes del bloqueo
})
    .AddEntityFrameworkStores<AppDbContext>()
    .AddDefaultTokenProviders();

builder.Services.ConfigureApplicationCookie(options =>
{
    options.LoginPath = "/Cuenta/Ingresar";
    options.LogoutPath = "/Cuenta/Salir";
    options.AccessDeniedPath = "/Cuenta/Denegado";
    options.Cookie.Name = "AuthCookie";
    options.Cookie.HttpOnly = true; //No accesible desde JS (XSS)
    options.Cookie.SecurePolicy = CookieSecurePolicy.Always; //Solo para HTTPS
    options.Cookie.SameSite = SameSiteMode.Strict; //Solo peticiones desde el sitio
    options.SlidingExpiration = true;   //Cada request -> Reinicia ExpireTimeSpan
    options.ExpireTimeSpan = TimeSpan.FromMinutes(5); //Duracion de sesion
});

builder.Services.AddControllersWithViews();

var app = builder.Build();

// Configure the HTTP request pipeline.
if (!app.Environment.IsDevelopment())
{
    app.UseExceptionHandler("/Shared/Error");
    // The default HSTS value is 30 days. You may want to change this for production scenarios, see https://aka.ms/aspnetcore-hsts.
    app.UseHsts();
}

app.UseHttpsRedirection();
app.UseStaticFiles();

app.UseRouting();

app.UseAuthentication();
app.UseAuthorization();
//MANJEO DE EXCEPCION GLOBAL REVISAR
app.UseMiddleware<GlobalExceptionHandlingMiddleware>();

using (var scope = app.Services.CreateScope())
{
    var userManager = scope.ServiceProvider.GetRequiredService<UserManager<IdentityUser>>();
    var configuration = scope.ServiceProvider.GetRequiredService<IConfiguration>();
    await DataSeeder.SeedIdentityAsync(userManager, configuration);
}
// En caso de tener areas, descomentar la siguiente linea
//app.MapControllerRoute(
//    name: "areas",
//    pattern: "{area:exists}/{controller=Calendario}/{action=Index}/{id?}");

app.MapControllerRoute(
    name: "default",
    pattern: "{controller=Calendario}/{action=Index}/{id?}");

app.Run();



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Web\Controllers\AlumnoController.cs ---
using Microsoft.AspNetCore.Authorization;
using Microsoft.AspNetCore.Mvc;
using Microsoft.AspNetCore.Mvc.Rendering;
using PortalCOSIE.Application.DTO.Cuenta;
using PortalCOSIE.Application.Interfaces;

namespace PortalCOSIE.Web.Controllers
{
    [Authorize(Roles = "Administrador, Personal")]
    public class AlumnoController : Controller
    {
        private readonly ISecurityService _securityService;
        private readonly IUsuarioService _usuarioService;
        private readonly ICarreraService _carreraService;
        private readonly IPeriodosService _catalogoService;

        public AlumnoController(
            ISecurityService securityService,
            IUsuarioService usuarioService,
            ICarreraService carreraService,
            IPeriodosService catalogoService
            )
        {
            _securityService = securityService;
            _usuarioService = usuarioService;
            _carreraService = carreraService;
            _catalogoService = catalogoService;
        }

        [HttpGet]
        public async Task<IActionResult> Index()
        {
            ViewBag.Carreras = new SelectList(await _carreraService.ListarActivasAsync(), "Id", "Nombre");
            ViewBag.Periodos = new SelectList(await _catalogoService.ListarPeriodos(), "Periodo");
            return View(await _securityService.ListarAlumnos());
        }

        [HttpPost]
        [ValidateAntiForgeryToken]
        public async Task<IActionResult> Editar(AlumnoDTO dto)
        {
            var result = await _usuarioService.EditarAlumno(dto);
            if (!result.Succeeded)
            {
                return Json(new { success = false, message = result.Errors });
            }
            return Json(new { success = true, message = result.Value });
        }

        [HttpPost]
        [ValidateAntiForgeryToken]
        public async Task<IActionResult> ActualizarRol(string userId, string rol)
        {
            var result = await _securityService.ToggleRol(userId, rol);
            return RedirectToAction(nameof(Index));
        }

        [HttpPost]
        [ValidateAntiForgeryToken]
        public async Task<IActionResult> ActualizarCelular(string userId, string celular)
        {
            var result = await _securityService.ActualizarCelularAsync(userId, celular);
            if (!result.Succeeded)
            {
                return Json(new { success = false, message = result.Errors });
            }
            return Json(new { success = true, message = result.Value });
        }
        
        [HttpPost]
        [ValidateAntiForgeryToken]
        public async Task<IActionResult> VerificarCorreo(string userId, string correo)
        {
            var result = await _securityService.VerificarCorreoAsync(userId, correo);
            if (!result.Succeeded)
            {
                return Json(new { success = false, message = result.Errors });
            }
            return Json(new { success = true, message = result.Value });
        }
    }
}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Web\Controllers\BitacoraController.cs ---
using Microsoft.AspNetCore.Authorization;
using Microsoft.AspNetCore.Mvc;
using PortalCOSIE.Application.Interfaces;

namespace PortalCOSIE.Web.Controllers
{
    [Authorize(Roles = "Administrador, Personal")]
    public class BitacoraController : Controller
    {
        private readonly IBitacoraService _bitacoraService;

        public BitacoraController(IBitacoraService bitacoraService)
        {
            _bitacoraService = bitacoraService;
        }

        [HttpGet]
        public async Task<IActionResult> Index()
        {
            return View(await _bitacoraService.ListarBitacoraAsync());
        }
    }
}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Web\Controllers\CalendarioController.cs ---
using Microsoft.AspNetCore.Authorization;
using Microsoft.AspNetCore.Mvc;
using PortalCOSIE.Application.Interfaces;

namespace PortalCOSIE.Web.Controllers
{
    public class CalendarioController : Controller
    {
        private readonly IPeriodosService _catalogoService;

        public CalendarioController(
            IPeriodosService catalogoService
            )
        {
            _catalogoService = catalogoService;
        }

        [HttpGet]
        [Authorize]
        public async Task<IActionResult> Index()
        {
            if (User.IsInRole("Administrador") || User.IsInRole("Personal"))
            {
                return View(await _catalogoService.ListarSesiones());
            }
            else
            {
                return View(await _catalogoService.ListarSesionesActivas());
            }
        }

        [HttpPost]
        [ValidateAntiForgeryToken]
        [Authorize(Roles = "Administrador, Personal")]
        public async Task<IActionResult> CrearSesionCOSIE(string numeroSesion, DateTime fechaSesion, List<DateTime> fechasRecepcion)
        {
            await _catalogoService.CrearSesion(numeroSesion, fechaSesion, fechasRecepcion);
            return RedirectToAction(nameof(Index));
        }

        [HttpPost]
        [ValidateAntiForgeryToken]
        [Authorize(Roles = "Administrador, Personal")]
        public async Task<IActionResult> EditarSesionCOSIE(int id, string numeroSesion, DateTime fechaSesion, List<DateTime> fechasRecepcion)
        {
            await _catalogoService.EditarSesion(id, numeroSesion, fechaSesion, fechasRecepcion);
            return RedirectToAction(nameof(Index));
        }
        [HttpPost]
        [ValidateAntiForgeryToken]
        [Authorize(Roles = "Administrador, Personal")]
        public async Task<IActionResult> ToggleSesionCOSIE(int id)
        {
            await _catalogoService.ToggleSesion(id);
            return RedirectToAction(nameof(Index));
        }
    }
}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Web\Controllers\ConfiguracionController.cs ---
using Microsoft.AspNetCore.Authorization;
using Microsoft.AspNetCore.Mvc;
using PortalCOSIE.Application.Interfaces;
using PortalCOSIE.Domain.Entities.Documentos;
using PortalCOSIE.Domain.Entities.Tramites;
using PortalCOSIE.Domain.Enums;

namespace PortalCOSIE.Web.Controllers
{
    public class ConfiguracionController : Controller
    {
        private readonly IPeriodosService _periodoService;
        private readonly ICarreraService _carreraService;
        private readonly ICatalogoService<EstadoTramite> _estadoTramiteService;
        private readonly ICatalogoService<EstadoDocumento> _estadoDocumentoService;
        private readonly ICatalogoService<TipoTramite> _tipoTramiteService;

        public ConfiguracionController(
            IPeriodosService periodoService,
            ICarreraService carreraService,
            ICatalogoService<EstadoTramite> estadoTramiteService,
            ICatalogoService<EstadoDocumento> estadoDocumentoService,
            ICatalogoService<TipoTramite> tipoTramiteService
            )
        {
            _periodoService = periodoService;
            _carreraService = carreraService;
            _estadoTramiteService = estadoTramiteService;
            _estadoDocumentoService = estadoDocumentoService;
            _tipoTramiteService = tipoTramiteService;
        }

        [HttpGet]
        [Authorize(Roles = "Administrador, Personal")]
        public IActionResult Index() => View();

        #region CARRERAS
        [HttpGet]
        [Authorize(Roles = "Administrador, Personal")]
        public async Task<IActionResult> Carreras()
        {
            return PartialView("_Carreras", await _carreraService.ListarAsync());
        }

        [HttpPost]
        [ValidateAntiForgeryToken]
        [Authorize(Roles = "Administrador, Personal")]
        public async Task<IActionResult> Carreras([FromForm] string nombre)
        {
            await _carreraService.CrearCarreraAsync(nombre);
            return Json(new { success = true, message = "Cambios guardados" });
        }

        [HttpPost]
        [ValidateAntiForgeryToken]
        [Authorize(Roles = "Administrador, Personal")]
        public async Task<IActionResult> EditarCarrera([FromForm] int id, [FromForm] string nombre)
        {
            await _carreraService.EditarCarreraAsync(id, nombre);
            return Json(new { success = true, message = "Cambios guardados" });
        }

        [HttpPost]
        [ValidateAntiForgeryToken]
        [Authorize(Roles = "Administrador, Personal")]
        public async Task<IActionResult> ToggleCarrera([FromForm] int id)
        {
            await _carreraService.ToggleCarrrera(id);
            return Json(new { success = true, message = "Cambios guardados" });
        }

        [HttpGet]
        [Authorize(Roles = "Administrador, Personal")]
        public async Task<IActionResult> Unidades(string id)
        {
            return View(await _carreraService.ListarConUnidadesAsync(id));
        }
        [HttpPost]
        [ValidateAntiForgeryToken]
        [Authorize(Roles = "Administrador, Personal")]
        public async Task<IActionResult> Unidades([FromForm] string nombre, [FromForm] int carreraId, [FromForm] Semestre semestre)
        {
            await _carreraService.CrearUnidadAsync(nombre, carreraId, semestre);
            return Json(new { success = true, message = "Cambios guardados" });
        }
        [HttpPost]
        [ValidateAntiForgeryToken]
        [Authorize(Roles = "Administrador, Personal")]
        public async Task<IActionResult> EditarUnidad([FromForm] int id, [FromForm] string nombre, [FromForm] string carreraNombre, [FromForm] Semestre semestre)
        {
            await _carreraService.EditarUnidadAsync(carreraNombre, id, nombre, semestre);
            return Json(new { success = true, message = "Cambios guardados" });
        }
        [HttpPost]
        [ValidateAntiForgeryToken]
        [Authorize(Roles = "Administrador, Personal")]
        public async Task<IActionResult> ToggleUnidad([FromForm] string carreraNombre, [FromForm] int id)
        {
            await _carreraService.ToggleUnidad(carreraNombre, id);
            return Json(new { success = true, message = "Cambios guardados" });
        }
        #endregion

        #region ESTADO_TRAMITE
        [HttpGet]
        [Authorize(Roles = "Administrador, Personal")]
        public async Task<IActionResult> Estados()
        {
            return PartialView("_EstadoTramite", await _estadoTramiteService.ListarAsync());
        }

        [HttpPost]
        [ValidateAntiForgeryToken]
        [Authorize(Roles = "Administrador, Personal")]
        public async Task<IActionResult> ToggleEstado([FromForm] int id)
        {
            await _estadoTramiteService.ToggleAsync(id);
            return Json(new { success = true, message = "Cambios guardados" });
        }
        #endregion

        #region ESTADO_DOCUMENTO
        [HttpGet]
        [Authorize(Roles = "Administrador, Personal")]
        public async Task<IActionResult> EstadosDocumento()
        {
            return PartialView("_EstadoDocumento", await _estadoDocumentoService.ListarAsync());
        }

        [HttpPost]
        [ValidateAntiForgeryToken]
        [Authorize(Roles = "Administrador, Personal")]
        public async Task<IActionResult> ToggleEstadoDocumento([FromForm] int id)
        {
            await _estadoDocumentoService.ToggleAsync(id);
            return Json(new { success = true, message = "Cambios guardados" });
        }
        #endregion

        #region TIPO_TRAMITE
        [HttpGet]
        [Authorize(Roles = "Administrador, Personal")]
        public async Task<IActionResult> Tipo()
        {
            return PartialView("_TipoTramite", await _tipoTramiteService.ListarAsync());
        }

        [HttpPost]
        [ValidateAntiForgeryToken]
        [Authorize(Roles = "Administrador, Personal")]
        public async Task<IActionResult> ToggleTipo([FromForm] int id)
        {
            await _tipoTramiteService.ToggleAsync(id);
            return Json(new { success = true, message = "Cambios guardados" });
        }

        #endregion

        [HttpGet]
        [Authorize(Roles = "Administrador, Personal")]
        public async Task<IActionResult> Periodos()
        {
            return PartialView("_Periodos", await _periodoService.BuscarPeriodoConfig());
        }

        [HttpPost]
        [Authorize(Roles = "Administrador, Personal")]
        public async Task<IActionResult> Periodos(int anioInicio, int periodoInicio, int anioFin, int periodoFin)
        {
            await _periodoService.EditarPeriodoConfig(anioInicio, periodoInicio, anioFin, periodoFin);
            return Json(new { success = true, message = "Cambios guardados" });
        }
    }
}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Web\Controllers\CuentaController.cs ---
using Humanizer;
using Microsoft.AspNetCore.Authorization;
using Microsoft.AspNetCore.Mvc;
using Microsoft.AspNetCore.Mvc.Rendering;
using PortalCOSIE.Application.DTO.Cuenta;
using PortalCOSIE.Application.Interfaces;
using System.Security.Claims;

namespace PortalCOSIE.Web.Controllers
{
    public class CuentaController : Controller
    {
        private readonly ISecurityService _securityService;
        private readonly IUsuarioService _usuarioService;
        private readonly ICarreraService _carreraService;
        private readonly IPeriodosService _catalogoService;

        public CuentaController(
            ISecurityService securityService,
            IUsuarioService usuarioService,
            ICarreraService carreraService,
            IPeriodosService catalogoService
            )
        {
            _securityService = securityService;
            _usuarioService = usuarioService;
            _carreraService = carreraService;
            _catalogoService = catalogoService;
        }

        [HttpGet]
        public IActionResult Crear()
        {
            if (User?.Identity?.IsAuthenticated == true)
            {
                return RedirectToAction("Index", "Calendario");
            }
            return View();
        }

        [HttpPost]
        [ValidateAntiForgeryToken]
        public async Task<IActionResult> Crear(CrearCuentaDTO dto)
        {
            var result = await _securityService.CrearUsuarioAsync(dto);

            if (!result.Succeeded)
            {
                return Json(new { success = false, message = result.Errors });
            }
            return Json(new { success = true, message = result.Value });
        }

        [HttpGet]
        public async Task<IActionResult> Confirmar(string correo, string token)
        {
            if (User?.Identity?.IsAuthenticated == true)
            {
                return RedirectToAction("Index", "Calendario");
            }

            var result = await _securityService.ConfirmarCorreoAsync(correo, token);

            if (!result.Succeeded)
            {
                TempData["MessageType"] = "error";
                TempData["Message"] = string.Join(", ", result.Errors);
                return RedirectToAction(nameof(Ingresar));
            }
            TempData["MessageType"] = "success";
            TempData["Message"] = result.Value;
            return RedirectToAction(nameof(Ingresar));
        }

        [HttpGet]
        [Authorize]
        public async Task<IActionResult> Registrar()
        {
            var userId = User.FindFirstValue(ClaimTypes.NameIdentifier);

            if (await _usuarioService.BuscarUsuarioPorIdentityId(userId) != null)
            {
                return RedirectToAction("Index", "Calendario");
            }
            ViewBag.Carreras = new SelectList(await _carreraService.ListarActivasAsync(), "Id", "Nombre");
            ViewBag.Periodos = new SelectList(await _catalogoService.ListarPeriodos(), "Periodo");
            return View();
        }

        [HttpPost]
        [ValidateAntiForgeryToken]
        [Authorize]
        public async Task<IActionResult> Registrar(RegistrarDTO dto)
        {
            var userId = User.FindFirstValue(ClaimTypes.NameIdentifier);
            var result = await _usuarioService.RegistrarAlumno(dto, userId);

            if (!result.Succeeded)
            {
                return Json(new { success = false, message = result.Errors });
            }
            return Json(new { success = true, message = result.Value });
        }

        [HttpGet]
        public IActionResult Ingresar()
        {
            if (User?.Identity?.IsAuthenticated == true)
            {
                return RedirectToAction("Index", "Calendario");
            }
            return View();
        }

        [HttpPost]
        [ValidateAntiForgeryToken]
        public async Task<IActionResult> Ingresar(IngresarDTO dto)
        {
            var result = await _securityService.IngresarUsuarioAsync(dto);
            if (!result.Succeeded)
            {
                return Json(new { success = false, message = result.Errors });
            }
            var userId = User.FindFirstValue(ClaimTypes.NameIdentifier);
            if (await _usuarioService.BuscarUsuarioPorIdentityId(userId) == null && !User.IsInRole("Administrador"))
            {
                return RedirectToAction(nameof(Registrar));
            }
            return RedirectToAction("Index", "Calendario");
        }

        [HttpGet]
        public IActionResult Recuperar()
        {
            return View();
        }

        [HttpPost]
        [ValidateAntiForgeryToken]
        public async Task<IActionResult> Recuperar(string correo)
        {
            var result = await _securityService.RecuperarContrasenaAsync(correo);
            if (!result.Succeeded)
            {
                return Json(new { success = false, message = result.Errors });
            }
            return Json(new { success = true, message = result.Value });
        }

        [HttpGet]
        public IActionResult Restablecer(string correo, string token)
        {
            if (string.IsNullOrEmpty(correo) || string.IsNullOrEmpty(token))
                return RedirectToAction(nameof(Ingresar));

            var model = new RestablecerDTO { Correo = correo, Token = token };
            return View(model);
        }

        [HttpPost]
        [ValidateAntiForgeryToken]
        public async Task<IActionResult> Restablecer(RestablecerDTO dto)
        {
            var result = await _securityService.RestablecerContrasenaAsync(dto);
            if (!result.Succeeded)
            {
                return Json(new { success = false, message = result.Errors });
            }
            return Json(new { success = true, message = result.Value });
        }

        [HttpPost]
        [Authorize]
        [ValidateAntiForgeryToken]
        public async Task<IActionResult> CambiarContrasena(CambiarContrasenaDTO dto) 
        {
            var result = await _securityService.CambiarContrasena(dto);
            if (!result.Succeeded)
            {
                return Json(new { success = false, message = result.Errors });
            }
            return Json(new { success = true, message = result.Value });
        }

        [HttpGet]
        public async Task<IActionResult> ActualizarCorreo(string id, string correo, string token)
        {
            if (User?.Identity?.IsAuthenticated == true)
            {
                return RedirectToAction("Index", "Calendario");
            }

            var result = await _securityService.ActualizarCorreoAsync(id, correo, token);
            if (!result.Succeeded)
            {
                TempData["MessageType"] = "error";
                TempData["Message"] = string.Join(", ", result.Errors);
                return RedirectToAction(nameof(Ingresar));
            }
            TempData["MessageType"] = "success";
            TempData["Message"] = result.Value;
            return RedirectToAction(nameof(Ingresar));
        }

        [HttpGet]
        [Authorize]
        public async Task<IActionResult> MisDatos()
        {
            var userId = User.FindFirstValue(ClaimTypes.NameIdentifier);
            if (User.IsInRole("Administrador"))
            {
                var admin = await _securityService.ListarAlumnos();
                return View("MisDatosAdmin", admin);
            }

            if (User.IsInRole("Personal"))
            {
                var personal = await _usuarioService.BuscarPersonal(userId);
                return View("MisDatosPersonal", personal);
            }

            if (User.IsInRole("Alumno")) {
                var alumno = await _securityService.BuscarAlumnoCompleto(userId);
                return View("MisDatosAlumno", alumno);
            }
            return Json(new { success = false, message = "No tienes un rol valido" });
        }


        [HttpPost]
        [ValidateAntiForgeryToken]
        [Authorize]
        public async Task<IActionResult> Salir()
        {
            await _securityService.CerrarSesionAsync();
            return RedirectToAction("Ingresar", "Cuenta");
        }

        [HttpGet]
        [Authorize]
        public IActionResult Denegado()
        {
            return View();
        }
    }
}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Web\Controllers\DashboardController.cs ---
using Microsoft.AspNetCore.Authorization;
using Microsoft.AspNetCore.Mvc;

namespace PortalCOSIE.Web.Controllers
{
    [Authorize(Roles = "Administrador, Personal")]
    public class DashboardController : Controller
    {
        [HttpGet]
        public IActionResult Index()
        {
            return View();
        }
    }
}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Web\Controllers\PersonalController.cs ---
using Microsoft.AspNetCore.Authorization;
using Microsoft.AspNetCore.Mvc;
using Microsoft.AspNetCore.Mvc.Rendering;
using PortalCOSIE.Application.DTO.Cuenta;
using PortalCOSIE.Application.DTO.Usuario;
using PortalCOSIE.Application.Interfaces;

namespace PortalCOSIE.Web.Controllers
{
    [Authorize(Roles = "Administrador")]
    public class PersonalController : Controller
    {
        private readonly ISecurityService _securityService;
        private readonly IUsuarioService _usuarioService;
        private readonly ICarreraService _carreraService;

        public PersonalController(ISecurityService securityService, IUsuarioService usuarioService, ICarreraService catalogoService)
        {
            _securityService = securityService;
            _usuarioService = usuarioService;
            _carreraService = catalogoService;
        }

        [HttpGet]
        public async Task<IActionResult> Index()
        {
            return View(await _securityService.ListarPersonal());
        }

        [HttpGet]
        public IActionResult Crear()
        {
            return View();
        }

        [HttpPost]
        public async Task<IActionResult> Crear(PersonalDTO dto)
        {
            if (!ModelState.IsValid)
            {
                return View(dto);
            }

            var result = await _securityService.CrearUsuarioAsync(new CrearCuentaDTO());

            if (!result.Succeeded)
            {
                foreach (var error in result.Errors)
                {
                    ModelState.AddModelError(string.Empty, error);
                }
                return View(dto);
            }
            else
            {
                TempData["Message"] = result.Value;
            }

            return RedirectToAction(nameof(Index));
        }

        [HttpPost]
        [ValidateAntiForgeryToken]
        public async Task<IActionResult> Editar(PersonalDTO dto)
        {
            var result = await _usuarioService.EditarPersonal(dto);
            if (!result.Succeeded)
            {
                return Json(new { success = false, message = result.Errors });
            }
            return Json(new { success = true, message = result.Value });
        }
        
        [HttpPost]
        [ValidateAntiForgeryToken]
        public async Task<IActionResult> ActualizarRol(string userId, string rol)
        {
            var result = await _securityService.ToggleRol(userId, rol);
            return RedirectToAction(nameof(Index));
        }
        [HttpPost]
        [ValidateAntiForgeryToken]
        public async Task<IActionResult> VerificarCorreo(string userId, string correo)
        {
            var result = await _securityService.VerificarCorreoAsync(userId, correo);
            if (!result.Succeeded)
            {
                return Json(new { success = false, message = result.Errors });
            }
            return Json(new { success = true, message = result.Value });
        }
    }
}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Web\Controllers\TramiteController.cs ---
using Microsoft.AspNetCore.Authorization;
using Microsoft.AspNetCore.Mvc;
using Microsoft.AspNetCore.Mvc.Rendering;
using PortalCOSIE.Application.Interfaces;
using PortalCOSIE.Web.Models;
using System.Security.Claims;
using PortalCOSIE.Domain.Entities.Documentos;
using PortalCOSIE.Application.DTO.Tramites;

namespace PortalCOSIE.Web.Controllers
{
    public class TramiteController : Controller
    {
        private readonly ITramiteService _tramiteService;
        private readonly ICarreraService _carreraService;
        private readonly IPeriodosService _catalogoService;
        private readonly ISecurityService _securityService;

        public TramiteController(
            ITramiteService tramiteService,
            ICarreraService carreraService,
            IPeriodosService catalogoService,
            ISecurityService securityService
            )
        {
            _tramiteService = tramiteService;
            _carreraService = carreraService;
            _catalogoService = catalogoService;
            _securityService = securityService;
        }

        [HttpGet]
        [Authorize(Roles = "Administrador, Personal, Alumno")]
        public async Task<IActionResult> Index()
        {
            return View(await _tramiteService.ListarTodos());
        }

        [HttpGet]
        [Authorize(Roles = "Administrador, Alumno")]
        public async Task<IActionResult> SolicitarCTCE()
        {
            var userId = User?.FindFirstValue(ClaimTypes.NameIdentifier);
            var alumno = await _securityService.BuscarAlumnoCompleto(userId);

            ViewBag.Unidades = new SelectList(await _carreraService.ListarUnidadesAsync(alumno.Carrera.Nombre), "Id", "Nombre");
            ViewBag.Periodos = new SelectList(await _catalogoService.ListarPeriodos(), "Periodo");
            return View();
        }

        [HttpPost]
        [Authorize(Roles = "Administrador, Alumno")]
        public async Task<IActionResult> SolicitarCTCE(SolicitudCtceVM model)
        {
            var userId = User?.FindFirstValue(ClaimTypes.NameIdentifier);
            //var alumno = await _securityService.BuscarAlumnoCompleto(userId);

            var solicitudDto = new SolicitudCtceDTO
            {
                Situacion = model.Situacion,
                TieneDictamenesAnteriores = model.TieneDictamenesAnteriores,
                UnidadesReprobadas = model.UnidadesReprobadas.Select(u => new UnidadReprobadaDto
                {
                    UnidadId = u.UnidadId,
                    PeriodoCursado = u.PeriodoCursado,
                    PeriodoRecursado = u.PeriodoRecursado
                }).ToList(),
                CartaExposicionMotivos = new DocumentoDto
                {
                    Nombre = model.CartaExposicionMotivos.FileName,
                    Contenido = model.CartaExposicionMotivos.OpenReadStream()
                },
                Probatorios = new DocumentoDto
                {
                    Nombre = model.CartaExposicionMotivos.FileName,
                    Contenido = model.CartaExposicionMotivos.OpenReadStream()
                },
                Identificacion = new DocumentoDto
                {
                    Nombre = model.CartaExposicionMotivos.FileName,
                    Contenido = model.CartaExposicionMotivos.OpenReadStream()
                },
                BoletaGlobal = new DocumentoDto
                {
                    Nombre = model.CartaExposicionMotivos.FileName,
                    Contenido = model.CartaExposicionMotivos.OpenReadStream()
                }
            };

            // 2. Llamar al servicio. El servicio NO sabe qué es un IFormFile.
            await _tramiteService.SolicitarCTCE(solicitudDto, userId);

            return Json(new { success = true, message = "Trámite solicitado con éxito." });
        }

    }
}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Web\Extensions\EstadoTramiteExtensions.cs ---
using PortalCOSIE.Domain.Entities.Tramites;

public static class EstadoTramiteExtensions
{
    public static string ToBadgeClass(this EstadoTramite estado)
    {
        return estado.Nombre switch
        {
            "Solicitado" => "bg-secondary",
            "EnRevision" => "bg-warning text-dark",
            "DocumentosPendientes" => "bg-secondary",
            "Concluido" => "bg-primary",
            "Cancelado" => "bg-danger",
            _ => "bg-light text-dark" // Default
        };
    }
    public static string ToIconClass(this EstadoTramite estado)
    {
        return estado.Nombre switch
        {
            "Solicitado" => "fa-solid fa-inbox",
            "EnRevision" => "fa-solid fa-eye",
            "DocumentosPendientes" => "fa-solid fa-file-circle-exclamation",
            "Cancelado" => "fa-solid fa-circle-xmark",
            "Concluido" => "fa-solid fa-flag",
            _ => "fa-solid fa-circle-question"
        };
    }

}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Web\Extensions\ExceptionHandlingMiddleware.cs ---
using Microsoft.Data.SqlClient;
using Microsoft.EntityFrameworkCore;
using PortalCOSIE.Domain;

public class GlobalExceptionHandlingMiddleware
{
    private readonly RequestDelegate _next;
    private readonly ILogger<GlobalExceptionHandlingMiddleware> _logger;

    public GlobalExceptionHandlingMiddleware(RequestDelegate next, ILogger<GlobalExceptionHandlingMiddleware> logger)
    {
        _next = next;
        _logger = logger;
    }

    public async Task InvokeAsync(HttpContext httpContext)
    {
        try
        {
            await _next(httpContext);
        }
        catch (Exception ex)
        {
            var (statusCode, userMessage, logAsError) = ex switch
            {
                DomainException => (StatusCodes.Status400BadRequest, ex.Message, false),
                ApplicationException => (StatusCodes.Status400BadRequest, ex.Message, true),
                DbUpdateException dbEx when dbEx.InnerException is SqlException sqlEx => MapSqlException(sqlEx),
                SqlException sqlEx => MapSqlException(sqlEx),
                _ => (StatusCodes.Status500InternalServerError, "Error interno del servidor", true) // Esta maneja las NO controladas
            };

            if (logAsError)
            {
                _logger.LogError(ex, "Excepción manejada: {Message}", ex.Message);
            }
            else
            {
                _logger.LogWarning(ex, "Excepción de dominio/aplicación: {Message}", ex.Message);
            }

            await HandleExceptionAsync(httpContext, userMessage, statusCode, ex.GetType().Name);
        }
    }

    private static (int statusCode, string message, bool logAsError) MapSqlException(SqlException ex)
    {
        return ex.Number switch
        {
            2627 or 2601 => (StatusCodes.Status409Conflict, "El registro ya existe, revisa los campos unicos.", true),
            547 => (StatusCodes.Status400BadRequest, "No se puede completar la operación porque tiene datos relacionados.", true),
            _ => (StatusCodes.Status500InternalServerError, "Error en la base de datos. Por favor, intente nuevamente.", true)
        };
    }

    private static async Task HandleExceptionAsync(HttpContext context, string userMessage, int statusCode, string exceptionType)
    {
        context.Response.StatusCode = statusCode;
        context.Response.ContentType = "application/json";

        var response = new
        {
            success = false,
            message = userMessage,
            type = exceptionType
        };

        await context.Response.WriteAsJsonAsync(response);
    }
}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Web\Models\SolicitudCtceVM.cs ---
namespace PortalCOSIE.Web.Models
{
    public class SolicitudCtceVM
    {
        public string Situacion { get; set; }
        public bool TieneDictamenesAnteriores { get; set; }
        public List<UnidadReprobadaVM> UnidadesReprobadas { get; set; } = new List<UnidadReprobadaVM>();
        public IFormFile CartaExposicionMotivos { get; set; }
        public IFormFile Identificacion { get; set; }
        public IFormFile BoletaGlobal { get; set; }
        public IFormFile Probatorios { get; set; }
    }

    public class UnidadReprobadaVM
    {
        public int UnidadId { get; set; }
        public string PeriodoCursado { get; set; }
        public string PeriodoRecursado { get; set; }
    }
}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Web\Properties\launchSettings.json ---
{
  "$schema": "http://json.schemastore.org/launchsettings.json",
  "iisSettings": {
    "windowsAuthentication": false,
    "anonymousAuthentication": true,
    "iisExpress": {
      "applicationUrl": "http://localhost:29862",
      "sslPort": 44339
    }
  },
  "profiles": {
    "http": {
      "commandName": "Project",
      "dotnetRunMessages": true,
      "launchBrowser": true,
      "applicationUrl": "http://localhost:5285",
      "environmentVariables": {
        "ASPNETCORE_ENVIRONMENT": "Development"
      }
    },
    "https": {
      "commandName": "Project",
      "dotnetRunMessages": true,
      "launchBrowser": true,
      "applicationUrl": "https://localhost:7276;http://localhost:5285",
      "environmentVariables": {
        "ASPNETCORE_ENVIRONMENT": "Development"
      }
    },
    "IIS Express": {
      "commandName": "IISExpress",
      "launchBrowser": true,
      "environmentVariables": {
        "ASPNETCORE_ENVIRONMENT": "Development"
      }
    }
  }
}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Web\Properties\serviceDependencies.json ---
{
  "dependencies": {
    "mssql1": {
      "type": "mssql",
      "connectionId": "ConnectionStrings:AppDbContextConnection"
    }
  }
}



--- Archivo: C:\Users\sauc0\Documents\Proyectos de programacion\PortalCOSIE\src\PortalCOSIE.Web\Properties\serviceDependencies.local.json ---
{
  "dependencies": {
    "mssql1": {
      "type": "mssql.local",
      "connectionId": "ConnectionStrings:AppDbContextConnection"
    }
  }
}



