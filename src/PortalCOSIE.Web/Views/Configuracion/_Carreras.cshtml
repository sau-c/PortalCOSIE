@model IEnumerable<PortalCOSIE.Domain.Entities.Carrera>

<div class="d-flex justify-content-end mt-3">
    <button type="button"
            class="btn btn-sm btn-success generic-create"
            data-title="Crear carrera"
            data-action="@Url.Action("Carreras", "Configuracion")"
            data-placeholder="Nombre de la carrera"
            data-icon="fas fa-graduation-cap">
        <i class="fas fa-plus me-1"></i> Crear
    </button>
</div>

<table id="tblCarreras" class="table table-hover table-bordered">
    <thead class="table-secondary">
        <tr class="small">
            <th>Id</th>
            <th>Nombre</th>
            <th>Estatus</th>
            <th>Acción</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var carrera in Model)
        {
            <tr class="small" style="@(carrera.IsDeleted ? "background-color: #ffd4d4" : "")">
                <td>@carrera.Id</td>
                <td>@carrera.Nombre</td>
                <td>
                    <span class="badge @(carrera.IsDeleted ? "bg-danger" : "bg-success") badge-role">
                        @(carrera.IsDeleted ? "Inactivo" : "Activo")
                    </span>
                </td>
                <td>
                    <a asp-action="Unidades" asp-route-id="@carrera.Nombre" class="btn btn-sm btn-outline-secondary" title="Ver unidades de aprendizaje">
                        <i class="fas fa-list"></i>
                    </a>
                    <button type="button"
                            class="btn btn-sm btn-outline-primary generic-edit"
                            title="Editar"
                            data-title="Editar carrera"
                            data-action="@Url.Action("EditarCarrera", "Configuracion")"
                            data-id="@carrera.Id"
                            data-nombre="@carrera.Nombre"
                            data-placeholder="Nombre de la carrera"
                            data-icon="fas fa-graduation-cap">
                        <i class="fas fa-edit"></i>
                    </button>
                    <button type="button"
                            class="btn btn-sm @(carrera.IsDeleted ? "btn-outline-success" : "btn-outline-danger") generic-toggle"
                            title="@(carrera.IsDeleted ? "Activar" : "Desactivar")"
                            data-action="@Url.Action("ToggleCarrera", "Configuracion")"
                            data-id="@carrera.Id"
                            data-name="@carrera.Nombre"
                            data-estado-actual="@carrera.IsDeleted"
                            data-entity="estado">
                        <i class="fas @(carrera.IsDeleted ? "fa-eye" : "fa-eye-slash")"></i>
                    </button>
                </td>
            </tr>
        }
    </tbody>
</table>


<script>
    $(document).ready(function () {
        // Configuración de DataTable
        $('#tblCarreras').DataTable({
            language: {
                url: '//cdn.datatables.net/plug-ins/2.3.2/i18n/es-MX.json',
            },
            searching: false,
            paging: false,
            scrollCollapse: true,
            scrollY: 'calc(100vh - 445px)',
            columnDefs: [
                { targets: 0, width: "1%" },
                { targets: 2, width: "1%", className: "text-center",},
                {
                    targets: 3,
                    width: "130px",
                    className: "text-center",
                    orderable: false
                }
            ]
        });
    });
</script>
