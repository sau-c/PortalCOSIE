@model IEnumerable<PortalCOSIE.Domain.Entities.Tramites.TipoTramite>

<div class="d-flex justify-content-end mt-3">
    <button type="button"
            class="btn btn-sm btn-success generic-create"
            data-title="Crear tipo"
            data-action="@Url.Action("Tipo", "Configuracion")"
            data-placeholder="Nombre del tipo"
            data-icon="fas fa-tasks">
        <i class="fas fa-plus me-1"></i> Crear
    </button>
</div>

<table id="tblTipo" class="table table-hover table-bordered">
    <thead class="table-secondary">
        <tr class="small">
            <th>Id</th>
            <th>Nombre</th>
            <th>Estatus</th>
            <th>Acción</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var tipo in Model)
        {
            <tr class="small" style="@(tipo.IsDeleted ? "background-color: #ffd4d4 !important;" : "")">
                <td>@tipo.Id</td>
                <td>@tipo.Nombre</td>
                <td>
                    <span class="badge @(tipo.IsDeleted ? "bg-danger" : "bg-success") badge-role">
                        @(tipo.IsDeleted ? "Inactivo" : "Activo")
                    </span>
                </td>
                <td>
                    <button type="button"
                            class="btn btn-sm btn-outline-primary generic-edit"
                            title="Editar"
                            data-title="Editar tipo tramite"
                            data-action="@Url.Action("EditarTipo", "Configuracion")"
                            data-id="@tipo.Id"
                            data-nombre="@tipo.Nombre"
                            data-placeholder="Nombre del tramite"
                            data-icon="fas fa-tasks">
                        <i class="fas fa-edit"></i>
                    </button>
                    <button type="button"
                            class="btn btn-sm @(tipo.IsDeleted ? "btn-outline-success" : "btn-outline-danger") generic-toggle"
                            title="@(tipo.IsDeleted ? "Activar" : "Desactivar")"
                            data-action="@Url.Action("ToggleTipo", "Configuracion")"
                            data-id="@tipo.Id"
                            data-name="@tipo.Nombre"
                            data-estado-actual="@tipo.IsDeleted"
                            data-entity="tipo">
                        <i class="fas @(tipo.IsDeleted ? "fa-eye" : "fa-eye-slash")"></i>
                    </button>
                </td>
            </tr>
        }
    </tbody>
</table>

<script>
    $(document).ready(function () {
        // Configuración de DataTable
        $('#tblTipo').DataTable({
            language: {
                url: '//cdn.datatables.net/plug-ins/2.3.2/i18n/es-MX.json',
            },
            searching: false,
            paging: false,
            scrollCollapse: true,
            scrollY: 'calc(100vh - 445px)',
            columnDefs:
            [
                { targets: 0, width: "1%" },
                { targets: 2, width: "1%", className: "text-center",},
                {
                    targets: 3,
                    width: "95px",
                    className: "text-center",
                    orderable: false
                }
            ]
        });
    });
</script>